<!DOCTYPE html>
<!-- saved from url=(0087)https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers -->
<html class="js supports no-touchevents cssfilters" lang="fr" prefix="og: http://ogp.me/ns#" style=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" src="./Triggers - Administrez vos bases de données avec MySQL_files/300lo.json"></script><script type="text/javascript" src="./Triggers - Administrez vos bases de données avec MySQL_files/_ate.track.config_resp"></script><style class="vjs-styles-defaults">
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid {
        padding-top: 56.25%
      }
    </style>
<title>Triggers - Administrez vos bases de données avec MySQL</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript" async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/insight.min.js.téléchargement"></script><script type="text/javascript" async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/linkid.js.téléchargement"></script><script src="./Triggers - Administrez vos bases de données avec MySQL_files/rules-p-d1D4hSPec1QW4.js.téléchargement"></script><script type="text/javascript" src="./Triggers - Administrez vos bases de données avec MySQL_files/90dc06697a"></script><script type="text/javascript" async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/conversion_async.js.téléchargement"></script><script type="text/javascript" async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/bat.js.téléchargement"></script><script type="text/javascript" async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/gtm.js.téléchargement"></script><script type="text/javascript" async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/blueshift.js.téléchargement"></script><script type="text/javascript" async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/analytics.js.téléchargement"></script><script type="text/javascript" async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/track.js.téléchargement" id="cio-tracker" data-site-id="46e8e9c18365c4bba6c1"></script><script type="text/javascript" async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/amplitude-3.7.0-min.gz.js.téléchargement"></script><script src="./Triggers - Administrez vos bases de données avec MySQL_files/identity.js.téléchargement" async=""></script><script src="./Triggers - Administrez vos bases de données avec MySQL_files/1570554156513134" async=""></script><script type="text/javascript" async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/fbevents.js.téléchargement"></script><script type="text/javascript" async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/quant.js.téléchargement"></script><script src="./Triggers - Administrez vos bases de données avec MySQL_files/nr-1044.min.js.téléchargement"></script><script type="text/javascript" id="analytics-js" async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/analytics.min.js.téléchargement"></script><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var o=n[t]={exports:{}};e[t][0].call(o.exports,function(n){var o=e[t][1][n];return r(o||n)},o,o.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<t.length;o++)r(t[o]);return r}({1:[function(e,n,t){function r(){}function o(e,n,t){return function(){return i(e,[c.now()].concat(u(arguments)),n?null:this,t),n?void 0:this}}var i=e("handle"),a=e(2),u=e(3),f=e("ee").get("tracer"),c=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,n){s[n]=o(d+n,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,o="function"==typeof n;return i(l+"tracer",[c.now(),e,t],r),function(){if(f.emit((o?"":"no-")+"fn-start",[c.now(),r,o],t),o)try{return n.apply(this,arguments)}finally{f.emit("fn-end",[c.now()],t)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=o(l+n)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),i("err",[e,c.now()])}},{}],2:[function(e,n,t){function r(e,n){var t=[],r="",i=0;for(r in e)o.call(e,r)&&(t[i]=n(r,e[r]),i+=1);return t}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],3:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(o<0?0:o);++r<o;)i[r]=e[n+r];return i}n.exports=r},{}],4:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function o(e){function n(e){return e&&e instanceof r?e:e?f(e,u,i):i()}function t(t,r,o,i){if(!d.aborted||i){e&&e(t,r,o);for(var a=n(o),u=m(t),f=u.length,c=0;c<f;c++)u[c].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function l(e,n){v[e]=m(e).concat(n)}function m(e){return v[e]||[]}function w(e){return p[e]=p[e]||o(t)}function g(e,n){c(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var v={},y={},b={on:l,emit:t,get:w,listeners:m,context:n,buffer:g,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",f=e("gos"),c=e(2),s={},p={},d=n.exports=o();d.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(o.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){o.buffer([e],r),o.emit(e,n,t)}var o=e("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=h.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();c(y,function(n,t){e[n]||(e[n]=t)}),f("mark",["onload",a()+h.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function o(){"complete"===d.readyState&&i()}function i(){f("mark",["domContent",a()+h.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-h.offset}var u=(new Date).getTime(),f=e("handle"),c=e(2),s=e("ee"),p=window,d=p.document,l="addEventListener",m="attachEvent",w=p.XMLHttpRequest,g=w&&w.prototype;NREUM.o={ST:setTimeout,SI:p.setImmediate,CT:clearTimeout,XHR:w,REQ:p.Request,EV:p.Event,PR:p.Promise,MO:p.MutationObserver};var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1044.min.js"},b=w&&g&&g[l]&&!/CriOS/.test(navigator.userAgent),h=n.exports={offset:u,now:a,origin:v,features:{},xhrWrappable:b};e(1),d[l]?(d[l]("DOMContentLoaded",i,!1),p[l]("load",r,!1)):(d[m]("onreadystatechange",o),p[m]("onload",r)),f("mark",["firstbyte",u],null,"api");var x=0,E=e(4)},{}]},{},["loader"]);</script>
<meta name="application-name" content="OpenClassrooms">
<meta name="msapplication-TileColor" content="#e95325">
<meta name="msapplication-TileImage" content="/fav-icon.png?v=1">
<meta name="theme-color" content="#E95325">
<link rel="icon" sizes="144x144" href="https://openclassrooms.com/fav-icon.png?v=1">
<link rel="apple-touch-icon" href="https://openclassrooms.com/apple-touch-icon.png">
<link rel="apple-touch-icon" href="https://openclassrooms.com/apple-touch-icon-iphone.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://openclassrooms.com/apple-touch-icon-ipad.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://openclassrooms.com/apple-touch-icon-iphone-retina-display.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://openclassrooms.com/apple-touch-icon-ipad-retina-display.png">
<link rel="apple-touch-icon-precomposed" href="https://openclassrooms.com/apple-touch-icon-precomposed.png">
<link rel="shortcut icon" href="https://openclassrooms.com/favicon.ico?402e86c">
<link href="./Triggers - Administrez vos bases de données avec MySQL_files/master-af84697a.css" type="text/css" rel="stylesheet" media="all">
<link href="./Triggers - Administrez vos bases de données avec MySQL_files/main-49192b3f.css" type="text/css" rel="stylesheet" media="all">
<link href="./Triggers - Administrez vos bases de données avec MySQL_files/video-js.css" rel="stylesheet">
<script>
    /*! modernizr 3.3.1 (Custom Build) | MIT *
    * https://modernizr.com/download/?-cssfilters-touchevents-setclasses !*/
    !function(e,n,t){function o(e,n){return typeof e===n}function r(){var e,n,t,r,s,i,a;for(var l in C)if(C.hasOwnProperty(l)){if(e=[],n=C[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(r=o(n.fn,"function")?n.fn():n.fn,s=0;s<e.length;s++)i=e[s],a=i.split("."),1===a.length?Modernizr[a[0]]=r:(!Modernizr[a[0]]||Modernizr[a[0]]instanceof Boolean||(Modernizr[a[0]]=new Boolean(Modernizr[a[0]])),Modernizr[a[0]][a[1]]=r),g.push((r?"":"no-")+a.join("-"))}}function s(e){var n=w.className,t=Modernizr._config.classPrefix||"";if(x&&(n=n.baseVal),Modernizr._config.enableJSClass){var o=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(o,"$1"+t+"js$2")}Modernizr._config.enableClasses&&(n+=" "+t+e.join(" "+t),x?w.className.baseVal=n:w.className=n)}function i(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):x?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function a(){var e=n.body;return e||(e=i(x?"svg":"body"),e.fake=!0),e}function l(e,t,o,r){var s,l,u,f,p="modernizr",c=i("div"),d=a();if(parseInt(o,10))for(;o--;)u=i("div"),u.id=r?r[o]:p+(o+1),c.appendChild(u);return s=i("style"),s.type="text/css",s.id="s"+p,(d.fake?d:c).appendChild(s),d.appendChild(c),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(n.createTextNode(e)),c.id=p,d.fake&&(d.style.background="",d.style.overflow="hidden",f=w.style.overflow,w.style.overflow="hidden",w.appendChild(d)),l=t(c,e),d.fake?(d.parentNode.removeChild(d),w.style.overflow=f,w.offsetHeight):c.parentNode.removeChild(c),!!l}function u(e,n){return!!~(""+e).indexOf(n)}function f(e){return e.replace(/([a-z])-([a-z])/g,function(e,n,t){return n+t.toUpperCase()}).replace(/^-/,"")}function p(e,n){return function(){return e.apply(n,arguments)}}function c(e,n,t){var r;for(var s in e)if(e[s]in n)return t===!1?e[s]:(r=n[e[s]],o(r,"function")?p(r,t||n):r);return!1}function d(e){return e.replace(/([A-Z])/g,function(e,n){return"-"+n.toLowerCase()}).replace(/^ms-/,"-ms-")}function m(n,o){var r=n.length;if("CSS"in e&&"supports"in e.CSS){for(;r--;)if(e.CSS.supports(d(n[r]),o))return!0;return!1}if("CSSSupportsRule"in e){for(var s=[];r--;)s.push("("+d(n[r])+":"+o+")");return s=s.join(" or "),l("@supports ("+s+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return t}function h(e,n,r,s){function a(){p&&(delete k.style,delete k.modElem)}if(s=o(s,"undefined")?!1:s,!o(r,"undefined")){var l=m(e,r);if(!o(l,"undefined"))return l}for(var p,c,d,h,v,y=["modernizr","tspan","samp"];!k.style&&y.length;)p=!0,k.modElem=i(y.shift()),k.style=k.modElem.style;for(d=e.length,c=0;d>c;c++)if(h=e[c],v=k.style[h],u(h,"-")&&(h=f(h)),k.style[h]!==t){if(s||o(r,"undefined"))return a(),"pfx"==n?h:!0;try{k.style[h]=r}catch(g){}if(k.style[h]!=v)return a(),"pfx"==n?h:!0}return a(),!1}function v(e,n,t,r,s){var i=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+j.join(i+" ")+i).split(" ");return o(n,"string")||o(n,"undefined")?h(a,n,r,s):(a=(e+" "+E.join(i+" ")+i).split(" "),c(a,n,t))}function y(e,n,o){return v(e,t,t,n,o)}var g=[],C=[],S={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){C.push({name:e,fn:n,options:t})},addAsyncTest:function(e){C.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=S,Modernizr=new Modernizr;var w=n.documentElement,x="svg"===w.nodeName.toLowerCase(),_=S._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];S._prefixes=_;var b="CSS"in e&&"supports"in e.CSS,T="supportsCSS"in e;Modernizr.addTest("supports",b||T);var z=S.testStyles=l;Modernizr.addTest("touchevents",function(){var t;if("ontouchstart"in e||e.DocumentTouch&&n instanceof DocumentTouch)t=!0;else{var o=["@media (",_.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");z(o,function(e){t=9===e.offsetTop})}return t});var P="Moz O ms Webkit",j=S._config.usePrefixes?P.split(" "):[];S._cssomPrefixes=j;var E=S._config.usePrefixes?P.toLowerCase().split(" "):[];S._domPrefixes=E;var N={elem:i("modernizr")};Modernizr._q.push(function(){delete N.elem});var k={style:N.elem.style};Modernizr._q.unshift(function(){delete k.style}),S.testAllProps=v,S.testAllProps=y,Modernizr.addTest("cssfilters",function(){if(Modernizr.supports)return y("filter","blur(2px)");var e=i("a");return e.style.cssText=_.join("filter:blur(2px); "),!!e.style.length&&(n.documentMode===t||n.documentMode>9)}),r(),s(g),delete S.addTest,delete S.addAsyncTest;for(var A=0;A<Modernizr._q.length;A++)Modernizr._q[A]();e.Modernizr=Modernizr}(window,document);
    </script>
<script type="text/javascript">
    var App = {
        startTime: (new Date()).getTime(),
        pageGenerationDate: 1507791299000
    };

    App.user = {
                    id: 557391,
            age: '',
            createdAt: '2012\x2D12\x2D15T23\x3A27\x3A04\x2B01\x3A00',
            gender: 'M',
            premiumType: 'Premium\x20Solo',
            locale: 'fr',
            language: 'fr',
            displayableName: 'Christian\x20Nzuzi',
            email: 'christian.nzuzi\x40gmail.com',
            country: '',
            phoneNumber: '',
            avatar: 'http\x3A\x2F\x2Fstatic.mediatropes.info\x2Fpmwiki\x2Fpub\x2Fimages\x2FStrider\x2520Hiryu6505.jpg',
            isPremium: true
            };

    App.preferences = {
        debug: false,
        assetVersion: '402e86c',
        contactMail: 'hello\x40openclassrooms.com',
        adyenPublicKey: '10001\x7C889EBFD4D434B82683E21DCA26E77C3E20E0EE09A5ECE3830B0ED51F2FA721A2F7E9EC871C6AB9A1E12C4492F4717673047757E02C5256D8E265CD51E413E5EFCCFEAC41B39C662A424ADC13EE187C38C372A7FCCEC1EA5DF841989437D78B252A8EB51008E60BB55B1E55A7A80DE1A9D60D998C128A576BFAE1DDB97D514AF0A073AEDDE84CEE40D1F8F6ECE85D0FFA50C95C06DB274021C1371376C6EB16561FD65C5E2704B570A7504D617D0F3820F176A0609F6162BDF5890533289FDC3DA7DB03B50BB3BD60A613E1FF72060F22987627E8F1A29F0128A94EC4C8FF7CF6B7AB9558D8433BF86D7A388AB927641CD6C02689139CEE3AAC9ACBFFE83806CB',
        cdnImage: true,
        layer: {
            appId: 'layer\x3A\x2F\x2F\x2Fapps\x2Fstaging\x2F7757c53a\x2Db2ba\x2D11e5\x2Db2a6\x2D2584730b1501',
            identityProviderUrl: '\x2Fajax\x2Fconversations\x2Fget\x2Didentity\x2Dtoken'
        },
        algolia: {
            appId: 'JGRXRFVQM0',
            apiKey: 'dfbdea500cb0b5f46e449ad334916c44',
            indexName: 'prod_v2_COURSES_fr'
        },
        routes: {
            COURSE_EVENT: '/components/courses/:courseId',
            COURSE_PART_EVENT: '/components/courses/:courseId/parts/:partId',

            ACCEPT_COOKIE: '\x2Fcomponents\x2Fuser\x2Daccept\x2Dconsent\x2Dcookie'
        },

                    };

    App.preferences.navigationPreference = {
                                };

    App.preferences.modules = {
        'smiley': {
            basePath: '/bundles/common/images/smiley/'
        }
    };

    App.notifications = {};
    App.scripts = [];
</script>
<script>    
    App.preferences.modules['course/view/internalFolding'] = {
        isBigCourse: true
    };

    App.data = App.data || {};
App.data.currentCourse = {"partId":1973090,"partTitle":"Triggers","partSlug":"triggers","courseId":1959476,"courseTitle":"Administrez vos bases de donn\u00e9es avec MySQL","courseSlug":"administrez-vos-bases-de-donnees-avec-mysql","courseLanguage":"fr","isIntroduction":false,"isCertifying":true};
App.preferences.modules['view/currentCoursePage'] = App.data.currentCourse;

</script>
<meta property="og:locale" content="fr">
<meta property="og:type" content="website">
<meta property="og:title" content="Triggers @OpenClassrooms">
<meta property="og:url" content="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers">
<meta property="og:site_name" content="OpenClassrooms">
<meta property="og:image" content="https://static.oc-static.com/prod/courses/illustrations/illu_administrez-vos-bases-de-donnees-avec-mysql.png">
<meta property="og:description" content="MySQL est un système de gestion de base de données (SGBD). Son rôle est d&#39;enregistrer des informations dans de gigantesques tableaux (les tables) que l&#39;on relie entre elles. On y communique en langage SQL, un langage qu&#39;il est recommandé de connaître aujourd&#39;hui.">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@OpenClassrooms">
<meta name="twitter:title" content="Triggers @OpenClassrooms">
<meta name="twitter:description" content="">
<script async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/satismeter.js.téléchargement"></script><style type="text/css">.fancybox-margin{margin-right:17px;}</style><style type="text/css">.at-icon{fill:#fff;border:0}.at-icon-wrapper{display:inline-block;overflow:hidden}a .at-icon-wrapper{cursor:pointer}.at-rounded,.at-rounded-element .at-icon-wrapper{border-radius:12%}.at-circular,.at-circular-element .at-icon-wrapper{border-radius:50%}.addthis_32x32_style .at-icon{width:2pc;height:2pc}.addthis_24x24_style .at-icon{width:24px;height:24px}.addthis_20x20_style .at-icon{width:20px;height:20px}.addthis_16x16_style .at-icon{width:1pc;height:1pc}#at16lb{display:none;position:absolute;top:0;left:0;width:100%;height:100%;z-index:1001;background-color:#000;opacity:.001}#at_complete,#at_error,#at_share,#at_success{position:static!important}.at15dn{display:none}#at15s,#at16p,#at16p form input,#at16p label,#at16p textarea,#at_share .at_item{font-family:arial,helvetica,tahoma,verdana,sans-serif!important;font-size:9pt!important;outline-style:none;outline-width:0;line-height:1em}* html #at15s.mmborder{position:absolute!important}#at15s.mmborder{position:fixed!important;width:250px!important}#at15s{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABtJREFUeNpiZGBgaGAgAjAxEAlGFVJHIUCAAQDcngCUgqGMqwAAAABJRU5ErkJggg==);float:none;line-height:1em;margin:0;overflow:visible;padding:5px;text-align:left;position:absolute}#at15s a,#at15s span{outline:0;direction:ltr;text-transform:none}#at15s .at-label{margin-left:5px}#at15s .at-icon-wrapper{width:1pc;height:1pc;vertical-align:middle}#at15s .at-icon{width:1pc;height:1pc}.at4-icon{display:inline-block;background-repeat:no-repeat;background-position:top left;margin:0;overflow:hidden;cursor:pointer}.addthis_16x16_style .at4-icon,.addthis_default_style .at4-icon,.at4-icon,.at-16x16{width:1pc;height:1pc;line-height:1pc;background-size:1pc!important}.addthis_32x32_style .at4-icon,.at-32x32{width:2pc;height:2pc;line-height:2pc;background-size:2pc!important}.addthis_24x24_style .at4-icon,.at-24x24{width:24px;height:24px;line-height:24px;background-size:24px!important}.addthis_20x20_style .at4-icon,.at-20x20{width:20px;height:20px;line-height:20px;background-size:20px!important}.at4-icon.circular,.circular .at4-icon,.circular.aticon{border-radius:50%}.at4-icon.rounded,.rounded .at4-icon{border-radius:4px}.at4-icon-left{float:left}#at15s .at4-icon{text-indent:20px;padding:0;overflow:visible;white-space:nowrap;background-size:1pc;width:1pc;height:1pc;background-position:top left;display:inline-block;line-height:1pc}.addthis_vertical_style .at4-icon,.at4-follow-container .at4-icon{margin-right:5px}html>body #at15s{width:250px!important}#at15s.atm{background:none!important;padding:0!important;width:10pc!important}#at15s_inner{background:#fff;border:1px solid #fff;margin:0}#at15s_head{position:relative;background:#f2f2f2;padding:4px;cursor:default;border-bottom:1px solid #e5e5e5}.at15s_head_success{background:#cafd99!important;border-bottom:1px solid #a9d582!important}.at15s_head_success a,.at15s_head_success span{color:#000!important;text-decoration:none}#at15s_brand,#at15sptx,#at16_brand{position:absolute}#at15s_brand{top:4px;right:4px}.at15s_brandx{right:20px!important}a#at15sptx{top:4px;right:4px;text-decoration:none;color:#4c4c4c;font-weight:700}#at15sptx:hover{text-decoration:underline}#at16_brand{top:5px;right:30px;cursor:default}#at_hover{padding:4px}#at_hover .at_item,#at_share .at_item{background:#fff!important;float:left!important;color:#4c4c4c!important}#at_share .at_item .at-icon-wrapper{margin-right:5px}#at_hover .at_bold{font-weight:700;color:#000!important}#at_hover .at_item{width:7pc!important;padding:2px 3px!important;margin:1px;text-decoration:none!important}#at_hover .at_item.athov,#at_hover .at_item:focus,#at_hover .at_item:hover{margin:0!important}#at_hover .at_item.athov,#at_hover .at_item:focus,#at_hover .at_item:hover,#at_share .at_item.athov,#at_share .at_item:hover{background:#f2f2f2!important;border:1px solid #e5e5e5;color:#000!important;text-decoration:none}.ipad #at_hover .at_item:focus{background:#fff!important;border:1px solid #fff}.at15t{display:block!important;height:1pc!important;line-height:1pc!important;padding-left:20px!important;background-position:0 0;text-align:left}.addthis_button,.at15t{cursor:pointer}.addthis_toolbox a.at300b,.addthis_toolbox a.at300m{width:auto}.addthis_toolbox a{margin-bottom:5px;line-height:initial}.addthis_toolbox.addthis_vertical_style{width:200px}.addthis_button_facebook_like .fb_iframe_widget{line-height:100%}.addthis_button_facebook_like iframe.fb_iframe_widget_lift{max-width:none}.addthis_toolbox a.addthis_button_counter,.addthis_toolbox a.addthis_button_facebook_like,.addthis_toolbox a.addthis_button_facebook_send,.addthis_toolbox a.addthis_button_facebook_share,.addthis_toolbox a.addthis_button_foursquare,.addthis_toolbox a.addthis_button_google_plusone,.addthis_toolbox a.addthis_button_linkedin_counter,.addthis_toolbox a.addthis_button_pinterest_pinit,.addthis_toolbox a.addthis_button_stumbleupon_badge,.addthis_toolbox a.addthis_button_tweet{display:inline-block}.at-share-tbx-element .google_plusone_iframe_widget>span>div{vertical-align:top!important}.addthis_toolbox span.addthis_follow_label{display:none}.addthis_toolbox.addthis_vertical_style span.addthis_follow_label{display:block;white-space:nowrap}.addthis_toolbox.addthis_vertical_style a{display:block}.addthis_toolbox.addthis_vertical_style.addthis_32x32_style a{line-height:2pc;height:2pc}.addthis_toolbox.addthis_vertical_style .at300bs{margin-right:4px;float:left}.addthis_toolbox.addthis_20x20_style span{line-height:20px}.addthis_toolbox.addthis_32x32_style span{line-height:2pc}.addthis_toolbox.addthis_pill_combo_style .addthis_button_compact .at15t_compact,.addthis_toolbox.addthis_pill_combo_style a{float:left}.addthis_toolbox.addthis_pill_combo_style a.addthis_button_tweet{margin-top:-2px}.addthis_toolbox.addthis_pill_combo_style .addthis_button_compact .at15t_compact{margin-right:4px}.addthis_default_style .addthis_separator{margin:0 5px;display:inline}div.atclear{clear:both}.addthis_default_style .addthis_separator,.addthis_default_style .at4-icon,.addthis_default_style .at300b,.addthis_default_style .at300bo,.addthis_default_style .at300bs,.addthis_default_style .at300m{float:left}.at300b img,.at300bo img{border:0}a.at300b .at4-icon,a.at300m .at4-icon{display:block}.addthis_default_style .at300b,.addthis_default_style .at300bo,.addthis_default_style .at300m{padding:0 2px}.at300b,.at300bo,.at300bs,.at300m{cursor:pointer}.addthis_button_facebook_like.at300b:hover,.addthis_button_facebook_like.at300bs:hover,.addthis_button_facebook_send.at300b:hover,.addthis_button_facebook_send.at300bs:hover{opacity:1}.addthis_20x20_style .at15t,.addthis_20x20_style .at300bs{overflow:hidden;display:block;height:20px!important;width:20px!important;line-height:20px!important}.addthis_32x32_style .at15t,.addthis_32x32_style .at300bs{overflow:hidden;display:block;height:2pc!important;width:2pc!important;line-height:2pc!important}.at300bs{overflow:hidden;display:block;background-position:0 0;height:1pc;width:1pc;line-height:1pc!important}.addthis_default_style .at15t_compact,.addthis_default_style .at15t_expanded{margin-right:4px}#at_share .at_item{width:123px!important;padding:4px;margin-right:2px;border:1px solid #fff}#at16p{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABtJREFUeNpiZGBgaGAgAjAxEAlGFVJHIUCAAQDcngCUgqGMqwAAAABJRU5ErkJggg==);z-index:10000001;position:absolute;top:50%;left:50%;width:300px;padding:10px;margin:0 auto;margin-top:-185px;margin-left:-155px;font-family:arial,helvetica,tahoma,verdana,sans-serif;font-size:9pt;color:#5e5e5e}#at_share{margin:0;padding:0}#at16pt{position:relative;background:#f2f2f2;height:13px;padding:5px 10px}#at16pt a,#at16pt h4{font-weight:700}#at16pt h4{display:inline;margin:0;padding:0;font-size:9pt;color:#4c4c4c;cursor:default}#at16pt a{position:absolute;top:5px;right:10px;color:#4c4c4c;text-decoration:none;padding:2px}#at15sptx:focus,#at16pt a:focus{outline:thin dotted}#at15s #at16pf a{top:1px}#_atssh{width:1px!important;height:1px!important;border:0!important}.atm{width:10pc!important;padding:0;margin:0;line-height:9pt;letter-spacing:normal;font-family:arial,helvetica,tahoma,verdana,sans-serif;font-size:9pt;color:#444;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABtJREFUeNpiZGBgaGAgAjAxEAlGFVJHIUCAAQDcngCUgqGMqwAAAABJRU5ErkJggg==);padding:4px}.atm-f{text-align:right;border-top:1px solid #ddd;padding:5px 8px}.atm-i{background:#fff;border:1px solid #d5d6d6;padding:0;margin:0;box-shadow:1px 1px 5px rgba(0,0,0,.15)}.atm-s{margin:0!important;padding:0!important}.atm-s a:focus{border:transparent;outline:0;transition:none}#at_hover.atm-s a,.atm-s a{display:block;text-decoration:none;padding:4px 10px;color:#235dab!important;font-weight:400;font-style:normal;transition:none}#at_hover.atm-s .at_bold{color:#235dab!important}#at_hover.atm-s a:hover,.atm-s a:hover{background:#2095f0;text-decoration:none;color:#fff!important}#at_hover.atm-s .at_bold{font-weight:700}#at_hover.atm-s a:hover .at_bold{color:#fff!important}.atm-s a .at-label{vertical-align:middle;margin-left:5px;direction:ltr}.at_PinItButton{display:block;width:40px;height:20px;padding:0;margin:0;background-image:url(//s7.addthis.com/static/t00/pinit00.png);background-repeat:no-repeat}.at_PinItButton:hover{background-position:0 -20px}.addthis_toolbox .addthis_button_pinterest_pinit{position:relative}.at-share-tbx-element .fb_iframe_widget span{vertical-align:baseline!important}#at16pf{height:auto;text-align:right;padding:4px 8px}.at-privacy-info{position:absolute;left:7px;bottom:7px;cursor:pointer;text-decoration:none;font-family:helvetica,arial,sans-serif;font-size:10px;line-height:9pt;letter-spacing:.2px;color:#666}.at-privacy-info:hover{color:#000}.body .wsb-social-share .wsb-social-share-button-vert{padding-top:0;padding-bottom:0}.body .wsb-social-share.addthis_counter_style .addthis_button_tweet.wsb-social-share-button{padding-top:40px}.body .wsb-social-share.addthis_counter_style .addthis_button_google_plusone.wsb-social-share-button{padding-top:0}.body .wsb-social-share.addthis_counter_style .addthis_button_facebook_like.wsb-social-share-button{padding-top:21px}@media print{#at4-follow,#at4-share,#at4-thankyou,#at4-whatsnext,#at4m-mobile,#at15s,.at4,.at4-recommended{display:none!important}}@media screen and (max-width:400px){.at4win{width:100%}}@media screen and (max-height:700px) and (max-width:400px){.at4-thankyou-inner .at4-recommended-container{height:122px;overflow:hidden}.at4-thankyou-inner .at4-recommended .at4-recommended-item:first-child{border-bottom:1px solid #c5c5c5}}</style><style type="text/css">.at-branding-logo{font-family:helvetica,arial,sans-serif;text-decoration:none;font-size:10px;display:inline-block;margin:2px 0;letter-spacing:.2px}.at-branding-logo .at-branding-icon{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAMAAAC67D+PAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF////+GlNUkcc1QAAAB1JREFUeNpiYIQDBjQmAwMmkwEM0JnY1WIxFyDAABGeAFEudiZsAAAAAElFTkSuQmCC")}.at-branding-logo .at-branding-icon,.at-branding-logo .at-privacy-icon{display:inline-block;height:10px;width:10px;margin-left:4px;margin-right:3px;margin-bottom:-1px;background-repeat:no-repeat}.at-branding-logo .at-privacy-icon{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAKCAMAAABR24SMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABhQTFRF8fr9ot/xXcfn2/P5AKva////////AKTWodjhjAAAAAd0Uk5T////////ABpLA0YAAAA6SURBVHjaJMzBDQAwCAJAQaj7b9xifV0kUKJ9ciWxlzWEWI5gMF65KUTv0VKkjVeTerqE/x7+9BVgAEXbAWI8QDcfAAAAAElFTkSuQmCC")}.at-branding-logo span{text-decoration:none}.at-branding-logo .at-branding-addthis,.at-branding-logo .at-branding-powered-by{color:#666}.at-branding-logo .at-branding-addthis:hover{color:#333}.at-cv-with-image .at-branding-addthis,.at-cv-with-image .at-branding-addthis:hover{color:#fff}a.at-branding-logo:visited{color:initial}.at-branding-info{display:inline-block;padding:0 5px;color:#666;border:1px solid #666;border-radius:50%;font-size:10px;line-height:9pt;opacity:.7;transition:all .3s ease;text-decoration:none}.at-branding-info span{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.at-branding-info:before{content:'i';font-family:Times New Roman}.at-branding-info:hover{color:#0780df;border-color:#0780df}</style><style id="ace_editor.css">.ace_editor {position: relative;overflow: hidden;font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: '';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_text-input-ios {position: absolute !important;top: -100000px !important;left: -100000px !important;}
/*# sourceURL=ace/css/ace_editor.css */</style><style id="ace-tm">.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}
/*# sourceURL=ace/css/ace-tm */</style><style>    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }</style><script src="./Triggers - Administrez vos bases de données avec MySQL_files/theme-ace-openclassrooms.js.téléchargement"></script><script src="./Triggers - Administrez vos bases de données avec MySQL_files/mode-sql.js.téléchargement"></script><style type="text/css"></style><script type="text/javascript" charset="utf-8" async="" src="./Triggers - Administrez vos bases de données avec MySQL_files/layers.7b07cf1723ea32c141ba.js.téléchargement"></script><style id="ace-openclassrooms">
.ace-openclassrooms .ace_gutter {
    background: #272822;
    color: #8F908A
}
.ace-openclassrooms .ace_print-margin {
    width: 1px;
    background: #555651
}
.ace-openclassrooms {
    background-color: #272822;
    color: #F8F8F2
}
.ace-openclassrooms .ace_cursor {
    color: #F8F8F0
}
.ace-openclassrooms .ace_marker-layer .ace_selection {
    background: #49483E
}
.ace-openclassrooms.ace_multiselect .ace_selection.ace_start {
    box-shadow: 0 0 3px 0px #272822
}
.ace-openclassrooms .ace_marker-layer .ace_step {
    background: rgb(102, 82, 0)
}
.ace-openclassrooms .ace_marker-layer .ace_bracket {
    margin: -1px 0 0 -1px;
    border: 1px solid #49483E
}
.ace-openclassrooms .ace_marker-layer .ace_active-line {
    background: #202020
}
.ace-openclassrooms .ace_gutter-active-line {
    background-color: #272822
}
.ace-openclassrooms .ace_marker-layer .ace_selected-word {
    border: 1px solid #49483E
}
.ace-openclassrooms .ace_invisible {
    color: #52524d
}
.ace-openclassrooms .ace_entity.ace_name.ace_tag,
.ace-openclassrooms .ace_keyword,
.ace-openclassrooms .ace_meta.ace_tag,
.ace-openclassrooms .ace_storage {
    color: #FE4481
}
.ace-openclassrooms .ace_punctuation,
.ace-openclassrooms .ace_punctuation.ace_tag {
    color: #fff
}
.ace-openclassrooms .ace_constant.ace_character,
.ace-openclassrooms .ace_constant.ace_language,
.ace-openclassrooms .ace_constant.ace_numeric,
.ace-openclassrooms .ace_constant.ace_other {
    color: #AE81FF
}
.ace-openclassrooms .ace_invalid {
    color: #F8F8F0;
    background-color: #FE4481
}
.ace-openclassrooms .ace_invalid.ace_deprecated {
    color: #F8F8F0;
    background-color: #AE81FF
}
.ace-openclassrooms .ace_support.ace_constant,
.ace-openclassrooms .ace_support.ace_function {
    color: #66D9EF
}
.ace-openclassrooms .ace_fold {
    background-color: #A6E22E;
    border-color: #F8F8F2
}
.ace-openclassrooms .ace_storage.ace_type,
.ace-openclassrooms .ace_support.ace_class,
.ace-openclassrooms .ace_support.ace_type {
    font-style: italic;
    color: #66D9EF
}
.ace-openclassrooms .ace_entity.ace_name.ace_function,
.ace-openclassrooms .ace_entity.ace_other,
.ace-openclassrooms .ace_entity.ace_other.ace_attribute-name,
.ace-openclassrooms .ace_variable {
    color: #A6E22E
}
.ace-openclassrooms .ace_variable.ace_parameter {
    font-style: italic;
    color: #FD971F
}
.ace-openclassrooms .ace_string {
    color: #E6DB74
}
.ace-openclassrooms .ace_comment {
    color: #918E7B
}
.ace-openclassrooms .ace_indent-guide {
    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y
}
    
/*# sourceURL=ace/css/ace-openclassrooms */</style><style>.ace_static_highlight {font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', 'Droid Sans Mono', monospace;font-size: 12px;white-space: pre-wrap}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line { position: relative; }.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}
.ace-openclassrooms .ace_gutter {
    background: #272822;
    color: #8F908A
}
.ace-openclassrooms .ace_print-margin {
    width: 1px;
    background: #555651
}
.ace-openclassrooms {
    background-color: #272822;
    color: #F8F8F2
}
.ace-openclassrooms .ace_cursor {
    color: #F8F8F0
}
.ace-openclassrooms .ace_marker-layer .ace_selection {
    background: #49483E
}
.ace-openclassrooms.ace_multiselect .ace_selection.ace_start {
    box-shadow: 0 0 3px 0px #272822
}
.ace-openclassrooms .ace_marker-layer .ace_step {
    background: rgb(102, 82, 0)
}
.ace-openclassrooms .ace_marker-layer .ace_bracket {
    margin: -1px 0 0 -1px;
    border: 1px solid #49483E
}
.ace-openclassrooms .ace_marker-layer .ace_active-line {
    background: #202020
}
.ace-openclassrooms .ace_gutter-active-line {
    background-color: #272822
}
.ace-openclassrooms .ace_marker-layer .ace_selected-word {
    border: 1px solid #49483E
}
.ace-openclassrooms .ace_invisible {
    color: #52524d
}
.ace-openclassrooms .ace_entity.ace_name.ace_tag,
.ace-openclassrooms .ace_keyword,
.ace-openclassrooms .ace_meta.ace_tag,
.ace-openclassrooms .ace_storage {
    color: #FE4481
}
.ace-openclassrooms .ace_punctuation,
.ace-openclassrooms .ace_punctuation.ace_tag {
    color: #fff
}
.ace-openclassrooms .ace_constant.ace_character,
.ace-openclassrooms .ace_constant.ace_language,
.ace-openclassrooms .ace_constant.ace_numeric,
.ace-openclassrooms .ace_constant.ace_other {
    color: #AE81FF
}
.ace-openclassrooms .ace_invalid {
    color: #F8F8F0;
    background-color: #FE4481
}
.ace-openclassrooms .ace_invalid.ace_deprecated {
    color: #F8F8F0;
    background-color: #AE81FF
}
.ace-openclassrooms .ace_support.ace_constant,
.ace-openclassrooms .ace_support.ace_function {
    color: #66D9EF
}
.ace-openclassrooms .ace_fold {
    background-color: #A6E22E;
    border-color: #F8F8F2
}
.ace-openclassrooms .ace_storage.ace_type,
.ace-openclassrooms .ace_support.ace_class,
.ace-openclassrooms .ace_support.ace_type {
    font-style: italic;
    color: #66D9EF
}
.ace-openclassrooms .ace_entity.ace_name.ace_function,
.ace-openclassrooms .ace_entity.ace_other,
.ace-openclassrooms .ace_entity.ace_other.ace_attribute-name,
.ace-openclassrooms .ace_variable {
    color: #A6E22E
}
.ace-openclassrooms .ace_variable.ace_parameter {
    font-style: italic;
    color: #FD971F
}
.ace-openclassrooms .ace_string {
    color: #E6DB74
}
.ace-openclassrooms .ace_comment {
    color: #918E7B
}
.ace-openclassrooms .ace_indent-guide {
    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y
}
    </style><style type="text/css">.nps-Survey{color:#333;font-family:sans-serif;font-weight:normal;font-size:14px;line-height:1.42857143;width:initial;margin:initial;padding:initial;background-color:initial;border-radius:initial}.nps-Survey *{width:initial;margin:initial;padding:initial;background-color:initial;border-radius:initial}.nps-Survey .nps-Survey-buttons{float:right;margin-top:14px}.nps-Survey .nps-Survey-bounding{position:relative;overflow:hidden}.nps-Survey .nps-Survey-content{position:relative;top:0}.nps-fade{opacity:1;-webkit-transition:opacity 500ms;transition:opacity 500ms}.nps-fade-enter,.nps-fade-leave{opacity:0}.nps-slide-enter,.nps-slide-leave{bottom:-600px !important}.nps-next{-webkit-transition:height 500ms;transition:height 500ms}.nps-next>div{-webkit-transition:top 500ms;transition:top 500ms}.nps-next>div>div{-webkit-transition:opacity 500ms;transition:opacity 500ms}.nps-expand{max-height:800px;overflow:hidden;-webkit-transition:max-height 500ms, opacity 500ms;transition:max-height 500ms, opacity 500ms}.nps-expand-enter,.nps-expand-leave{max-height:0px;opacity:0}.nps-Survey .nps-Bar{position:fixed;bottom:0;left:0;right:0;text-align:center;-webkit-transition:bottom 500ms;transition:bottom 500ms;z-index:2147483647;padding:0 20px;max-height:100vh;overflow:auto}.nps-Survey.nps-embed .nps-Bar{position:absolute;max-height:100%}.nps-Survey .nps-Bar .nps-PoweredBy{position:absolute;bottom:10px;right:20px}.nps-Survey.nps-embed .nps-Bar .nps-PoweredBy{display:none}@media (max-width: 900px){.nps-Survey .nps-Bar .nps-PoweredBy{display:none}}.nps-Survey .nps-Bar .nps-Scale{margin-left:auto;margin-right:auto}.nps-Survey .nps-Bar .nps-Survey-bounding{max-width:600px;margin:20px auto}.nps-Survey .nps-Bar .nps-Title{font-size:14px}.nps-Survey .nps-Dialog{background-color:white;border-width:2px;border-style:solid;margin:auto;padding:20px;position:fixed;width:417px;z-index:2147483647;-webkit-transition:all 500ms;transition:all 500ms;box-sizing:border-box}.nps-Survey.nps-embed .nps-Dialog{position:absolute}.nps-Survey .nps-Dialog--top{top:20px}.nps-Survey .nps-Dialog--middle{top:50%;-webkit-transform:translate(0, -50%);transform:translate(0, -50%)}.nps-Survey .nps-Dialog--bottom{bottom:20px}.nps-Survey .nps-Dialog--left{-webkit-transition:left 500ms;transition:left 500ms;left:20px}.nps-Survey .nps-Dialog--left.nps-show-enter,.nps-Survey .nps-Dialog--left.nps-show-leave{left:-500px}.nps-Survey .nps-Dialog--center{left:0;right:0}.nps-Survey .nps-Dialog--center.nps-Dialog--top.nps-show-enter,.nps-Survey .nps-Dialog--center.nps-Dialog--top.nps-show-leave{top:-500px}.nps-Survey .nps-Dialog--center.nps-Dialog--middle{-webkit-transform:translate(0, -50%) scale(1);transform:translate(0, -50%) scale(1)}.nps-Survey .nps-Dialog--center.nps-Dialog--middle.nps-show-enter,.nps-Survey .nps-Dialog--center.nps-Dialog--middle.nps-show-leave{-webkit-transform:translate(0, -50%) scale(0);transform:translate(0, -50%) scale(0)}.nps-Survey .nps-Dialog--center.nps-Dialog--bottom{bottom:20px}.nps-Survey .nps-Dialog--center.nps-Dialog--bottom.nps-show-enter,.nps-Survey .nps-Dialog--center.nps-Dialog--bottom.nps-show-leave{bottom:-500px}.nps-Survey .nps-Dialog--right{right:20px}.nps-Survey .nps-Dialog--right.nps-show-enter,.nps-Survey .nps-Dialog--right.nps-show-leave{right:-500px}.nps-Survey .nps-Dialog .nps-Title{margin-right:20px}.nps-Survey .nps-Dialog-close{float:right;font-weight:bold;padding:0;cursor:pointer;background:transparent;border:0;font-size:16px;width:30px;height:30px;color:white;position:absolute;right:0;top:0}.nps-Survey .nps-Dialog-close:focus{outline:0}.nps-Survey .nps-Dialog-FeedbackPoweredBy{position:absolute;bottom:0;line-height:30px;left:0}.nps-Survey .nps-Feedback{text-align:left}.nps-Survey .nps-Feedback-reason{margin-top:10px}.nps-Survey .nps-Feedback-reason label{display:block;font-weight:normal}.nps-Survey .nps-Feedback-reason input{margin-right:8px;margin-left:4px;position:relative;top:-2px}.nps-Survey .nps-Feedback-submit{float:right}.nps-Survey .nps-Feedback-question{margin:20px 0}.nps-Survey .nps-Feedback-question:first-child{margin-top:0}.nps-Survey .nps-Feedback-question:last-child{margin-bottom:0}.nps-Survey .nps-Panel{border-width:2px;border-style:solid;background-color:white}.nps-Survey .nps-Panel{font-size:16px;color:#333;max-width:600px;min-width:375px;margin:20px auto;padding:20px}@media (max-width: 480px){.nps-Survey .nps-Panel{border-width:0;min-width:initial;font-size:14px;box-shadow:none}}.nps-Survey .nps-Panel .nps-Survey--powered-by{line-height:38px}.nps-Survey .nps-Panel .nps-Title{font-size:18px}.nps-Survey .nps-Panel .nps-Rating{margin-bottom:20px}.nps-Survey .nps-PoweredBy{font-size:12px;margin-top:20px}.nps-Survey .nps-PoweredBy>a{text-decoration:none;font-weight:bold}.nps-Survey .nps-Title{font-size:16px}.nps-Survey .nps-cf:before,.nps-Survey .nps-cf:after{content:" ";display:table}.nps-Survey .nps-cf:after{clear:both}.nps-Survey .nps-left{text-align:left}.nps-Survey .nps-center{text-align:center}.nps-Survey .nps-margin-t20{margin-top:20px}.nps-Button{display:inline-block;zoom:1;line-height:normal;white-space:nowrap;vertical-align:baseline;text-align:center;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;font-size:100%;padding:0.5em 1em;text-decoration:none;border:0}.nps-Button::-moz-focus-inner{padding:0;border:0}.nps-Survey .nps-Button:focus{outline:0}.nps-Survey .nps-Button[disabled]{border:none;background-image:none;opacity:0.40;cursor:default;box-shadow:none}.nps-Survey .nps-Button--simple{border:0;cursor:pointer;padding:10px}.nps-Survey .nps-Button--icon{width:30px;height:30px;padding:0}.nps-Survey .nps-Button--simple:focus,.nps-Button--simple:hover{outline:none}.nps-Survey .nps-Link{padding:0.5em 1em;text-decoration:none}.nps-Survey .nps-Textarea{height:80px;border-width:2px;border-style:solid;font-size:14px;padding:7px 10px;width:100%;resize:vertical;box-sizing:border-box;-webkit-transition:border-color 300ms, background-color 300ms;transition:border-color 300ms, background-color 300ms}.nps-Survey .nps-Textarea:focus{outline:0}.nps-Survey .nps-RadioList{margin-top:10px}.nps-Survey .nps-RadioList-label{display:block;font-weight:normal}.nps-Survey .nps-RadioList-radio{margin-right:8px;margin-left:4px}.nps-Survey .nps-Scale{margin-top:14px;display:inline-block}.nps-Survey .nps-Scale-values{margin-bottom:4px;text-align:center}.nps-Survey .nps-Scale-value{display:inline-block;padding-right:2px;vertical-align:middle;line-height:1;font-size:1.5em}.nps-Survey .nps-Scale-value:last-of-type{padding-right:0}.nps-Survey .nps-Scale-value:hover{cursor:pointer}.nps-Survey .nps-Scale-button{border-radius:50%;width:32px;height:32px;text-align:center;line-height:32px;font-size:12px}@media (max-width: 480px){.nps-Survey .nps-Scale-button{width:22px;height:22px;line-height:22px}}.nps-Survey.nps-small .nps-Scale-button{width:22px;height:22px;line-height:22px}.nps-Survey .nps-Scale-hint{font-size:12px;font-style:italic}.nps-Survey .nps-Scale-hint--unlikely{float:left;padding-right:10px}.nps-Survey .nps-Scale-hint--likely{float:right;padding-left:10px}.nps-Survey[dir="rtl"] .nps-Scale-hint--unlikely{float:right}.nps-Survey[dir="rtl"] .nps-Scale-hint--likely{float:left}</style><style type="text/css">.at-share-dock.atss{top:auto;left:0;right:0;bottom:0;width:100%;max-width:100%;z-index:1000200;box-shadow:0 0 1px 1px #e2dfe2}.at-share-dock.at-share-dock-zindex-hide{z-index:-1!important}.at-share-dock.atss-top{bottom:auto;top:0}.at-share-dock a{width:auto;transition:none;color:#fff;text-decoration:none;box-sizing:content-box;-webkit-box-sizing:content-box;-moz-box-sizing:content-box}.at-share-dock a:hover{width:auto}.at-share-dock .at4-count{height:43px;padding:5px 0 0;line-height:20px;background:#fff;font-family:Helvetica neue,arial}.at-share-dock .at4-count span{width:100%}.at-share-dock .at4-count .at4-share-label{color:#848484;font-size:10px;letter-spacing:1px}.at-share-dock .at4-count .at4-counter{top:2px;position:relative;display:block;color:#222;font-size:22px}.at-share-dock.at-shfs-medium .at4-count{height:36px;line-height:1pc;padding-top:4px}.at-share-dock.at-shfs-medium .at4-count .at4-counter{font-size:18px}.at-share-dock.at-shfs-medium .at-share-btn .at-icon-wrapper,.at-share-dock.at-shfs-medium a .at-icon-wrapper{padding:6px 0}.at-share-dock.at-shfs-small .at4-count{height:26px;line-height:1;padding-top:3px}.at-share-dock.at-shfs-small .at4-count .at4-share-label{font-size:8px}.at-share-dock.at-shfs-small .at4-count .at4-counter{font-size:14px}.at-share-dock.at-shfs-small .at-share-btn .at-icon-wrapper,.at-share-dock.at-shfs-small a .at-icon-wrapper{padding:4px 0}</style><style type="text/css">#at4m-mobile-container{z-index:9999999;position:fixed}#at4m-menu{transition-timing-function:linear}#at4-searchClear{cursor:pointer}#at4m-dock{position:fixed;left:0;width:100%;-o-box-shadow:0 -1px 4px rgba(0,0,0,.15);box-shadow:0 -1px 4px rgba(0,0,0,.15);font-family:helvetica neue,helvetica,arial,sans-serif;font-size:14px;font-weight:300;color:#000}.at4m-dock{background:#ebebeb}.at4m-dock-bottom{top:auto;bottom:0}.at4m-dock-top{top:0;bottom:auto}.at4m-dock a:link,.at4m-dock a:visited{display:block;border:none;margin:0;padding:0;height:45px;line-height:45px;text-align:center;text-decoration:none;text-shadow:none;font-weight:700;color:#555;cursor:pointer;float:left;zoom:1}.at4m-dock a:active,.at4m-dock a:hover,.at4m-dock-toggle a:hover{background-color:#e2e2e2;color:#000;cursor:pointer}.at4m-dock a i{display:inline-block;height:45px;line-height:45px;vertical-align:middle;opacity:.2}.at4m-dock a:active i,.at4m-dock a:hover i{opacity:.9}.at4m-dock a i.at4m-dock-share{background:url(//s7.addthis.com/static/0cdf7a36b49e9150e4ddd7ce01143fdc.png) no-repeat 0 0;background-image:url(//s7.addthis.com/static/c4ee1ef2025cac1d2377de864e802791.svg),none;background-position:0 -2px;width:30px}.at4m-dock a i.at4m-dock-follow{background:url(//s7.addthis.com/static/34c65ab171688e81111b0c5219405376.png) no-repeat 0 0;background-image:url(//s7.addthis.com/static/2f9e800dffd36b9ae492670a4340386e.svg),none;background-position:0 -2px;width:26px}.at4m-dock.at4-ma1 a{display:inline-block;width:86%}.at4m-dock.at4-ma2 a{display:inline-block;width:43%}.at4m-dock.at4-ma2 a:first-child{border-right:1px solid #ccc}.at4m-dock-toggle{position:fixed;left:auto;right:0;width:14%;min-width:40px;height:45px}.at4m-dock-toggle-bottom{top:auto;bottom:0}.at4m-dock-toggle-top{bottom:auto;top:0}.at4m-dock-toggle a{display:block;background:url(//s7.addthis.com/static/6f026d41cd1a08a0f124517f4a4b6381.png) no-repeat center;background-image:url(//s7.addthis.com/static/6ac59ac63a78f7c0ecfe9bbc05ee16af.svg),none;border-left:1px solid #ccc;height:44px;line-height:44px;overflow:hidden;text-indent:-9999em;text-align:center;padding:0;margin:0;opacity:.35}.at4m-dock-toggle a.at4-dock-toggle-active{background:url(//s7.addthis.com/static/edb81de4c71c0bc5e7093002607fb828.png) no-repeat center;background-image:url(//s7.addthis.com/static/958b6ad449d91a582198eaaa1013e4a8.svg),none;background-color:#fff;border-top:1px solid #ccc}.at4m-dock-toggle.ats-dark,.at4m-dock.ats-dark{background:#262b30;border-color:#1b1b1b;color:#fff}.at4m-dock.ats-dark a{color:#f2f2f2}.at4m-dock.ats-dark a i{opacity:.25}.at4m-dock.at4-ma2.ats-dark a:first-child{border-right:1px solid #3e4247}.at4m-dock-toggle.ats-dark a:active,.at4m-dock-toggle.ats-dark a:hover,.at4m-dock.ats-dark a:active,.at4m-dock.ats-dark a:hover{background-color:#1b1e22}.at4m-dock.ats-dark a i.at4m-dock-share{background:url(//s7.addthis.com/static/969412d543656390654b7a1fbad5c052.png) no-repeat left center;background-image:url(//s7.addthis.com/static/d0b50381e6dff723034c9fb045fa5579.svg),none;background-position:0 -2px}.at4m-dock.ats-dark a i.at4m-dock-follow{background:url(//s7.addthis.com/static/031cd90bcb2cf1bc5d0514d6df32e08b.png) no-repeat left center;background-image:url(//s7.addthis.com/static/9b6c210d20bea1e6b56e800331c32bff.svg),none;background-position:0 -2px}.at4m-dock-toggle.ats-dark a{background:url(//s7.addthis.com/static/bd94d63e97308ccebb29a220dcc82c2c.png) no-repeat center;background-image:url(//s7.addthis.com/static/066d11a3dfa049803336eba1abb50292.svg),none;border-color:#676d73}.at4m-dock-toggle.ats-dark a.at4-dock-toggle-active{background:url(//s7.addthis.com/static/6ff05a92b143930d8fcc6a7d47a6859b.png) no-repeat center;background-image:url(//s7.addthis.com/static/fd9202254cfad377dad0ecc0eb38d503.svg),none}.at4m-dock-toggle.top,.at4m-dock.top{top:0;bottom:auto}.at4m-dock-toggle.top a{background:url(//s7.addthis.com/static/edb81de4c71c0bc5e7093002607fb828.png) no-repeat center;background-image:url(//s7.addthis.com/static/958b6ad449d91a582198eaaa1013e4a8.svg),none}.at4m-dock-toggle.top a.at4-dock-toggle-active{background:url(//s7.addthis.com/static/6f026d41cd1a08a0f124517f4a4b6381.png) no-repeat center;background-image:url(//s7.addthis.com/static/6ac59ac63a78f7c0ecfe9bbc05ee16af.svg),none}.at4m-dock-toggle.top.ats-dark a{background:url(//s7.addthis.com/static/6ff05a92b143930d8fcc6a7d47a6859b.png) no-repeat center;background-image:url(//s7.addthis.com/static/fd9202254cfad377dad0ecc0eb38d503.svg),none;border-color:#676d73}.at4m-dock-toggle.top.ats-dark a.at4-dock-toggle-active{background:url(//s7.addthis.com/static/bd94d63e97308ccebb29a220dcc82c2c.png) no-repeat center;background-image:url(//s7.addthis.com/static/066d11a3dfa049803336eba1abb50292.svg),none}.at4m-dock.ats-gray{border-top:1px solid #dbdbdb}.at4m-dock.ats-gray a:first-child{border-right:1px solid #dadada}.at4m-dock.ats-gray a{color:#444}.at4m-dock.ats-gray a i{opacity:.25}.at4m-dock-toggle.ats-gray a{border-color:#b2b2b2}.at4m-dock-toggle.ats-gray a.at4-dock-toggle-active{background-color:#e2e2e2;border-color:#b2b2b2}.at4m-dock-toggle.ats-light a:active,.at4m-dock-toggle.ats-light a:hover,.at4m-dock.ats-light a:active,.at4m-dock.ats-light a:hover{background-color:#f5f5f5}.at4m-dock-toggle.ats-light a.at4-dock-toggle,.at4m-dock-toggle.ats-light a.at4-dock-toggle-active{background-color:#fff;border-color:#dadada}.at4m-menu{position:fixed;background:#fff;top:0;left:0;right:0;bottom:0;font-family:helvetica neue,helvetica,arial,sans-serif;font-size:14px;font-weight:300;display:none;opacity:0}.at4m-menu.abs{position:absolute}.at4m-menu .at4m-menu-inner{position:relative;width:100%;height:100%;overflow:auto}.at4m-menu .at4m-menu-inner .at4m-menu-header{position:fixed;top:0;left:0;right:0;width:100%;background:#fff;-o-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1);font-family:helvetica neue,helvetica,arial,sans-serif;font-weight:700;color:#444;cursor:default}.at4m-menu .at4m-menu-inner .at4m-menu-header .at4m-menu-header-inner{position:relative;height:44px;text-align:left;line-height:44px;padding:0 44px 0 15px}.at4m-menu .at4m-menu-inner .at4m-menu-header .at4m-menu-header-inner a.at4m-menu-cancel{position:absolute;top:0;right:0;display:block;background:url(//s7.addthis.com/static/56b9cf44789a75f4822ae4677c0809f0.png) no-repeat center center;background-image:url(//s7.addthis.com/static/fc0122e3c71ae79db7be2a7ccfcd419c.svg),none;width:42px;height:44px;overflow:hidden;text-indent:-9999em;opacity:.74}#at4m-menu-body{top:45px;bottom:35px;left:0;overflow-y:scroll}#at4m-menu-body,#at4m-scroller{position:absolute;width:100%}.at4m-hidden-overflow{overflow:hidden}.at4m-scroll-overflow{overflow-y:auto!important}.at4m-menu .at4m-menu-inner .at4m-menu-search{position:relative;background:#f5f5f5;border-bottom:1px solid #e7e9ec;height:44px}.at4m-menu .at4m-menu-inner .at4m-menu-search input[type=text]{position:absolute;top:7px;left:13px;right:15px;width:auto;background:transparent;border:none;height:24px;line-height:1.14em;padding:4px 4px 4px 22px;font-size:1.14em;font-weight:300;outline:0;margin-bottom:0}.at4m-menu .at4m-menu-inner .at4m-menu-search input[type=submit]{position:absolute;top:11px;left:14px;width:1pc;height:1pc;background:url(//s7.addthis.com/static/3fc4b18bbb046f074de86a3cb5398353.svg),none;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1NDQxMjk0RDkzRjIxMUUyODgyNEMyRjRCOUU5QTdDNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1NDQxMjk0RTkzRjIxMUUyODgyNEMyRjRCOUU5QTdDNiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjU0NDEyOTRCOTNGMjExRTI4ODI0QzJGNEI5RTlBN0M2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU0NDEyOTRDOTNGMjExRTI4ODI0QzJGNEI5RTlBN0M2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+RlRfxAAAAOhJREFUeNrEU+0NgkAM5YwD4Aa6AUygTuAIwASck8hNAG7CBrKBjIAT4CvpkSb2/Ag/bNL0CH3vXj/OjOMYLbFVtNDW/mCMmWJVVVuEXOS01tpWgqRq4z+IAOALjla5qAFJoRHMJQCcM7iDHwEgSSkpIEVM/mKzAufcHSGG7wAeZBLAN4QEvqF/qgLYlqUOykVXjsmnKTwCzR6+GSMlZZAbK3kZx/4dgeMyak9CEV7jeKDmorw+2EQeYy12oFNqnsYZ3AMxzhNPxDdwL4ibsiyLIEHIhLoOBOnPb4E38UxLpvbgb6/xKcAAtbllO+gwy6kAAAAASUVORK5CYII=");background-repeat:no-repeat;background-position:0 0;background-position:center bottom\9;border:none;overflow:hidden;text-indent:-9999em;cursor:pointer;opacity:.22}.at4m-menu .at4m-menu-inner .at4m-menu-search input[type=cancel]{position:absolute;top:9pt;right:20px;width:18px;height:18px;background:url(//s7.addthis.com/static/f048274431eaef1b46f80d94f1c18af6.png) no-repeat center center;background-image:url(//s7.addthis.com/static/666b87d14e4d4e526b57292ab8adc465.svg),none;background-size:18px 18px;border:none;overflow:hidden;text-indent:-9999em;opacity:.14}.at4m-menu .at4m-menu-inner .at4m-menu-footer{position:fixed;bottom:0;left:0;right:0;width:100%;height:30px;background:#fff;text-align:left;line-height:1pc;-o-box-shadow:0 -2px 4px rgba(0,0,0,.1);box-shadow:0 -2px 4px rgba(0,0,0,.1)}.at4m-menu .at4m-menu-inner .at4m-menu-footer .at4m-menu-footer-inner{position:relative;height:26px;padding:5px 15px}.at4m-menu .at4m-menu-inner .at4m-menu-footer .at4m-menu-footer-inner .at4m-menu-footer-logo{background:url(//s7.addthis.com/static/5432e2206e5cb0b11874ad11e5a22186.png);background-image:url(//s7.addthis.com/static/f1a5a53cfb4afc0b8231b342c9e39ece.svg),none;background-repeat:no-repeat;background-position:left 2px;background-size:9px 9px;padding-left:9pt}.at4m-menu .at4m-menu-inner .at4m-menu-footer .at4m-menu-footer-inner .at4m-menu-footer-privacy{position:absolute;top:7px;right:15px;background:url(//s7.addthis.com/static/7450d2e11bef7d7c140b197429765a62.png);background-image:url(//s7.addthis.com/static/d714fde79b61d3f511dd5c11ad366e68.svg),none;background-repeat:no-repeat;background-position:right 3px;background-size:8px 9px;padding-right:13px}.at4m-menu .at4m-menu-inner .at4m-menu-footer .at4m-menu-footer-inner a:link,.at4m-menu .at4m-menu-inner .at4m-menu-footer .at4m-menu-footer-inner a:visited{font-size:.714em;text-decoration:none;color:#666}.at4m-menu.abs{border-top:.5px solid #efefef}.at4m-menu.abs,.at4m-menu.abs .at4m-menu-inner .at4m-menu-footer,.at4m-menu.abs .at4m-menu-inner .at4m-menu-header{position:absolute}.at4m-menu .at4m-menu-content{position:relative;padding:0 0 27px}.at4m-menu .at4m-menu-content ul{margin:0;padding:0}.at4m-menu .at4m-menu-content ul li{background:#fff;list-style:none;margin:0;padding:0;border-bottom:1px solid #e7e9ec;-ms-box-sizing:content-box;-o-box-sizing:content-box;box-sizing:content-box}.at4m-menu .at4m-menu-content ul li:hover{background:#f5f5f5}.at4m-menu .at4m-menu-content ul li a{position:relative;display:block;height:2pc;line-height:2pc;padding:9pt 20px 9pt 14px;text-decoration:none;text-align:left;font-family:helvetica neue,helvetica,arial,sans-serif;font-size:1.07em;font-weight:300;color:#444;-ms-box-sizing:content-box;-o-box-sizing:content-box;box-sizing:content-box}.at4m-menu .at4m-menu-content ul li a:active{background-color:#f9f9f9}.at4m-menu .at4m-menu-content ul li a span.at-icon-wrapper{margin:0 9px 0 0;float:left}.at4m-menu .at4m-menu-content ul li a span.at4-label{display:inline-block;height:2pc;line-height:2pc;margin-left:10px}.at4m-menu .at4m-menu-content ul li a span.at4-label.atservice-preferred{font-weight:700}.at4m-menu .at4m-menu-content ul li a span.at4-arrow{display:inline-block;position:absolute;right:5px;background:url(//s7.addthis.com/static/745bc30b589d20aeba08481e06fae159.png);background-image:url(//s7.addthis.com/static/f4d5547a72831e67681d82122e1d563f.svg),none;background-repeat:no-repeat;background-position:center center;width:2pc;height:2pc;text-indent:-9999em;overflow:hidden;opacity:.22}.at4m-menu.ats-dark .at4m-menu-footer,.at4m-menu.ats-dark .at4m-menu-header{background:#262b30;color:#fff}.at4m-menu.ats-dark .at4m-menu-inner .at4m-menu-header button{background:#000;border-color:#333;color:#fff}.at4m-menu.ats-dark .at4m-menu-inner .at4m-menu-header .at4m-menu-header-inner a.at4m-menu-cancel{background:url(//s7.addthis.com/static/5092b14c9020eaa68c3de74da2219940.png) no-repeat center center;background-image:url(//s7.addthis.com/static/fb08f6d50887bd0caacc86a62bcdcf68.svg),none}.at4m-menu.ats-dark .at4m-menu-inner .at4m-menu-footer .at4m-menu-footer-inner a:link,.at4m-menu.ats-dark .at4m-menu-inner .at4m-menu-footer .at4m-menu-footer-inner a:visited{color:#ccc}#at4m-dock:hover{cursor:pointer}#at4m-dock.ats-dark{background:#262b30;border-color:#1b1b1b;color:#fff}#at4m-dock.ats-light{background:#fff;border-color:#c5c5c5}.at4m-dock.ats-dark a,.at4m-dock.ats-dark a:first-child{color:#fff}.at4m-dock.ats-dark a:active,.at4m-dock.ats-dark a:hover{background:#1b1e22}.at-expandedmenu-component .at4m-dock,.at-expandedmenu-component .at4m-dock-toggle{display:none}</style><style type="text/css">#at4-drawer-outer-container{top:0;width:20pc;position:fixed}#at4-drawer-outer-container.at4-drawer-inline{position:relative}#at4-drawer-outer-container.at4-drawer-inline.at4-drawer-right{float:right;right:0;left:auto}#at4-drawer-outer-container.at4-drawer-inline.at4-drawer-left{float:left;left:0;right:auto}#at4-drawer-outer-container.at4-drawer-shown,#at4-drawer-outer-container.at4-drawer-shown *{z-index:999999}#at4-drawer-outer-container,#at4-drawer-outer-container .at4-drawer-outer,#at-drawer{height:100%;overflow-y:auto;overflow-x:hidden}.at4-drawer-push-content-right-back{position:relative;right:0}.at4-drawer-push-content-right{position:relative;left:20pc!important}.at4-drawer-push-content-left-back{position:relative;left:0}.at4-drawer-push-content-left{position:relative;right:20pc!important}#at4-drawer-outer-container.at4-drawer-right{left:auto;right:-20pc}#at4-drawer-outer-container.at4-drawer-left{right:auto;left:-20pc}#at4-drawer-outer-container.at4-drawer-shown.at4-drawer-right{left:auto;right:0}#at4-drawer-outer-container.at4-drawer-shown.at4-drawer-left{right:auto;left:0}#at-drawer{top:0;z-index:9999999;height:100%;-webkit-animation-duration:.4s;animation-duration:.4s}#at-drawer.drawer-push.at-right{right:-20pc}#at-drawer.drawer-push.at-left{left:-20pc}#at-drawer .at-recommended-label{padding:0 0 0 20px;color:#999;line-height:3pc;font-size:18px;font-weight:300;cursor:default}#at-drawer-arrow{width:30px;height:5pc}#at-drawer-arrow.ats-dark{background:#262b30}#at-drawer-arrow.ats-gray{background:#f2f2f2}#at-drawer-open-arrow{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAABcCAYAAAC1OT8uAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk3ODNCQjdERUQ3QjExRTM5NjFGRUZBODc3MTIwMTNCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk3ODNCQjdFRUQ3QjExRTM5NjFGRUZBODc3MTIwMTNCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTc4M0JCN0JFRDdCMTFFMzk2MUZFRkE4NzcxMjAxM0IiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTc4M0JCN0NFRDdCMTFFMzk2MUZFRkE4NzcxMjAxM0IiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7kstzCAAAB4ElEQVR42uyWv0oDQRDGb9dYimgVjliID2Ca9AGfwtZob2Grja1PIFj7EhGCYK99VPBPOkVMp8X5rc6FeN7dfjOksMjAxwXZ3667OzvfLKRr682l5ZV9aDh+fxsnRHhoDzqGLjFBi4XOoFtoAxowoB893o/w7WpAl/+QgQMBwwRdTPhUC2lAV/wDA7qy5WOgq9psHejqTqkKdLE7KYCv0JZjMgBgB58raBG6mP1K6j2pT099T+qMUOeeOss1wDcEIA1PnQXy576rAUI0oFMoC7VCnn40Gs8Pd4lAiXNUKmJ0lh1mPzGEWiyUCqAGW3Pwv4IvUJsFO9CHgP3Zr6Te0xwgAf3LxaAjS241pbikCRkOg+nSJdV4p8HOPl3vvRYI5dtrgVDvvcWovcWovcWovcWovcWovcWovQChWNywNpqvdAKtQp/QNmPUIQ6kwwqt2Xmsxf6GMPM1Pptsbz45CPmXqKb+15Gz4J/LZcDSNIqBlQlbB0afe1mmUDWiCNKFZRq0VKMeXY1CTDq2sJLWsCmoaBBRqNRR6qBKC6qCaj2rDIqaXBGiXHEaom00h1S+K3fVlr6HNuqgvgCh0+owt21bybQn8+mZ78mcEebcM2e5+T2ZX24ZqCph0qn1vgQYAJ/KDpLQr2tPAAAAAElFTkSuQmCC);background-repeat:no-repeat;width:13px;height:23px;margin:28px 0 0 8px}.at-left #at-drawer-open-arrow{background-position:0 -46px}.ats-dark #at-drawer-open-arrow{background-position:0 -23px}.ats-dark.at-left #at-drawer-open-arrow{background-position:0 -69px}#at-drawer-arrow.at4-drawer-modern-browsers{position:fixed;top:40%;background-repeat:no-repeat;background-position:0 0!important;z-index:9999999}.at4-drawer-inline #at-drawer-arrow{position:absolute}#at-drawer-arrow.at4-drawer-modern-browsers.at-right{right:0}#at-drawer-arrow.at4-drawer-modern-browsers.at-left{left:0}.at4-drawer-push-animation-left{transition:left .4s ease-in-out .15s}.at4-drawer-push-animation-right{transition:right .4s ease-in-out .15s}#at-drawer.drawer-push.at4-drawer-push-animation-right{right:0}#at-drawer.drawer-push.at4-drawer-push-animation-right-back{right:-20pc!important}#at-drawer.drawer-push.at4-drawer-push-animation-left{left:0}#at-drawer.drawer-push.at4-drawer-push-animation-left-back{left:-20pc!important}#at-drawer .at4-closebutton.drawer-close{content:'X';color:#999;display:block;position:absolute;margin:0;top:0;right:0;width:3pc;height:45px;line-height:45px;overflow:hidden;opacity:.5}#at-drawer.ats-dark .at4-closebutton.drawer-close{color:#fff}#at-drawer .at4-closebutton.drawer-close:hover{opacity:1}#at-drawer.ats-dark.at4-recommended .at4-logo-container a{color:#666}#at-drawer.at4-recommended .at4-recommended-vertical{padding:0}#at-drawer.at4-recommended .at4-recommended-item .sponsored-label{margin:2px 0 0 21px;color:#ddd}#at-drawer.at4-recommended .at4-recommended-vertical .at4-recommended-item{position:relative;padding:0;width:20pc;height:180px;margin:0}#at-drawer.at4-recommended .at4-recommended-vertical .at4-recommended-item .at4-recommended-item-img a:after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.65);z-index:1000000;transition:all .2s ease-in-out}#at-drawer.at4-recommended .at4-recommended-vertical .at4-recommended-item.at-hover .at4-recommended-item-img a:after{background:rgba(0,0,0,.8)}#at-drawer .at4-recommended-vertical .at4-recommended-item .at4-recommended-item-img,#at-drawer .at4-recommended-vertical .at4-recommended-item .at4-recommended-item-img a,#at-drawer .at4-recommended-vertical .at4-recommended-item .at4-recommended-item-img img{width:20pc;height:180px;float:none}#at-drawer .at4-recommended-vertical .at4-recommended-item .at4-recommended-item-caption{width:100%;position:absolute;bottom:0;left:0;height:70px}#at-drawer .at4-recommended-vertical .at4-recommended-item .at4-recommended-item-caption .at-h4{color:#fff;position:absolute;height:52px;top:0;left:20px;right:20px;margin:0;padding:0;line-height:25px;font-size:20px;font-weight:600;z-index:1000001;text-decoration:none;text-transform:none}#at-drawer.at4-recommended .at4-recommended-vertical .at4-recommended-item .at4-recommended-item-caption .at-h4 a:hover{text-decoration:none}#at-drawer.at4-recommended .at4-recommended-vertical .at4-recommended-item .at4-recommended-item-caption .at-h4 a:link{color:#fff}#at-drawer.at4-recommended .at4-recommended-vertical .at4-recommended-item .at4-recommended-item-caption small{position:absolute;top:auto;bottom:10px;left:20px;width:auto;color:#ccc}#at-drawer.at4-recommended .at4-logo-container{margin-left:20px}#at-drawer.ats-dark.at4-recommended .at4-logo-container a:hover{color:#fff}#at-drawer.at4-recommended .at-logo{margin:0}</style><style type="text/css">.at4-follow.at-mobile{display:none!important}.at4-follow{position:fixed;top:0;right:0;font-weight:400;color:#666;cursor:default;z-index:10001}.at4-follow .at4-follow-inner{position:relative;padding:10px 24px 10px 15px}.at4-follow-inner,.at-follow-open-control{border:0 solid #c5c5c5;border-width:1px 0 1px 1px;margin-top:-1px}.at4-follow .at4-follow-container{margin-left:9pt}.at4-follow.at4-follow-24 .at4-follow-container{height:24px;line-height:23px;font-size:13px}.at4-follow.at4-follow-32 .at4-follow-container{width:15pc;height:2pc;line-height:2pc;font-size:14px}.at4-follow .at4-follow-container .at-follow-label{display:inline-block;height:24px;line-height:24px;margin-right:10px;padding:0;cursor:default;float:left}.at4-follow .at4-follow-container .at-icon-wrapper{height:24px;width:24px}.at4-follow.ats-transparent .at4-follow-inner,.at-follow-open-control.ats-transparent{border-color:transparent}.at4-follow.ats-dark .at4-follow-inner,.at-follow-open-control.ats-dark{background:#262b30;border-color:#000;color:#fff}.at4-follow.ats-dark .at-follow-close-control{background-color:#262b30}.at4-follow.ats-light .at4-follow-inner{background:#fff;border-color:#c5c5c5}.at4-follow.ats-gray .at4-follow-inner,.at-follow-open-control.ats-gray{background:#f2f2f2;border-color:#c5c5c5}.at4-follow.ats-light .at4-follow-close-control,.at-follow-open-control.ats-light{background:#e5e5e5}.at4-follow .at4-follow-inner .at4-follow-close-control{position:absolute;top:0;bottom:0;left:0;width:20px;cursor:pointer;display:none}.at4-follow .at4-follow-inner .at4-follow-close-control div{display:block;line-height:20px;text-indent:-9999em;margin-top:calc(50% + 1px);overflow:hidden}.at-follow-open-control div.at4-arrow.at-left{background-position:0 -2px}.at-follow-open-control{position:fixed;height:35px;top:0;right:0;padding-top:10px;z-index:10002}.at-follow-btn{margin:0 5px 5px 0;padding:0;outline-offset:-1px;display:inline-block;box-sizing:content-box;transition:all .2s ease-in-out}.at-follow-btn:focus,.at-follow-btn:hover{-webkit-transform:translateY(-4px);transform:translateY(-4px)}.at4-follow-24 .at-follow-btn{height:25px;line-height:0;width:25px}</style><style type="text/css">.at-follow-tbx-element .at300b,.at-follow-tbx-element .at300m{display:inline-block;width:auto;padding:0;margin:0 2px 5px;outline-offset:-1px;transition:all .2s ease-in-out}.at-follow-tbx-element .at300b:focus,.at-follow-tbx-element .at300b:hover,.at-follow-tbx-element .at300m:focus,.at-follow-tbx-element .at300m:hover{-webkit-transform:translateY(-4px);transform:translateY(-4px)}.at-follow-tbx-element .addthis_vertical_style .at300b,.at-follow-tbx-element .addthis_vertical_style .at300m{display:block}.at-follow-tbx-element .addthis_vertical_style .at300b .addthis_follow_label,.at-follow-tbx-element .addthis_vertical_style .at300b .at-icon-wrapper,.at-follow-tbx-element .addthis_vertical_style .at300m .addthis_follow_label,.at-follow-tbx-element .addthis_vertical_style .at300m .at-icon-wrapper{display:inline-block;vertical-align:middle;margin-right:5px}.at-follow-tbx-element .addthis_vertical_style .at300b:focus,.at-follow-tbx-element .addthis_vertical_style .at300b:hover,.at-follow-tbx-element .addthis_vertical_style .at300m:focus,.at-follow-tbx-element .addthis_vertical_style .at300m:hover{-webkit-transform:none;transform:none}</style><style type="text/css">.at4-jumboshare .at-share-btn{display:inline-block;margin-right:13px;margin-top:13px}.at4-jumboshare .at-share-btn .at-icon{float:left}.at4-jumboshare .at-share-btn .at300bs{display:inline-block;float:left;cursor:pointer}.at4-jumboshare .at4-mobile .at-share-btn .at-icon,.at4-jumboshare .at4-mobile .at-share-btn .at-icon-wrapper{margin:0;padding:0}.at4-jumboshare .at4-mobile .at-share-btn{padding:0}.at4-jumboshare .at4-mobile .at-share-btn .at-label{display:none}.at4-jumboshare .at4-count{font-size:60px;line-height:60px;font-family:Helvetica neue,arial;font-weight:700}.at4-jumboshare .at4-count-container{display:table-cell;text-align:center;min-width:200px;vertical-align:middle;border-right:1px solid #ccc;padding-right:20px}.at4-jumboshare .at4-share-container{display:table-cell;vertical-align:middle;padding-left:20px}.at4-jumboshare .at4-share-container.at-share-tbx-element{padding-top:0}.at4-jumboshare .at4-title{position:relative;font-size:18px;line-height:18px;bottom:2px}.at4-jumboshare .at4-spacer{height:1px;display:block;visibility:hidden;opacity:0}.at4-jumboshare .at-share-btn{display:inline-block;margin:0 2px;line-height:0;padding:0;overflow:hidden;text-decoration:none;text-transform:none;color:#fff;cursor:pointer;transition:all .2s ease-in-out;border:0;background-color:transparent}.at4-jumboshare .at-share-btn:focus,.at4-jumboshare .at-share-btn:hover{-webkit-transform:translateY(-4px);transform:translateY(-4px);color:#fff;text-decoration:none}.at4-jumboshare .at-label{font-family:helvetica neue,helvetica,arial,sans-serif;font-size:9pt;padding:0 15px 0 0;margin:0;height:2pc;line-height:2pc;background:none}.at4-jumboshare .at-share-btn:hover,.at4-jumboshare .at-share-btn:link{text-decoration:none}.at4-jumboshare .at-share-btn::-moz-focus-inner{border:0;padding:0}.at4-jumboshare.at-mobile .at-label{display:none}</style><style type="text/css">div.at-share-close-control.ats-dark,div.at-share-open-control-left.ats-dark,div.at-share-open-control-right.ats-dark{background:#262b30}div.at-share-close-control.ats-light,div.at-share-open-control-left.ats-light,div.at-share-open-control-right.ats-light{background:#fff}div.at-share-close-control.ats-gray,div.at-share-open-control-left.ats-gray,div.at-share-open-control-right.ats-gray{background:#f2f2f2}.atss{position:fixed;top:20%;width:3pc;z-index:100020;background:none}.at-share-close-control{position:relative;width:3pc;overflow:auto}.at-share-open-control-left{position:fixed;top:20%;z-index:100020;left:0;width:22px}.at-share-close-control .at4-arrow.at-left{float:right}.atss-left{left:0;float:left;right:auto}.atss-right{left:auto;float:right;right:0}.atss-right.at-share-close-control .at4-arrow.at-right{position:relative;right:0;overflow:auto}.atss-right.at-share-close-control .at4-arrow{float:left}.at-share-open-control-right{position:fixed;top:20%;z-index:100020;right:0;width:22px;float:right}.atss-right .at-share-close-control .at4-arrow{float:left}.atss.atss-right a{float:right}.atss.atss-right .at4-share-title{float:right;overflow:hidden}.atss .at-share-btn,.atss a{position:relative;display:block;width:3pc;margin:0;outline-offset:-1px;text-align:center;float:left;transition:width .15s ease-in-out;overflow:hidden;background:#e8e8e8;z-index:100030;cursor:pointer}.at-share-btn::-moz-focus-inner{border:0;padding:0}.atss-right .at-share-btn{float:right}.atss .at-share-btn{border:0;padding:0}.atss .at-share-btn:focus,.atss .at-share-btn:hover,.atss a:focus,.atss a:hover{width:4pc}.atss .at-share-btn .at-icon-wrapper,.atss a .at-icon-wrapper{display:block;padding:8px 0}.atss .at-share-btn:last-child,.atss a:last-child{border:none}.atss .at-share-btn span .at-icon,.atss a span .at-icon{position:relative;top:0;left:0;display:block;background-repeat:no-repeat;background-position:50% 50%;width:2pc;height:2pc;line-height:2pc;border:none;padding:0;margin:0 auto;overflow:hidden;cursor:pointer;cursor:hand}.at4-share .at-custom-sidebar-counter{font-family:Helvetica neue,arial;vertical-align:top;margin-right:4px;display:inline-block;text-align:center}.at4-share .at-custom-sidebar-count{font-size:17px;line-height:1.25em;color:#222}.at4-share .at-custom-sidebar-text{font-size:9px;line-height:1.25em;color:#888;letter-spacing:1px}.at4-share .at4-share-count-container{position:absolute;left:0;right:auto;top:auto;bottom:0;width:100%;color:#fff;background:inherit}.at4-share .at4-share-count,.at4-share .at4-share-count-container{line-height:1pc;font-size:10px}.at4-share .at4-share-count{text-indent:0;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;font-weight:200;width:100%;height:1pc}.at4-share .at4-share-count-anchor{padding-bottom:8px;text-decoration:none;transition:padding .15s ease-in-out .15s,width .15s ease-in-out}</style><style type="text/css">.at4-recommendedbox-outer-container{display:inline}.at4-recommended-outer{position:static}.at4-recommended{top:20%;margin:0;text-align:center;font-weight:400;font-size:13px;line-height:17px;color:#666}.at4-recommended.at-inline .at4-recommended-horizontal{text-align:left}.at4-recommended-recommendedbox{padding:0;z-index:inherit}.at4-recommended-recommended{padding:40px 0}.at4-recommended-horizontal{max-height:340px}.at4-recommended.at-medium .at4-recommended-horizontal{max-height:15pc}.at4-recommended.at4-minimal.at-medium .at4-recommended-horizontal{padding-top:10px;max-height:230px}.at4-recommended-text-only .at4-recommended-horizontal{max-height:130px}.at4-recommended-horizontal{padding-top:5px;overflow-y:hidden}.at4-minimal{background:none;color:#000;border:none!important;box-shadow:none!important}@media screen and (max-width:900px){.at4-recommended-horizontal .at4-recommended-item,.at4-recommended-horizontal .at4-recommended-item .at4-recommended-item-img{width:15pc}}.at4-recommended.at4-minimal .at4-recommended-horizontal .at4-recommended-item .at4-recommended-item-caption{padding:0 0 10px}.at4-recommended.at4-minimal .at4-recommended-horizontal .at4-recommended-item-caption{padding:20px 0 0!important}.addthis-smartlayers .at4-recommended .at-h3.at-recommended-label{margin:0;padding:0;font-weight:300;font-size:18px;line-height:24px;color:#464646;width:100%;display:inline-block;zoom:1}.addthis-smartlayers .at4-recommended.at-inline .at-h3.at-recommended-label{text-align:left}#at4-thankyou .addthis-smartlayers .at4-recommended.at-inline .at-h3.at-recommended-label{text-align:center}.at4-recommended .at4-recommended-item{display:inline-block;zoom:1;position:relative;background:#fff;border:1px solid #c5c5c5;width:200px;margin:10px}.addthis_recommended_horizontal .at4-recommended-item{border:none}.at4-recommended .at4-recommended-item .sponsored-label{color:#666;font-size:9px;position:absolute;top:-20px}.at4-recommended .at4-recommended-item-img .at-tli,.at4-recommended .at4-recommended-item-img a{position:absolute;left:0}.at4-recommended.at-inline .at4-recommended-horizontal .at4-recommended-item{margin:10px 20px 0 0}.at4-recommended.at-medium .at4-recommended-horizontal .at4-recommended-item{margin:10px 10px 0 0}.at4-recommended.at-medium .at4-recommended-item{width:140px;overflow:hidden}.at4-recommended .at4-recommended-item .at4-recommended-item-img{position:relative;text-align:center;width:100%;height:200px;line-height:0;overflow:hidden}.at4-recommended .at4-recommended-item .at4-recommended-item-img a{display:block;width:100%;height:200px}.at4-recommended.at-medium .at4-recommended-item .at4-recommended-item-img,.at4-recommended.at-medium .at4-recommended-item .at4-recommended-item-img a{height:140px}.at4-recommended .at4-recommended-item .at4-recommended-item-img img{position:absolute;top:0;left:0;min-height:0;min-width:0;max-height:none;max-width:none;margin:0;padding:0}.at4-recommended .at4-recommended-item .at4-recommended-item-caption{height:74px;overflow:hidden;padding:20px;text-align:left;-ms-box-sizing:content-box;-o-box-sizing:content-box;box-sizing:content-box}.at4-recommended.at-medium .at4-recommended-item .at4-recommended-item-caption{height:50px;padding:15px}.at4-recommended .at4-recommended-item .at4-recommended-item-caption .at-h4{height:54px;margin:0 0 5px;padding:0;overflow:hidden;word-wrap:break-word;font-size:14px;font-weight:400;line-height:18px;text-align:left}.at4-recommended.at-medium .at4-recommended-item .at4-recommended-item-caption .at-h4{font-size:9pt;line-height:1pc;height:33px}.at4-recommended .at4-recommended-item:hover .at4-recommended-item-caption .at-h4{text-decoration:underline}.at4-recommended a:link,.at4-recommended a:visited{text-decoration:none;color:#464646}.at4-recommended .at4-recommended-item .at4-recommended-item-caption .at-h4 a:hover{text-decoration:underline;color:#000}.at4-recommended .at4-recommended-item .at4-recommended-item-caption small{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:11px;color:#666}.at4-recommended.at-medium .at4-recommended-item .at4-recommended-item-caption small{font-size:9px}.at4-recommended .at4-recommended-vertical{padding:15px 0 0}.at4-recommended .at4-recommended-vertical .at4-recommended-item{display:block;width:auto;max-width:100%;height:60px;border:none;margin:0 0 15px;box-shadow:none;background:none}.at4-recommended-vertical .at4-recommended-item .at4-recommended-item-img,.at4-recommended-vertical .at4-recommended-item .at4-recommended-item-img img{width:60px;height:60px;float:left}.at4-recommended-vertical .at4-recommended-item .at4-recommended-item-caption{border-top:none;margin:0;height:60px;padding:3px 5px}.at4-recommended .at4-recommended-vertical .at4-recommended-item .at4-recommended-item-caption .at-h4{height:38px;margin:0}.at4-recommended .at4-recommended-vertical .at4-recommended-item .at4-recommended-item-caption small{position:absolute;bottom:0}.at4-recommended .at-recommended-label.at-vertical{text-align:left}.at4-no-image-light-recommended,.at4-no-image-minimal-recommended{background-color:#f2f2f2!important}.at4-no-image-gray-recommended{background-color:#e6e6e5!important}.at4-no-image-dark-recommended{background-color:#4e555e!important}.at4-recommended .at4-recommended-item-placeholder-img{background-repeat:no-repeat!important;background-position:center!important;width:100%!important;height:100%!important}.at4-recommended-horizontal .at4-no-image-dark-recommended .at4-recommended-item-placeholder-img{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAfCAYAAACCox+xAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlFNUUyQTg3MTI0RDExRTM4NzAwREJDRjlCQzAyMUVFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlFNUUyQTg4MTI0RDExRTM4NzAwREJDRjlCQzAyMUVFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUU1RTJBODUxMjREMTFFMzg3MDBEQkNGOUJDMDIxRUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUU1RTJBODYxMjREMTFFMzg3MDBEQkNGOUJDMDIxRUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6oCfPiAAABfUlEQVR42uyWTU/DMAyGm3bdBxp062hHe+PC//9HCIkDYpNAO7CPAuWN5Eohyhpno2GHWqq8pO78xHHsiLquH4L/l6cwuBAZaOPKs//YBFIJIR59UiAt7huYi90aE/UQakTDLaL26RUEAAJqiefm93T9Bpj1X4O0bY0OIUXCpYBJvYDAUWyAUCWliHGTcnpqRMaM72ImRAJVknYG+eb4YEDIBeU0zGnsBLK1ODogYSsLhDwIJeVVk18lzfNA4ERGZNXi59UCIQhiYDilpSm/jp4awLxDvWhlf4/nGe8+LLuSt+SZul28ggaHG6gNVhDR+IuRFzOoxGKWwG7vVFm5AAQxgcqYpzrjFjR9zwPH5LSuT7XlNr2MQm5LzqjLpncNNaM+s8M27Y60g3FwhoSMzrtUQllgLtRs5pZ2cB4IhbvQbGRZv1NsrhyS8+SI5Mo9RJWpjAI1xqKL+0iEP180vy214JbeR12AyOgsHI7e0NfFyKv0ID1ID+IqPwIMAOeljGQOryBmAAAAAElFTkSuQmCC)!important}.at4-recommended-vertical .at4-no-image-dark-recommended .at4-recommended-item-placeholder-img{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAOCAYAAADwikbvAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAzREMyNTM2MTI0RjExRTM4NzAwREJDRjlCQzAyMUVFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAzREMyNTM3MTI0RjExRTM4NzAwREJDRjlCQzAyMUVFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDNEQzI1MzQxMjRGMTFFMzg3MDBEQkNGOUJDMDIxRUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDNEQzI1MzUxMjRGMTFFMzg3MDBEQkNGOUJDMDIxRUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5GfbtkAAAAxklEQVR42qRSTQvCMAxduk53mEOHKFPP/v8/5cGTiIibivVFUomlG7gFHvloXpKmJefcPhkmNyvGEWj+IOZA6ckPImoxxVwOLvCvXUzkpayNCpRQK64IbOBnAYGAXMeMslNlU+CzrIEdCkxi5DPAoz6BE8ZuVNdKJuL8rS9sv62IXlCHyP0KqKUKZXK9uwkSLVArfwpVR3b225kXwovibcP+jC4jUtfWPZmfqJJnYlkAM128j1z0nHWKSUbIKDL/msHktwADAPptQo+vkZNLAAAAAElFTkSuQmCC)!important}.at4-recommended-horizontal .at4-no-image-gray-recommended .at4-recommended-item-placeholder-img,.at4-recommended-horizontal .at4-no-image-light-recommended .at4-recommended-item-placeholder-img,.at4-recommended-horizontal .at4-no-image-minimal-recommended .at4-recommended-item-placeholder-img{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAfCAYAAACCox+xAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAzREMyNTMyMTI0RjExRTM4NzAwREJDRjlCQzAyMUVFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAzREMyNTMzMTI0RjExRTM4NzAwREJDRjlCQzAyMUVFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUU1RTJBODkxMjREMTFFMzg3MDBEQkNGOUJDMDIxRUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUU1RTJBOEExMjREMTFFMzg3MDBEQkNGOUJDMDIxRUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6dfDQvAAABg0lEQVR42uyWS0vDQBDH82jaKNW0qUltbl68e/Di98eLBz+CCB5EBaWIpUat/4UJLMuame1j7SEDYbqbKfPLvHbDi8ur8+D/5T4K9kR6xrr27D+xgdS3N9d3PilQFmcNzN6mxkbdhxrQcoGofXkFAUAINcVzrG2vsP8KmJdtg7SlxoRQouBywOReQOAosUDoklPEpEU5XDciqeB/iRAig6pIO4P8CHysBBDqg0palrR2Alkwjj5RsDUDoRqhorpq6quifRkInKiIPLf4eWIgQoLoWbq0stXXn10DmDeoR2PsL/E84N0Hk5Wypc70dMkGGhzOoeb4gpjW34K6GEFljFkGu6XTZJUCEMQBVCHs6kI60MycB47FyUmo20oPvYJCzhVnvIsR3zg5ghoRTNpyHKTBBhIJTt6pFsoZ9iLDZswcB5uBULhnho0a66eazaFDca59Hym1e4guQ4rCO4Fu/T4Sw8Gk+c3MghN6H+8CRKVg4tB6fV8XI6/SgXQgHYir/AowAMU5TskhKVUNAAAAAElFTkSuQmCC)!important}.at4-recommended-vertical .at4-no-image-gray-recommended .at4-recommended-item-placeholder-img,.at4-recommended-vertical .at4-no-image-light-recommended .at4-recommended-item-placeholder-img,.at4-recommended-vertical .at4-no-image-minimal-recommended .at4-recommended-item-placeholder-img{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAOCAYAAADwikbvAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAzREMyNTNBMTI0RjExRTM4NzAwREJDRjlCQzAyMUVFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAzREMyNTNCMTI0RjExRTM4NzAwREJDRjlCQzAyMUVFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDNEQzI1MzgxMjRGMTFFMzg3MDBEQkNGOUJDMDIxRUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDNEQzI1MzkxMjRGMTFFMzg3MDBEQkNGOUJDMDIxRUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz65Fr9cAAAA0ElEQVR42qRRuQrCQBDd3SSaIgYNosSrtLew8f+xsfAnYmEVRMR4YHwjExjCbsBk4DHHzptjR2+2u7VqJ3efjTNQ/EEMgbgiv46H/QNTDPnhCv/mYiLPI21EIIaaUEVgBj+oETQQypgRtidsXfNJpsACBXo28gWgUd9AjrEL0TXhiSh/XhWudlZI/kCdLPtFUGMRCni9p6kl+kAq/D5UavmzX2fNd87obsCSfztnrOR0rjvTiRImkoyAQQNRyZ2jhjenGNVBOpF1WZatyV8BBgBJ+irgS/KHdAAAAABJRU5ErkJggg==)!important}#at-drawer.ats-dark,.at4-recommended.ats-dark .at4-recommended-horizontal .at4-recommended-item-caption,.at4-recommended.ats-dark .at4-recommended-vertical .at4-recommended-item-caption{background:#262b30}#at-drawer.ats-gray,.at4-recommended.ats-gray .at4-recommended-horizontal .at4-recommended-item-caption{background:#f2f2f2}#at-drawer.ats-light,.at4-recommended.ats-light .at4-recommended-horizontal .at4-recommended-item-caption{background:#fff}.at4-recommended.ats-dark .at4-recommended-vertical .at4-recommended-item{background:none}.at4-recommended.ats-dark .at4-recommended-item .at4-recommended-item-caption a:hover,.at4-recommended.ats-dark .at4-recommended-item .at4-recommended-item-caption a:link,.at4-recommended.ats-dark .at4-recommended-item .at4-recommended-item-caption a:visited,.at4-recommended.ats-dark .at4-recommended-item .at4-recommended-item-caption small,.at4-recommended.ats-dark .at4-recommended-item-caption,.at4-recommended.ats-dark .at-logo a:hover,.at4-recommended.ats-dark .at-recommended-label.at-vertical{color:#fff}.at4-recommended-vertical-logo{padding-top:0;text-align:left}.at4-recommended-vertical-logo .at4-logo-container{line-height:10px}.at4-recommended-horizontal-logo{text-align:center}.at4-recommended.at-inline .at4-recommended-horizontal-logo{text-align:left}#at4-thankyou .at4-recommended.at-inline .at4-recommended-horizontal{text-align:center}.at4-recommended .at-logo{margin:10px 0 0;padding:0;height:25px;overflow:auto;-ms-box-sizing:content-box;-o-box-sizing:content-box;box-sizing:content-box}.at4-recommended.at-inline .at4-recommended-horizontal .at-logo{text-align:left}.at4-recommended .at4-logo-container a.at-sponsored-link{color:#666}.at4-recommended-class .at4-logo-container a:hover,.at4-recommendedbox-outer-container .at4-recommended-recommendedbox .at4-logo-container a:hover{color:#000}</style><style type="text/css">.at-recommendedjumbo-outer-container{margin:0;padding:0;border:0;background:none;color:#000}.at-recommendedjumbo-footer{position:relative;width:100%;height:510px;overflow:hidden;transition:all .3s ease-in-out}.at-mobile .at-recommendedjumbo-footer{height:250px}.at-recommendedjumbo-footer #bg-link:after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.75)}.at-recommendedjumbo-footer:hover #bg-link:after{background:rgba(0,0,0,.85)}.at-recommendedjumbo-footer *,.at-recommendedjumbo-footer :after,.at-recommendedjumbo-footer :before{box-sizing:border-box}.at-recommendedjumbo-footer:hover #at-recommendedjumbo-footer-bg{-webkit-animation:atRecommendedJumboAnimatedBackground 1s ease-in-out 1;animation:atRecommendedJumboAnimatedBackground 1s ease-in-out 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.at-recommendedjumbo-footer #at-recommendedjumbo-top-holder{position:absolute;top:0;padding:0 40px;width:100%}.at-mobile .at-recommendedjumbo-footer #at-recommendedjumbo-top-holder{padding:0 20px}.at-recommendedjumbo-footer .at-recommendedjumbo-footer-inner{position:relative;text-align:center;font-family:helvetica,arial,sans-serif;z-index:2;width:100%}.at-recommendedjumbo-footer #at-recommendedjumbo-label-holder{margin:40px 0 0;max-height:30px}.at-mobile .at-recommendedjumbo-footer #at-recommendedjumbo-label-holder{margin:20px 0 0;max-height:20px}.at-recommendedjumbo-footer #at-recommendedjumbo-label{font-weight:300;font-size:24px;line-height:24px;color:#fff;margin:0}.at-mobile .at-recommendedjumbo-footer #at-recommendedjumbo-label{font-weight:150;font-size:14px;line-height:14px}.at-recommendedjumbo-footer #at-recommendedjumbo-title-holder{margin:20px 0 0;min-height:3pc;max-height:78pt}.at-mobile .at-recommendedjumbo-footer #at-recommendedjumbo-title-holder{margin:10px 0 0;min-height:24px;max-height:54px}.at-recommendedjumbo-footer #at-recommendedjumbo-content-title{font-size:3pc;line-height:52px;font-weight:700;margin:0}.at-mobile .at-recommendedjumbo-footer #at-recommendedjumbo-content-title{font-size:24px;line-height:27px}.at-recommendedjumbo-footer a{text-decoration:none;color:#fff}.at-recommendedjumbo-footer a:visited{color:#fff}.at-recommendedjumbo-footer small{margin:20px 0 0;display:inline-block;height:2pc;line-height:2pc;font-size:14px;color:#ccc;cursor:default}.at-mobile .at-recommendedjumbo-footer small{margin:10px 0 0;height:14px;line-height:14px;font-size:9pt}.at-recommendedjumbo-footer .at-logo-container{position:absolute;bottom:20px;margin:auto;left:0;right:0}.at-mobile .at-recommendedjumbo-footer .at-logo-container{bottom:10px}.at-recommendedjumbo-footer a.at-sponsored-link{color:#ccc}.at-recommendedjumbo-footer div #at-recommendedjumbo-logo-link{padding:2px 0 0 11px;text-decoration:none;line-height:20px;font-family:helvetica,arial,sans-serif;font-size:9px;color:#ccc}@-webkit-keyframes atRecommendedJumboAnimatedBackground{0%{-webkit-transform:scale(1,1);transform:scale(1,1)}to{-webkit-transform:scale(1.1,1.1);transform:scale(1.1,1.1)}}@keyframes atRecommendedJumboAnimatedBackground{0%{-webkit-transform:scale(1,1);transform:scale(1,1)}to{-webkit-transform:scale(1.1,1.1);transform:scale(1.1,1.1)}}</style><style type="text/css">.at-resp-share-element{position:relative;padding:0;margin:0;font-size:0;line-height:0}.at-resp-share-element:after,.at-resp-share-element:before{content:" ";display:table}.at-resp-share-element.at-mobile .at4-share-count-container,.at-resp-share-element.at-mobile .at-label{display:none}.at-resp-share-element .at-share-btn{display:inline-block;*display:inline;*zoom:1;margin:0 2px 5px;padding:0;overflow:hidden;line-height:0;text-decoration:none;text-transform:none;color:#fff;cursor:pointer;transition:all .2s ease-in-out;border:0;font-family:helvetica neue,helvetica,arial,sans-serif;background-color:transparent}.at-resp-share-element .at-share-btn::-moz-focus-inner{border:0;padding:0}.at-resp-share-element .at-share-btn:focus,.at-resp-share-element .at-share-btn:hover{-webkit-transform:translateY(-4px);transform:translateY(-4px);color:#fff;text-decoration:none}.at-resp-share-element .at-share-btn .at-icon-wrapper{float:left}.at-resp-share-element .at-share-btn.at-share-btn.at-svc-compact:hover{-webkit-transform:none;transform:none}.at-resp-share-element .at-share-btn .at-label{font-family:helvetica neue,helvetica,arial,sans-serif;font-size:9pt;padding:0 15px 0 0;margin:0 0 0 5px;height:2pc;line-height:2pc;background:none}.at-resp-share-element .at-icon,.at-resp-share-element .at-label{cursor:pointer}.at-resp-share-element .at4-share-count-container{text-decoration:none;float:right;padding-right:15px;font-size:9pt}.at-mobile .at-resp-share-element .at-label{display:none}.at-resp-share-element.at-mobile .at-share-btn{margin-right:5px}.at-mobile .at-resp-share-element .at-share-btn{padding:5px;margin-right:5px}</style><style type="text/css">.at-share-tbx-element{position:relative;margin:0;color:#fff;font-size:0}.at-share-tbx-element,.at-share-tbx-element .at-share-btn{font-family:helvetica neue,helvetica,arial,sans-serif;padding:0;line-height:0}.at-share-tbx-element .at-share-btn{cursor:pointer;margin:0 5px 5px 0;display:inline-block;overflow:hidden;border:0;text-decoration:none;text-transform:none;background-color:transparent;color:inherit;transition:all .2s ease-in-out}.at-share-tbx-element .at-share-btn:focus,.at-share-tbx-element .at-share-btn:hover{-webkit-transform:translateY(-4px);transform:translateY(-4px);outline-offset:-1px;color:inherit}.at-share-tbx-element .at-share-btn::-moz-focus-inner{border:0;padding:0}.at-share-tbx-element .at-share-btn.at-share-btn.at-svc-compact:hover{-webkit-transform:none;transform:none}.at-share-tbx-element .at-icon-wrapper{vertical-align:middle}.at-share-tbx-element .at4-share-count,.at-share-tbx-element .at-label{margin:0 7.5px 0 2.5px;text-decoration:none;vertical-align:middle;display:inline-block;background:none;height:0;font-size:inherit;line-height:inherit;color:inherit}.at-share-tbx-element.at-mobile .at4-share-count,.at-share-tbx-element.at-mobile .at-label{display:none}.at-share-tbx-element .at_native_button{vertical-align:middle}.at-share-tbx-element .addthis_counter.addthis_bubble_style{margin:0 2px;vertical-align:middle;display:inline-block}.at-share-tbx-element .fb_iframe_widget{display:block}.at-share-tbx-element.at-share-tbx-native .at300b{vertical-align:middle}.at-style-responsive .at-share-btn{padding:5px}.at-style-jumbo{display:table}.at-style-jumbo .at4-spacer{height:1px;display:block;visibility:hidden;opacity:0}.at-style-jumbo .at4-count-container{display:table-cell;text-align:center;min-width:200px;vertical-align:middle;border-right:1px solid #ccc;padding-right:20px}.at-style-jumbo .at4-count{font-size:60px;line-height:60px;font-weight:700}.at-style-jumbo .at4-count-title{position:relative;font-size:18px;line-height:18px;bottom:2px}.at-style-jumbo .at-share-btn-elements{display:table-cell;vertical-align:middle;padding-left:20px}.at_flat_counter{cursor:pointer;font-family:helvetica,arial,sans-serif;font-weight:700;text-transform:uppercase;display:inline-block;position:relative;vertical-align:top;height:auto;margin:0 5px;padding:0 6px;left:-1px;background:#ebebeb;color:#32363b;transition:all .2s ease}.at_flat_counter:after{top:30%;left:-4px;content:"";position:absolute;border-width:5px 8px 5px 0;border-style:solid;border-color:transparent #ebebeb transparent transparent;display:block;width:0;height:0;-webkit-transform:translateY(360deg);transform:translateY(360deg)}.at_flat_counter:hover{background:#e1e2e2}</style><style type="text/css">.at4-thankyou-background{top:0;right:0;left:0;bottom:0;-webkit-overflow-scrolling:touch;z-index:9999999;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABtJREFUeNpizCuu/sRABGBiIBKMKqSOQoAAAwC8KgJipENhxwAAAABJRU5ErkJggg==);background:hsla(217,6%,46%,.95)}.at4-thankyou-background.at-thankyou-shown{position:fixed}.at4-thankyou-inner{position:absolute;width:100%;top:10%;left:50%;margin-left:-50%;text-align:center}.at4-thankyou-mobile .at4-thankyou-inner{top:5%}.thankyou-description{font-weight:400}.at4-thankyou-background .at4lb-inner{position:relative;width:100%;height:100%}.at4-thankyou-background .at4lb-inner .at4x{position:absolute;top:15px;right:15px;display:block;width:20px;height:20px;padding:20px;margin:0;cursor:pointer;transition:opacity .25s ease-in;opacity:.4;background:url("data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTEvMTMvMTKswDp5AAAAd0lEQVQ4jb2VQRLAIAgDE///Z3qqY1FAhalHMCsCIkVEAIAkkVgvp2lDBgYAnAyHkWotLccNrEd4A7X2TqIdqLfnWBAdaF5rJdyJfjtPH5GT37CaGhoVq3nOm/XflUuLUto2pY1d+vRKh0Pp+MrAVtDe2JkvYNQ+jVSEEFmOkggAAAAASUVORK5CYII=") no-repeat center center;overflow:hidden;text-indent:-99999em;border:1px solid transparent}.at4-thankyou-background .at4lb-inner .at4x:focus,.at4-thankyou-background .at4lb-inner .at4x:hover{border:1px solid #fff;border-radius:50%;outline:0}.at4-thankyou-background .at4lb-inner #at4-palogo{position:absolute;bottom:10px;display:inline-block;text-decoration:none;font-family:helvetica,arial,sans-serif;font-size:11px;cursor:pointer;-webkit-transition:opacity .25s ease-in;moz-transition:opacity .25s ease-in;transition:opacity .25s ease-in;opacity:.5;z-index:100020;color:#fff;padding:2px 0 0 13px}.at4-thankyou-background .at4lb-inner #at4-palogo .at-branding-addthis,.at4-thankyou-background .at4lb-inner #at4-palogo .at-branding-info{color:#fff}.at4-thankyou-background .at4lb-inner #at4-palogo:hover,.at4-thankyou-background.ats-dark .at4lb-inner a#at4-palogo:hover{text-decoration:none;color:#fff;opacity:1}.at4-thankyou-background.ats-dark{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABtJREFUeNpiZGBgeMZABGBiIBKMKqSOQoAAAwB+cQD6hqlbCwAAAABJRU5ErkJggg==");background:rgba(0,0,0,.85)}.at4-thankyou-background .thankyou-title{color:#fff;font-size:38.5px;margin:10px 20px;line-height:38.5px;font-family:helvetica neue,helvetica,arial,sans-serif;font-weight:300}.at4-thankyou-background.ats-dark .thankyou-description,.at4-thankyou-background.ats-dark .thankyou-title{color:#fff}.at4-thankyou-background .thankyou-description{color:#fff;font-size:18px;margin:10px 0;line-height:24px;padding:0;font-family:helvetica neue,helvetica,arial,sans-serif;font-weight:300}.at4-thankyou-background .at4-thanks-icons{padding-top:10px}.at4-thankyou-mobile *{-webkit-overflow-scrolling:touch}#at4-thankyou .at4-recommended-recommendedbox .at-logo{display:none}.at4-thankyou .at-h3{height:49px;line-height:49px;margin:0 50px 0 20px;padding:1px 0 0;font-family:helvetica neue,helvetica,arial,sans-serif;font-size:1pc;font-weight:700;color:#fff;text-shadow:0 1px #000}.at4-thanks{padding-top:50px;text-align:center}.at4-thanks label{display:block;margin:0 0 15px;font-size:1pc;line-height:1pc}.at4-thanks .at4-h2{background:none;border:none;margin:0 0 10px;padding:0;font-family:helvetica neue,helvetica,arial,sans-serif;font-size:28px;font-weight:300;color:#000}.at4-thanks .at4-thanks-icons{position:relative;height:2pc}.at4-thanks .at4-thanks-icons .at-thankyou-label{display:block;padding-bottom:10px;font-size:14px;color:#666}.at4-thankyou-layer .at-follow .at-icon-wrapper{width:2pc;height:2pc}</style><style type="text/css">.at4-recommended-toaster{position:fixed;top:auto;bottom:0;right:0;z-index:100021}.at4-recommended-toaster.ats-light{border:1px solid #c5c5c5;background:#fff}.at4-recommended-toaster.ats-gray{border:1px solid #c5c5c5;background:#f2f2f2}.at4-recommended-toaster.ats-dark{background:#262b30;color:#fff}.at4-recommended-toaster .at4-recommended-container{padding-top:0;margin:0}.at4-recommended.at4-recommended-toaster div.at-recommended-label{line-height:1pc;font-size:1pc;text-align:left;padding:20px 0 0 20px}.at4-toaster-outer .at4-recommended .at4-recommended-item .at4-recommended-item-caption .at-h4{font-size:11px;line-height:11px;margin:10px 0 6px;height:30px}.at4-recommended.at4-recommended-toaster div.at-recommended-label.ats-gray,.at4-recommended.at4-recommended-toaster div.at-recommended-label.ats-light{color:#464646}.at4-recommended.at4-recommended-toaster div.at-recommended-label.ats-dark{color:#fff}.at4-toaster-close-control{position:absolute;top:0;right:0;display:block;width:20px;height:20px;line-height:20px;margin:5px 5px 0 0;padding:0;text-indent:-9999em}.at4-toaster-open-control{position:fixed;right:0;bottom:0;z-index:100020}.at4-toaster-outer .at4-recommended-item{width:90pt;border:0;margin:9px 10px 0}.at4-toaster-outer .at4-recommended-item:first-child{margin-left:20px}.at4-toaster-outer .at4-recommended-item:last-child{margin-right:20px}.at4-toaster-outer .at4-recommended-item .at4-recommended-item-img{max-height:90pt;max-width:90pt}.at4-toaster-outer .at4-recommended-item .at4-recommended-item-img img{height:90pt;width:90pt}.at4-toaster-outer .at4-recommended-item .at4-recommended-item-caption{height:30px;padding:0;margin:0;height:initial}.at4-toaster-outer .ats-dark .at4-recommended-item .at4-recommended-item-caption{background:#262b30}.at4-toaster-outer .at4-recommended .at4-recommended-item .at4-recommended-item-caption small{width:auto;line-height:14px;margin:0}.at4-toaster-outer .at4-recommended.ats-dark .at4-recommended-item .at4-recommended-item-caption small{color:#fff}.at4-recommended-toaster .at-logo{margin:0 0 3px 20px;text-align:left}.at4-recommended-toaster .at-logo .at4-logo-container.at-sponsored-logo{position:relative}.at4-toaster-outer .at4-recommended-item .sponsored-label{text-align:right;font-size:10px;color:#666;float:right;position:fixed;bottom:6px;right:20px;top:initial;z-index:99999}</style><style type="text/css">.at4-whatsnext{position:fixed;bottom:0!important;right:0;background:#fff;border:1px solid #c5c5c5;margin:-1px;width:390px;height:90pt;overflow:hidden;font-size:9pt;font-weight:400;color:#000;z-index:1800000000}.at4-whatsnext a{color:#666}.at4-whatsnext .at-whatsnext-content{height:90pt;position:relative}.at4-whatsnext .at-whatsnext-content .at-branding{position:absolute;bottom:15px;right:10px;padding-left:9px;text-decoration:none;line-height:10px;font-family:helvetica,arial,sans-serif;font-size:10px;color:#666}.at4-whatsnext .at-whatsnext-content .at-whatsnext-content-inner{position:absolute;top:15px;right:20px;bottom:15px;left:140px;text-align:left;height:105px}.at4-whatsnext .at-whatsnext-content-inner a{display:inline-block}.at4-whatsnext .at-whatsnext-content-inner div.at-h6{text-align:left;margin:0;padding:0 0 3px;font-size:11px;color:#666;cursor:default}.at4-whatsnext .at-whatsnext-content .at-h3{text-align:left;margin:5px 0;padding:0;line-height:1.2em;font-weight:400;font-size:14px;height:3pc}.at4-whatsnext .at-whatsnext-content-inner a:link,.at4-whatsnext .at-whatsnext-content-inner a:visited{text-decoration:none;font-weight:400;color:#464646}.at4-whatsnext .at-whatsnext-content-inner a:hover{color:#000}.at4-whatsnext .at-whatsnext-content-inner small{position:absolute;bottom:15px;line-height:10px;font-size:11px;color:#666;cursor:default;text-align:left}.at4-whatsnext .at-whatsnext-content .at-whatsnext-content-img{position:absolute;top:0;left:0;width:90pt;height:90pt;overflow:hidden}.at4-whatsnext .at-whatsnext-content .at-whatsnext-content-img img{position:absolute;top:0;left:0;max-height:none;max-width:none}.at4-whatsnext .at-whatsnext-close-control{position:absolute;top:0;right:0;display:block;width:20px;height:20px;line-height:20px;margin:0 5px 0 0;padding:0;text-indent:-9999em}.at-whatsnext-open-control{position:fixed;right:0;bottom:0;z-index:100020}.at4-whatsnext.ats-dark{background:#262b30}.at4-whatsnext.ats-dark .at-whatsnext-content .at-h3,.at4-whatsnext.ats-dark .at-whatsnext-content a.at4-logo:hover,.at4-whatsnext.ats-dark .at-whatsnext-content-inner a:link,.at4-whatsnext.ats-dark .at-whatsnext-content-inner a:visited{color:#fff}.at4-whatsnext.ats-light{background:#fff}.at4-whatsnext.ats-gray{background:#f2f2f2}.at4-whatsnext.at-whatsnext-nophoto{width:270px}.at4-whatsnext.at-whatsnext-nophoto .at-whatsnext-content-img{display:none}.at4-whatsnext.at-whatsnext-nophoto .at-whatsnext-content .at-whatsnext-content-inner{top:15px;right:0;left:20px}.at4-whatsnext.at-whatsnext-nophoto .at-whatsnext-content .at-whatsnext-content-inner.addthis_32x32_style{top:0;right:0;left:0;padding:45px 20px 0;font-size:20px}.at4-whatsnext.at-whatsnext-nophoto .at-whatsnext-content .at-whatsnext-content-inner .at4-icon,.at4-whatsnext.at-whatsnext-nophoto .at-whatsnext-content .at-whatsnext-content-inner .at4-icon-fw,.at4-whatsnext.at-whatsnext-nophoto .at-whatsnext-content .at-whatsnext-content-inner .whatsnext-msg{vertical-align:middle}.at-whatsnext-img,.at-whatsnext-img-lnk{position:absolute;left:0}</style><style type="text/css">.at4-whatsnextmobile{position:fixed;bottom:0;right:0;left:0;background:#fff;z-index:9999998;height:170px;font-size:28px}.at4-whatsnextmobile .col-2{height:100%;font-size:1em}.at4-whatsnextmobile .col-2:first-child{max-width:200px;display:inline-block;float:left}.at4-whatsnextmobile .col-2:last-child{position:absolute;left:200px;right:50px;top:0;bottom:0;display:inline-block}.at4-whatsnextmobile .at-whatsnext-content-inner{font-size:1em}.at4-whatsnextmobile .at-whatsnext-content-img img{height:100%;width:100%}.at4-whatsnextmobile .at-close-control{font-size:1em;position:absolute;top:0;right:0;width:50px;height:50px}.at4-whatsnextmobile .at-close-control button{width:100%;height:100%;font-size:1em;font-weight:400;text-decoration:none;opacity:.5;padding:0;cursor:pointer;background:0 0;border:0;-webkit-appearance:none}.at4-whatsnextmobile .at-h3,.at4-whatsnextmobile .at-h6{font-size:1em;margin:0;color:#a1a1a1;margin-left:2.5%;margin-top:25px}.at4-whatsnextmobile .at-h3{font-size:1em;line-height:1em;font-weight:500;height:50%}.at4-whatsnextmobile .at-h3 a{font-size:1em;text-decoration:none}.at4-whatsnextmobile .at-h6{font-size:.8em;line-height:.8em;font-weight:500}.at4-whatsnextmobile .footer{position:absolute;bottom:2px;left:200px;right:0;padding-left:2.5%;font-size:1em;line-height:.6em}.at4-whatsnextmobile .footer small{font-size:.6em;color:#a1a1a1}.at4-whatsnextmobile .footer small:first-child{margin-right:5%;float:left}.at4-whatsnextmobile .footer small:last-child{margin-right:2.5%;float:right}.at4-whatsnextmobile .at-whatsnext-content{height:100%}.at4-whatsnextmobile.ats-dark{background:#262b30;color:#fff}.at4-whatsnextmobile .at-close-control button{color:#bfbfbf}.at4-whatsnextmobile.ats-dark a:link,.at4-whatsnextmobile.ats-dark a:visited{color:#fff}.at4-whatsnextmobile.ats-gray{background:#f2f2f2;color:#262b30}.at4-whatsnextmobile.ats-light{background:#fff;color:#262b30}.at4-whatsnextmobile.ats-dark .footer a:link,.at4-whatsnextmobile.ats-dark .footer a:visited,.at4-whatsnextmobile.ats-gray .footer a:link,.at4-whatsnextmobile.ats-gray .footer a:visited,.at4-whatsnextmobile.ats-light .footer a:link,.at4-whatsnextmobile.ats-light .footer a:visited{color:#a1a1a1}.at4-whatsnextmobile.ats-gray a:link,.at4-whatsnextmobile.ats-gray a:visited,.at4-whatsnextmobile.ats-light a:link,.at4-whatsnextmobile.ats-light a:visited{color:#262b30}@media only screen and (min-device-width:320px) and (max-device-width:480px){.at4-whatsnextmobile{height:85px;font-size:14px}.at4-whatsnextmobile .col-2:first-child{width:75pt}.at4-whatsnextmobile .col-2:last-child{right:25px;left:75pt}.at4-whatsnextmobile .footer{left:75pt}.at4-whatsnextmobile .at-close-control{width:25px;height:25px}.at4-whatsnextmobile .at-h3,.at4-whatsnextmobile .at-h6{margin-top:12.5px}}</style><style type="text/css">.at-custom-mobile-bar{left:0;right:0;width:100%;height:56px;position:fixed;text-align:center;z-index:100020;background:#fff;overflow:hidden;box-shadow:0 0 10px 0 rgba(0,0,0,.2);font:initial;line-height:normal;top:auto;bottom:0}.at-custom-mobile-bar.at-custom-mobile-bar-zindex-hide{z-index:-1!important}.at-custom-mobile-bar.atss-top{top:0;bottom:auto}.at-custom-mobile-bar.atss-bottom{top:auto;bottom:0}.at-custom-mobile-bar .at-custom-mobile-bar-btns{display:inline-block;text-align:center}.at-custom-mobile-bar .at-custom-mobile-bar-counter,.at-custom-mobile-bar .at-share-btn{margin-top:4px}.at-custom-mobile-bar .at-share-btn{display:inline-block;text-decoration:none;transition:none;box-sizing:content-box}.at-custom-mobile-bar .at-custom-mobile-bar-counter{font-family:Helvetica neue,arial;vertical-align:top;margin-left:4px;margin-right:4px;display:inline-block}.at-custom-mobile-bar .at-custom-mobile-bar-count{font-size:26px;line-height:1.25em;color:#222}.at-custom-mobile-bar .at-custom-mobile-bar-text{font-size:9pt;line-height:1.25em;color:#888;letter-spacing:1px}.at-custom-mobile-bar .at-icon-wrapper{text-align:center;height:3pc;width:3pc;margin:0 4px}.at-custom-mobile-bar .at-icon{vertical-align:top;margin:8px;width:2pc;height:2pc}.at-custom-mobile-bar.at-shfs-medium{height:3pc}.at-custom-mobile-bar.at-shfs-medium .at-custom-mobile-bar-counter{margin-top:6px}.at-custom-mobile-bar.at-shfs-medium .at-custom-mobile-bar-count{font-size:18px}.at-custom-mobile-bar.at-shfs-medium .at-custom-mobile-bar-text{font-size:10px}.at-custom-mobile-bar.at-shfs-medium .at-icon-wrapper{height:40px;width:40px}.at-custom-mobile-bar.at-shfs-medium .at-icon{margin:6px;width:28px;height:28px}.at-custom-mobile-bar.at-shfs-small{height:40px}.at-custom-mobile-bar.at-shfs-small .at-custom-mobile-bar-counter{margin-top:3px}.at-custom-mobile-bar.at-shfs-small .at-custom-mobile-bar-count{font-size:1pc}.at-custom-mobile-bar.at-shfs-small .at-custom-mobile-bar-text{font-size:10px}.at-custom-mobile-bar.at-shfs-small .at-icon-wrapper{height:2pc;width:2pc}.at-custom-mobile-bar.at-shfs-small .at-icon{margin:4px;width:24px;height:24px}</style><style type="text/css">.at-custom-sidebar{top:20%;width:58px;position:fixed;text-align:center;z-index:100020;background:#fff;overflow:hidden;box-shadow:0 0 10px 0 rgba(0,0,0,.2);font:initial;line-height:normal;top:auto;bottom:0}.at-custom-sidebar.at-custom-sidebar-zindex-hide{z-index:-1!important}.at-custom-sidebar.atss-left{left:0;right:auto;float:left;border-radius:0 4px 4px 0}.at-custom-sidebar.atss-right{left:auto;right:0;float:right;border-radius:4px 0 0 4px}.at-custom-sidebar .at-custom-sidebar-btns{display:inline-block;text-align:center;padding-top:4px}.at-custom-sidebar .at-custom-sidebar-counter{margin-bottom:8px}.at-custom-sidebar .at-share-btn{display:inline-block;text-decoration:none;transition:none;box-sizing:content-box}.at-custom-sidebar .at-custom-sidebar-counter{font-family:Helvetica neue,arial;vertical-align:top;margin-left:4px;margin-right:4px;display:inline-block}.at-custom-sidebar .at-custom-sidebar-count{font-size:21px;line-height:1.25em;color:#222}.at-custom-sidebar .at-custom-sidebar-text{font-size:10px;line-height:1.25em;color:#888;letter-spacing:1px}.at-custom-sidebar .at-icon-wrapper{text-align:center;margin:0 4px}.at-custom-sidebar .at-icon{vertical-align:top;margin:9px;width:2pc;height:2pc}.at-custom-sidebar .at-icon-wrapper{position:relative}.at-custom-sidebar .at4-share-count,.at-custom-sidebar .at4-share-count-container{line-height:1pc;font-size:10px}.at-custom-sidebar .at4-share-count{text-indent:0;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;font-weight:200;width:100%;height:1pc}.at-custom-sidebar .at4-share-count-anchor .at-icon{margin-top:3px}.at-custom-sidebar .at4-share-count-container{position:absolute;left:0;right:auto;top:auto;bottom:0;width:100%;color:#fff;background:inherit}</style><style type="text/css">.at-image-sharing-mobile-icon{position:absolute;background:#000 url(//s7.addthis.com/static/44a36d35bafef33aa9455b7d3039a771.png) no-repeat top center;background-color:rgba(0,0,0,.9);background-image:url(//s7.addthis.com/static/10db525181ee0bbe1a515001be1c7818.svg),none;border-radius:3px;width:50px;height:40px;top:-9999px;left:-9999px}.at-image-sharing-tool{display:block;position:absolute;text-align:center;z-index:9001;background:none;overflow:hidden;top:-9999px;left:-9999px;font:initial;line-height:0}.at-image-sharing-tool.addthis-animated{-webkit-animation-duration:.15s;animation-duration:.15s}.at-image-sharing-tool.at-orientation-vertical .at-share-btn{display:block}.at-image-sharing-tool.at-orientation-horizontal .at-share-btn{display:inline-block}.at-image-sharing-tool.at-image-sharing-tool-size-big .at-icon{width:43px;height:43px}.at-image-sharing-tool.at-image-sharing-tool-size-mobile .at-share-btn{margin:0!important}.at-image-sharing-tool.at-image-sharing-tool-size-mobile .at-icon-wrapper{height:60px;width:100%;border-radius:0!important}.at-image-sharing-tool.at-image-sharing-tool-size-mobile .at-icon{max-width:100%;height:54px!important;width:54px!important}.at-image-sharing-tool .at-custom-shape.at-image-sharing-tool-btns{margin-right:8px;margin-bottom:8px}.at-image-sharing-tool .at-custom-shape .at-share-btn{margin-top:8px;margin-left:8px}.at-image-sharing-tool .at-share-btn{line-height:0;text-decoration:none;transition:none;box-sizing:content-box}.at-image-sharing-tool .at-icon-wrapper{text-align:center;height:100%;width:100%}.at-image-sharing-tool .at-icon{vertical-align:top;width:2pc;height:2pc;margin:3px}</style><style type="text/css">.at-expanding-share-button{box-sizing:border-box;position:fixed;z-index:9999}.at-expanding-share-button[data-position=bottom-right]{bottom:10px;right:10px}.at-expanding-share-button[data-position=bottom-right] .at-expanding-share-button-toggle-bg,.at-expanding-share-button[data-position=bottom-right] .at-expanding-share-button-toggle-btn[data-name]:after,.at-expanding-share-button[data-position=bottom-right] .at-icon-wrapper,.at-expanding-share-button[data-position=bottom-right] [data-name]:after{float:right}.at-expanding-share-button[data-position=bottom-right] [data-name]:after{margin-right:10px}.at-expanding-share-button[data-position=bottom-right] .at-expanding-share-button-toggle-btn[data-name]:after{margin-right:5px}.at-expanding-share-button[data-position=bottom-right] .at-icon-wrapper{margin-right:-3px}.at-expanding-share-button[data-position=bottom-left]{bottom:10px;left:10px}.at-expanding-share-button[data-position=bottom-left] .at-expanding-share-button-toggle-bg,.at-expanding-share-button[data-position=bottom-left] .at-expanding-share-button-toggle-btn[data-name]:after,.at-expanding-share-button[data-position=bottom-left] .at-icon-wrapper,.at-expanding-share-button[data-position=bottom-left] [data-name]:after{float:left}.at-expanding-share-button[data-position=bottom-left] [data-name]:after{margin-left:10px}.at-expanding-share-button[data-position=bottom-left] .at-expanding-share-button-toggle-btn[data-name]:after{margin-left:5px}.at-expanding-share-button *,.at-expanding-share-button :after,.at-expanding-share-button :before{box-sizing:border-box}.at-expanding-share-button .at-expanding-share-button-services-list{display:none;list-style:none;margin:0 5px;overflow:visible;padding:0}.at-expanding-share-button .at-expanding-share-button-services-list>li{display:block;height:45px;position:relative;overflow:visible}.at-expanding-share-button .at-expanding-share-button-toggle-btn,.at-expanding-share-button .at-share-btn{transition:.1s;text-decoration:none}.at-expanding-share-button .at-share-btn{display:block;height:40px;padding:0 3px 0 0}.at-expanding-share-button .at-expanding-share-button-toggle-btn{position:relative;overflow:auto}.at-expanding-share-button .at-expanding-share-button-toggle-btn.at-expanding-share-button-hidden[data-name]:after{display:none}.at-expanding-share-button .at-expanding-share-button-toggle-bg{box-shadow:0 2px 4px 0 rgba(0,0,0,.3);border-radius:50%;position:relative}.at-expanding-share-button .at-expanding-share-button-toggle-bg>span{background-image:url("data:image/svg+xml,%3Csvg%20width%3D%2232px%22%20height%3D%2232px%22%20viewBox%3D%220%200%2032%2032%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Ctitle%3Eshare%3C%2Ftitle%3E%3Cg%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%23FFFFFF%22%3E%3Cpath%20d%3D%22M26%2C13.4285714%20C26%2C13.6220248%2025.9293162%2C13.7894338%2025.7879464%2C13.9308036%20L20.0736607%2C19.6450893%20C19.932291%2C19.786459%2019.7648819%2C19.8571429%2019.5714286%2C19.8571429%20C19.3779752%2C19.8571429%2019.2105662%2C19.786459%2019.0691964%2C19.6450893%20C18.9278267%2C19.5037195%2018.8571429%2C19.3363105%2018.8571429%2C19.1428571%20L18.8571429%2C16.2857143%20L16.3571429%2C16.2857143%20C15.6279725%2C16.2857143%2014.9750773%2C16.3080355%2014.3984375%2C16.3526786%20C13.8217977%2C16.3973217%2013.2488868%2C16.477306%2012.6796875%2C16.5926339%20C12.1104882%2C16.7079619%2011.6157015%2C16.8660704%2011.1953125%2C17.0669643%20C10.7749235%2C17.2678581%2010.3824423%2C17.5264121%2010.0178571%2C17.8426339%20C9.65327199%2C18.1588557%209.35565592%2C18.534596%209.125%2C18.9698661%20C8.89434408%2C19.4051361%208.71391434%2C19.9203839%208.58370536%2C20.515625%20C8.45349637%2C21.1108661%208.38839286%2C21.7842224%208.38839286%2C22.5357143%20C8.38839286%2C22.9449425%208.40699386%2C23.4025272%208.44419643%2C23.9084821%20C8.44419643%2C23.9531252%208.45349693%2C24.0405499%208.47209821%2C24.1707589%20C8.4906995%2C24.3009679%208.5%2C24.3995532%208.5%2C24.4665179%20C8.5%2C24.5781256%208.46837829%2C24.6711306%208.40513393%2C24.7455357%20C8.34188956%2C24.8199408%208.25446484%2C24.8571429%208.14285714%2C24.8571429%20C8.02380893%2C24.8571429%207.9196433%2C24.7938994%207.83035714%2C24.6674107%20C7.77827355%2C24.6004461%207.72991094%2C24.5186017%207.68526786%2C24.421875%20C7.64062478%2C24.3251483%207.59040206%2C24.2135423%207.53459821%2C24.0870536%20C7.47879436%2C23.9605648%207.43973225%2C23.87128%207.41741071%2C23.8191964%20C6.47246551%2C21.6986501%206%2C20.0208395%206%2C18.7857143%20C6%2C17.3050521%206.19717065%2C16.0662252%206.59151786%2C15.0691964%20C7.79688103%2C12.0706695%2011.0520568%2C10.5714286%2016.3571429%2C10.5714286%20L18.8571429%2C10.5714286%20L18.8571429%2C7.71428571%20C18.8571429%2C7.52083237%2018.9278267%2C7.35342333%2019.0691964%2C7.21205357%20C19.2105662%2C7.07068382%2019.3779752%2C7%2019.5714286%2C7%20C19.7648819%2C7%2019.932291%2C7.07068382%2020.0736607%2C7.21205357%20L25.7879464%2C12.9263393%20C25.9293162%2C13.067709%2026%2C13.2351181%2026%2C13.4285714%20L26%2C13.4285714%20Z%22%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");background-position:center center;background-repeat:no-repeat;transition:transform .4s ease;border-radius:50%;display:block}.at-expanding-share-button .at-icon-wrapper{box-shadow:0 2px 4px 0 rgba(0,0,0,.3);border-radius:50%;display:inline-block;height:40px;line-height:40px;text-align:center;width:40px}.at-expanding-share-button .at-icon{display:inline-block;height:34px;margin:3px 0;vertical-align:top;width:34px}.at-expanding-share-button [data-name]:after{box-shadow:0 2px 4px 0 rgba(0,0,0,.3);-webkit-transform:translate(0, -50%);transform:translate(0, -50%);transition:.4s;background-color:#fff;border-radius:3px;color:#666;content:attr(data-name);font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:9pt;line-height:9pt;font-weight:500;opacity:0;padding:3px 5px;position:relative;top:20px;white-space:nowrap}.at-expanding-share-button.at-expanding-share-button-show-icons .at-expanding-share-button-services-list{display:block}.at-expanding-share-button.at-expanding-share-button-animate-in .at-expanding-share-button-toggle-bg>span{-webkit-transform:rotate(270deg);transform:rotate(270deg);background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewBox%3D%220%200%2032%2032%22%3E%3Cg%3E%3Cpath%20d%3D%22M18%2014V8h-4v6H8v4h6v6h4v-6h6v-4h-6z%22%20fill-rule%3D%22evenodd%22%20fill%3D%22white%22%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fsvg%3E");background-position:center center;background-repeat:no-repeat}.at-expanding-share-button.at-expanding-share-button-animate-in [data-name]:after{opacity:1}.at-expanding-share-button.at-hide-label [data-name]:after{display:none}.at-expanding-share-button.at-expanding-share-button-desktop .at-expanding-share-button-toggle{height:50px}.at-expanding-share-button.at-expanding-share-button-desktop .at-icon-wrapper:hover{box-shadow:0 2px 5px 0 rgba(0,0,0,.5)}.at-expanding-share-button.at-expanding-share-button-desktop .at-expanding-share-button-toggle-bg{height:50px;line-height:50px;width:50px}.at-expanding-share-button.at-expanding-share-button-desktop .at-expanding-share-button-toggle-bg>span{height:50px;width:50px}.at-expanding-share-button.at-expanding-share-button-desktop .at-expanding-share-button-toggle-bg:after{box-shadow:0 2px 5px 0 rgba(0,0,0,.2);transition:opacity .2s ease;border-radius:50%;content:'';height:100%;opacity:0;position:absolute;top:0;left:0;width:100%}.at-expanding-share-button.at-expanding-share-button-desktop .at-expanding-share-button-toggle-bg:hover:after{opacity:1}.at-expanding-share-button.at-expanding-share-button-desktop .at-expanding-share-button-toggle-btn[data-name]:after{top:25px}.at-expanding-share-button.at-expanding-share-button-mobile .at-expanding-share-button-services-list{margin:0}.at-expanding-share-button.at-expanding-share-button-mobile .at-expanding-share-button-toggle-btn,.at-expanding-share-button.at-expanding-share-button-mobile .at-share-btn{outline:0}.at-expanding-share-button.at-expanding-share-button-mobile .at-expanding-share-button-toggle{height:40px;-webkit-tap-highlight-color:transparent}.at-expanding-share-button.at-expanding-share-button-mobile .at-expanding-share-button-toggle-bg,.at-expanding-share-button.at-expanding-share-button-mobile .at-expanding-share-button-toggle-bg span{height:40px;line-height:40px;width:40px}.at-expanding-share-button.at-expanding-share-button-mobile .at-expanding-share-button-click-flash{-webkit-transform:scale(0);transform:scale(0);transition:transform ease,opacity ease-in;background-color:hsla(0,0%,100%,.3);border-radius:50%;height:40px;opacity:1;position:absolute;width:40px;z-index:10000}.at-expanding-share-button.at-expanding-share-button-mobile .at-expanding-share-button-click-flash.at-expanding-share-button-click-flash-animate{-webkit-transform:scale(1);transform:scale(1);opacity:0}.at-expanding-share-button.at-expanding-share-button-mobile+.at-expanding-share-button-mobile-overlay{transition:opacity ease;bottom:0;background-color:hsla(0,0%,87%,.7);display:block;height:auto;left:0;opacity:0;position:fixed;right:0;top:0;width:auto;z-index:9998}.at-expanding-share-button.at-expanding-share-button-mobile+.at-expanding-share-button-mobile-overlay.at-expanding-share-button-hidden{height:0;width:0;z-index:-10000}.at-expanding-share-button.at-expanding-share-button-mobile.at-expanding-share-button-animate-in+.at-expanding-share-button-mobile-overlay{transition:opacity ease;opacity:1}</style><style type="text/css">.at-tjin-element .at300b,.at-tjin-element .at300m{display:inline-block;width:auto;padding:0;margin:0 2px 5px;outline-offset:-1px;transition:all .2s ease-in-out}.at-tjin-element .at300b:focus,.at-tjin-element .at300b:hover,.at-tjin-element .at300m:focus,.at-tjin-element .at300m:hover{-webkit-transform:translateY(-4px);transform:translateY(-4px)}.at-tjin-element .addthis_tjin_label{display:none}.at-tjin-element .addthis_vertical_style .at300b,.at-tjin-element .addthis_vertical_style .at300m{display:block}.at-tjin-element .addthis_vertical_style .at300b .addthis_tjin_label,.at-tjin-element .addthis_vertical_style .at300b .at-icon-wrapper,.at-tjin-element .addthis_vertical_style .at300m .addthis_tjin_label,.at-tjin-element .addthis_vertical_style .at300m .at-icon-wrapper{display:inline-block;vertical-align:middle;margin-right:5px}.at-tjin-element .addthis_vertical_style .at300b:focus,.at-tjin-element .addthis_vertical_style .at300b:hover,.at-tjin-element .addthis_vertical_style .at300m:focus,.at-tjin-element .addthis_vertical_style .at300m:hover{-webkit-transform:none;transform:none}.at-tjin-element .at-tjin-btn{margin:0 5px 5px 0;padding:0;outline-offset:-1px;display:inline-block;box-sizing:content-box;transition:all .2s ease-in-out}.at-tjin-element .at-tjin-btn:focus,.at-tjin-element .at-tjin-btn:hover{-webkit-transform:translateY(-4px);transform:translateY(-4px)}.at-tjin-element .at-tjin-title{margin:0 0 15px}</style><style type="text/css">#addthissmartlayerscssready{color:#bada55!important}.addthis-smartlayers,div#at4-follow,div#at4-share,div#at4-thankyou,div#at4-whatsnext{padding:0;margin:0}#at4-follow-label,#at4-share-label,#at4-whatsnext-label,.at4-recommended-label.hidden{padding:0;border:none;background:none;position:absolute;top:0;left:0;height:0;width:0;overflow:hidden;text-indent:-9999em}.addthis-smartlayers .at4-arrow:hover{cursor:pointer}.addthis-smartlayers .at4-arrow:after,.addthis-smartlayers .at4-arrow:before{content:none}a.at4-logo{background:url(data:image/gif;base64,R0lGODlhBwAHAJEAAP9uQf///wAAAAAAACH5BAkKAAIALAAAAAAHAAcAAAILFH6Ge8EBH2MKiQIAOw==) no-repeat left center}.at4-minimal a.at4-logo{background:url(data:image/gif;base64,R0lGODlhBwAHAJEAAP9uQf///wAAAAAAACH5BAkKAAIALAAAAAAHAAcAAAILFH6Ge8EBH2MKiQIAOw==) no-repeat left center!important}button.at4-closebutton{position:absolute;top:0;right:0;padding:0;margin-right:10px;cursor:pointer;background:transparent;border:0;-webkit-appearance:none;font-size:19px;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.2}button.at4-closebutton:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.5}div.at4-arrow{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAoCAYAAABpYH0BAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAV1JREFUeNrsmesOgyAMhQfxwfrofTM3E10ME2i5Oeppwr9a5OMUCrh1XV+wcvNAAIAA+BiAzrmtUWln27dbjEcC3AdODfo0BdEPhmcO4nIDvDNELi2jggk4/k8dT7skfeKzWIEd4VUpMQKvNB7X+OZSmAZkATWC1xvipbpnLmOosbJZC08CkAeA4E6qFUEMwLAGnlSBPCE8lW8CYnZTcimH2HoT7kSFOx5HBmCnDhTIu1p5s98G+QZrxGPhZVMY1vgyAQaAAAiAAAgDQACcBOD+BvJtBWfRy7NpJK5tBe4FNzXokywV734wPHMQlxvgnSGyNoUP/2ACjv/7iSeYKO3YWKzAjvCqlBiBVxqPa3ynexNJwOsN8TJbzL6JNIYYXWpMv4lIIAZgWANPqkCeEJ7KNwExu8lpLlSpAVQarO77TyKdBsyRPuwV0h0gmoGnTWFYzVkYBoAA+I/2FmAAt6+b5XM9mFkAAAAASUVORK5CYII=);background-repeat:no-repeat;width:20px;height:20px;margin:0;padding:0;overflow:hidden;text-indent:-9999em;text-align:left;cursor:pointer}#at4-recommendedpanel-outer-container .at4-arrow.at-right,div.at4-arrow.at-right{background-position:-20px 0}#at4-recommendedpanel-outer-container .at4-arrow.at-left,div.at4-arrow.at-left{background-position:0 0}div.at4-arrow.at-down{background-position:-60px 0}div.at4-arrow.at-up{background-position:-40px 0}.ats-dark div.at4-arrow.at-right{background-position:-20px -20px}.ats-dark div.at4-arrow.at-left{background-position:0 -20px}.ats-dark div.at4-arrow.at-down{background-position:-60px -20px}.ats-dark div.at4-arrow.at-up{background-position:-40px -20}.at4-opacity-hidden{opacity:0!important}.at4-opacity-visible{opacity:1!important}.at4-visually-hidden{position:absolute;clip:rect(1px,1px,1px,1px);padding:0;border:0;overflow:hidden}.at4-hidden-off-screen,.at4-hidden-off-screen *{position:absolute!important;top:-9999px!important;left:-9999px!important}.at4-show{display:block!important;opacity:1!important}.at4-show-content{opacity:1!important;visibility:visible}.at4-hide{display:none!important;opacity:0!important}.at4-hide-content{opacity:0!important;visibility:hidden}.at4-visible{display:block!important;opacity:0!important}.at-wordpress-hide{display:none!important;opacity:0!important}.addthis-animated{-webkit-animation-fill-mode:both;animation-fill-mode:both;animation-timing-function:ease-out;-webkit-animation-duration:.3s;animation-duration:.3s}.slideInDown.addthis-animated,.slideInLeft.addthis-animated,.slideInRight.addthis-animated,.slideInUp.addthis-animated,.slideOutDown.addthis-animated,.slideOutLeft.addthis-animated,.slideOutRight.addthis-animated,.slideOutUp.addthis-animated{-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn{-webkit-animation-name:fadeIn;animation-name:fadeIn}@-webkit-keyframes fadeInUp{0%{opacity:0;-webkit-transform:translateY(20px)}to{opacity:1;-webkit-transform:translateY(0)}}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.fadeInUp{-webkit-animation-name:fadeInUp;animation-name:fadeInUp}@-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translateY(-20px)}to{opacity:1;-webkit-transform:translateY(0)}}@keyframes fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.fadeInDown{-webkit-animation-name:fadeInDown;animation-name:fadeInDown}@-webkit-keyframes fadeInLeft{0%{opacity:0;-webkit-transform:translateX(-20px)}to{opacity:1;-webkit-transform:translateX(0)}}@keyframes fadeInLeft{0%{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}.fadeInLeft{-webkit-animation-name:fadeInLeft;animation-name:fadeInLeft}@-webkit-keyframes fadeInRight{0%{opacity:0;-webkit-transform:translateX(20px)}to{opacity:1;-webkit-transform:translateX(0)}}@keyframes fadeInRight{0%{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}.fadeInRight{-webkit-animation-name:fadeInRight;animation-name:fadeInRight}@-webkit-keyframes fadeOut{0%{opacity:1}to{opacity:0}}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.fadeOut{-webkit-animation-name:fadeOut;animation-name:fadeOut}@-webkit-keyframes fadeOutUp{0%{opacity:1;-webkit-transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(-20px)}}@keyframes fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}.fadeOutUp{-webkit-animation-name:fadeOutUp;animation-name:fadeOutUp}@-webkit-keyframes fadeOutDown{0%{opacity:1;-webkit-transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(20px)}}@keyframes fadeOutDown{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(20px)}}.fadeOutDown{-webkit-animation-name:fadeOutDown;animation-name:fadeOutDown}@-webkit-keyframes fadeOutLeft{0%{opacity:1;-webkit-transform:translateX(0)}to{opacity:0;-webkit-transform:translateX(-20px)}}@keyframes fadeOutLeft{0%{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(-20px)}}.fadeOutLeft{-webkit-animation-name:fadeOutLeft;animation-name:fadeOutLeft}@-webkit-keyframes fadeOutRight{0%{opacity:1;-webkit-transform:translateX(0)}to{opacity:0;-webkit-transform:translateX(20px)}}@keyframes fadeOutRight{0%{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(20px)}}.fadeOutRight{-webkit-animation-name:fadeOutRight;animation-name:fadeOutRight}@-webkit-keyframes slideInUp{0%{-webkit-transform:translateY(1500px)}0%,to{opacity:1}to{-webkit-transform:translateY(0)}}@keyframes slideInUp{0%{transform:translateY(1500px)}0%,to{opacity:1}to{transform:translateY(0)}}.slideInUp{-webkit-animation-name:slideInUp;animation-name:slideInUp}.slideInUp.addthis-animated{-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes slideInDown{0%{-webkit-transform:translateY(-850px)}0%,to{opacity:1}to{-webkit-transform:translateY(0)}}@keyframes slideInDown{0%{transform:translateY(-850px)}0%,to{opacity:1}to{transform:translateY(0)}}.slideInDown{-webkit-animation-name:slideInDown;animation-name:slideInDown}@-webkit-keyframes slideOutUp{0%{-webkit-transform:translateY(0)}0%,to{opacity:1}to{-webkit-transform:translateY(-250px)}}@keyframes slideOutUp{0%{transform:translateY(0)}0%,to{opacity:1}to{transform:translateY(-250px)}}.slideOutUp{-webkit-animation-name:slideOutUp;animation-name:slideOutUp}@-webkit-keyframes slideOutUpFast{0%{-webkit-transform:translateY(0)}0%,to{opacity:1}to{-webkit-transform:translateY(-1250px)}}@keyframes slideOutUpFast{0%{transform:translateY(0)}0%,to{opacity:1}to{transform:translateY(-1250px)}}#at4m-menu.slideOutUp{-webkit-animation-name:slideOutUpFast;animation-name:slideOutUpFast}@-webkit-keyframes slideOutDown{0%{-webkit-transform:translateY(0)}0%,to{opacity:1}to{-webkit-transform:translateY(350px)}}@keyframes slideOutDown{0%{transform:translateY(0)}0%,to{opacity:1}to{transform:translateY(350px)}}.slideOutDown{-webkit-animation-name:slideOutDown;animation-name:slideOutDown}@-webkit-keyframes slideOutDownFast{0%{-webkit-transform:translateY(0)}0%,to{opacity:1}to{-webkit-transform:translateY(1250px)}}@keyframes slideOutDownFast{0%{transform:translateY(0)}0%,to{opacity:1}to{transform:translateY(1250px)}}#at4m-menu.slideOutDown{-webkit-animation-name:slideOutDownFast;animation-name:slideOutDownFast}@-webkit-keyframes slideInLeft{0%{opacity:0;-webkit-transform:translateX(-850px);transform:translateX(-850px)}to{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes slideInLeft{0%{opacity:0;-webkit-transform:translateX(-850px);transform:translateX(-850px)}to{-webkit-transform:translateX(0);transform:translateX(0)}}.slideInLeft{-webkit-animation-name:slideInLeft;animation-name:slideInLeft}@-webkit-keyframes slideInRight{0%{opacity:0;-webkit-transform:translateX(1250px);transform:translateX(1250px)}to{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes slideInRight{0%{opacity:0;-webkit-transform:translateX(1250px);transform:translateX(1250px)}to{-webkit-transform:translateX(0);transform:translateX(0)}}.slideInRight{-webkit-animation-name:slideInRight;animation-name:slideInRight}@-webkit-keyframes slideOutLeft{0%{-webkit-transform:translateX(0);transform:translateX(0)}to{opacity:0;-webkit-transform:translateX(-250px);transform:translateX(-250px)}}@keyframes slideOutLeft{0%{-webkit-transform:translateX(0);transform:translateX(0)}to{opacity:0;-webkit-transform:translateX(-350px);transform:translateX(-350px)}}.slideOutLeft{-webkit-animation-name:slideOutLeft;animation-name:slideOutLeft}@-webkit-keyframes slideOutRight{0%{-webkit-transform:translateX(0);transform:translateX(0)}to{opacity:0;-webkit-transform:translateX(350px);transform:translateX(350px)}}@keyframes slideOutRight{0%{-webkit-transform:translateX(0);transform:translateX(0)}to{opacity:0;-webkit-transform:translateX(350px);transform:translateX(350px)}}.slideOutRight{-webkit-animation-name:slideOutRight;animation-name:slideOutRight}.at4win{margin:0 auto;background:#fff;border:1px solid #ebeced;width:25pc;box-shadow:0 0 10px rgba(0,0,0,.3);border-radius:8px;font-family:helvetica neue,helvetica,arial,sans-serif;text-align:left;z-index:9999}.at4win .at4win-header{position:relative;border-bottom:1px solid #f2f2f2;background:#fff;height:49px;-webkit-border-top-left-radius:8px;-webkit-border-top-right-radius:8px;-moz-border-radius-topleft:8px;-moz-border-radius-topright:8px;border-top-left-radius:8px;border-top-right-radius:8px;cursor:default}.at4win .at4win-header .at-h3,.at4win .at4win-header h3{height:49px;line-height:49px;margin:0 50px 0 0;padding:1px 0 0;margin-left:20px;font-family:helvetica neue,helvetica,arial,sans-serif;font-size:1pc;font-weight:700;text-shadow:0 1px #fff;color:#333}.at4win .at4win-header .at-h3 img,.at4win .at4win-header h3 img{display:inline-block;margin-right:4px}.at4win .at4win-header .at4-close{display:block;position:absolute;top:0;right:0;background:url("data:image/gif;base64,R0lGODlhFAAUAIABAAAAAP///yH5BAEAAAEALAAAAAAUABQAAAIzBIKpG+YMm5Enpodw1HlCfnkKOIqU1VXk55goVb2hi7Y0q95lfG70uurNaqLgTviyyUoFADs=") no-repeat center center;background-repeat:no-repeat;background-position:center center;border-left:1px solid #d2d2d1;width:49px;height:49px;line-height:49px;overflow:hidden;text-indent:-9999px;text-shadow:none;cursor:pointer;opacity:.5;border:0;transition:opacity .15s ease-in}.at4win .at4win-header .at4-close::-moz-focus-inner{border:0;padding:0}.at4win .at4win-header .at4-close:hover{opacity:1;background-color:#ebeced;border-top-right-radius:7px}.at4win .at4win-content{position:relative;background:#fff;min-height:220px}#at4win-footer{position:relative;background:#fff;border-top:1px solid #d2d2d1;-webkit-border-bottom-right-radius:8px;-webkit-border-bottom-left-radius:8px;-moz-border-radius-bottomright:8px;-moz-border-radius-bottomleft:8px;border-bottom-right-radius:8px;border-bottom-left-radius:8px;height:11px;line-height:11px;padding:5px 20px;font-size:11px;color:#666;-ms-box-sizing:content-box;-o-box-sizing:content-box;box-sizing:content-box}#at4win-footer a{margin-right:10px;text-decoration:none;color:#666}#at4win-footer a:hover{text-decoration:none;color:#000}#at4win-footer a.at4-logo{top:5px;padding-left:10px}#at4win-footer a.at4-privacy{position:absolute;top:5px;right:10px;padding-right:14px}.at4win.ats-dark{border-color:#555;box-shadow:none}.at4win.ats-dark .at4win-header{background:#1b1b1b;-webkit-border-top-left-radius:6px;-webkit-border-top-right-radius:6px;-moz-border-radius-topleft:6px;-moz-border-radius-topright:6px;border-top-left-radius:6px;border-top-right-radius:6px}.at4win.ats-dark .at4win-header .at4-close{background:url("data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTEvMTMvMTKswDp5AAAAd0lEQVQ4jb2VQRLAIAgDE///Z3qqY1FAhalHMCsCIkVEAIAkkVgvp2lDBgYAnAyHkWotLccNrEd4A7X2TqIdqLfnWBAdaF5rJdyJfjtPH5GT37CaGhoVq3nOm/XflUuLUto2pY1d+vRKh0Pp+MrAVtDe2JkvYNQ+jVSEEFmOkggAAAAASUVORK5CYII=") no-repeat center center;background-image:url(//s7.addthis.com/static/fb08f6d50887bd0caacc86a62bcdcf68.svg),none;border-color:#333}.at4win.ats-dark .at4win-header .at4-close:hover{background-color:#000}.at4win.ats-dark .at4win-header .at-h3,.at4win.ats-dark .at4win-header h3{color:#fff;text-shadow:0 1px #000}.at4win.ats-gray .at4win-header{background:#fff;border-color:#d2d2d1;-webkit-border-top-left-radius:6px;-webkit-border-top-right-radius:6px;-moz-border-radius-topleft:6px;-moz-border-radius-topright:6px;border-top-left-radius:6px;border-top-right-radius:6px}.at4win.ats-gray .at4win-header a.at4-close{border-color:#d2d2d1}.at4win.ats-gray .at4win-header a.at4-close:hover{background-color:#ebeced}.at4win.ats-gray #at4win-footer{border-color:#ebeced}.at4win .clear{clear:both}.at4win ::selection{background:#fe6d4c;color:#fff}.at4win ::-moz-selection{background:#fe6d4c;color:#fff}.at4-icon-fw{display:inline-block;background-repeat:no-repeat;background-position:0 0;margin:0 5px 0 0;overflow:hidden;text-indent:-9999em;cursor:pointer;padding:0;border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%}.at44-follow-container a.aticon{height:2pc;margin:0 5px 5px 0}.at44-follow-container .at4-icon-fw{margin:0}</style></head>
<body class="course oc-body is-connected">
<div id="react_root"></div>
<script id="_EVENTS-IDENTIFY" type="application/json">
        {
            "type": "identify",
            "userId": "557391",
            "properties": {
                "age": "",
                "name": "Christian Nzuzi",
                "createdAt": "2012-12-15T23:27:04+01:00",
                "email": "christian.nzuzi@gmail.com",
                "gender": "M",
                "premium": true,
                "premiumType": "Premium Solo",
                "locale": "fr",
                "language": "fr"
            },
            "integrations": {
                "HubSpot": false
            }
        }
    </script>
<script id="_EVENTS-PAGE" type="application/json">
        {
            "type": "page",
            "integrations": {
                "HubSpot": false
            }
        }
    </script>
<header id="oc-header" class="js-tabs-mobile mainHeader mainHeader--loggedUser mainHeader--premiumSolo" data-widget="tabs">
<!--[if lt IE 10]>
<div class="disclaimer  disclaimer-error">
    Vous utilisez un navigateur obsolète, veuillez le <a href="https://browser-update.org/update.html">mettre à jour</a>.
</div>
<![endif]-->

<div id="ie-ten-disclaimer" class="disclaimer disclaimer-error" style="display:none">
Vous utilisez un navigateur obsolète, veuillez le <a href="https://browser-update.org/update.html">mettre à jour</a>.
</div>
<script>
    if (document.documentMode === 10) {
        document.getElementById('ie-ten-disclaimer').style.display = 'block';
    }
</script>

<noscript>
    &lt;div class="disclaimer  disclaimer--error"&gt;
        Veuillez utiliser un &lt;a href="https://browser-update.org/update.html"&gt;navigateur internet moderne&lt;/a&gt; avec JavaScript activé pour naviguer sur OpenClassrooms.com
    &lt;/div&gt;
</noscript>
<div class="disclaimer  disclaimer--info  js-cookie-disclaimer" data-widget="dismissibleElement">
<div class="disclaimer__wrapper">
<span class="disclaimer__content">
Bienvenue sur OpenClassrooms ! En poursuivant votre navigation, vous acceptez l'utilisation de cookies. <a href="https://openclassrooms.com/privacy-policy#personal-data-gathering">En savoir plus</a>
</span>
<span class="disclaimer__actions">
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#" class="disclaimer__button  js-close-button">ok</a>
</span>
</div>
</div>
<div class="mainHeader__wrapper">
<div class="mainHeader__inner">
<a href="https://openclassrooms.com/" class="mainHeader__logo" title="OpenClassrooms.com">
OpenClassrooms.com
</a>
<div class="mainHeader__content">
<div id="tab-main" class="mainHeader__tabs">
<div class="mainHeader__container mainHeader__container--mainMenu">
<nav>
<ul class="mainTopNav">
<li class="mainTopNav__itemContainer">
<a class="mainTopNav__item" href="https://openclassrooms.com/paths">Parcours</a>
</li>
<li class="mainTopNav__itemContainer">
<a class="mainTopNav__item" href="https://openclassrooms.com/courses">Cours</a>
</li>
<li class="mainTopNav__itemContainer">
<a class="mainTopNav__item" href="https://openclassrooms.com/forum/">Forums</a>
</li>
<li class="mainTopNav__itemContainer">
<a class="mainTopNav__item" href="https://openclassrooms.com/premium">Premium</a>
</li>
<li class="mainTopNav__itemContainer">
<a class="mainTopNav__item u--colorBusiness" href="https://openclassrooms.com/for-business">For Business</a>
</li>
</ul>
</nav>
</div>
<div class="mainHeader__container  mainHeader__container--search">
<div id="tab-search" class="mainHeader__search  js-header-searchContainer"><div class="js-courseSearch  topSearchBox" data-widget="courseSearch">
<form tabindex="0" class="js-courseSearch-form  oc-form" action="https://openclassrooms.com/courses" method="get">
<div class="js-courseSearch-inputGroup oc-form__widget  inputGroup topSearchBox__inner u--block">
<i class="topSearchBox__icon icon-search"></i>
<input id="algolia-search-input" type="search" class="js-courseSearch-input oc-form__control inputGroup__input topSearchBox__input" title="Rechercher" autocomplete="off" data-option_source="https://openclassrooms.com/components/courses/search?q=&lt;%= term %&gt;" placeholder="Rechercher" aria-label="Rechercher" name="q">
</div>
</form>
</div>
</div>
</div>
<div class="mainHeader__container mainHeader__container--avatar">
<div class="popOut  popOut--rightAlign  popOut--noArrow js-popOut-header" data-tabs-content="#tab-userMenu" data-widget="popOut">
<a class="js-popOut-button  popOut__button" href="https://openclassrooms.com/dashboard" title="Notifications">
<span class="roundImageNotification">
<span class="popOut__notification js-notifications-main"><!-- react-empty: 1 --></span>
<span class="roundImageNotification__image  icoTabs__image  mainHeader__avatar" style="background-image:url(&#39;http://static.mediatropes.info/pmwiki/pub/images/Strider%20Hiryu6505.jpg&#39;)">
Christian Nzuzi
</span>
</span>
</a>
<div class="popOut__content">
<div class="popOut__inner">
<div id="tab-userMenu">
<ul class="popOutList avatarPopout" xmlns="http://www.w3.org/1999/html">
<li class="popOutList__item  avatarPopout__itemPremium">
<a class="popOutList__link" href="https://openclassrooms.com/membres/dizuz-37479">
<i class="popOutList__itemIcon  icon-star  u--colorPremiumSolo"></i>
<strong class="popOutList__linkMain">Christian Nzuzi</strong>
<small class="popOutList__linkSub  avatarPopout__itemPremiumSub  u--colorPremiumSolo">
Premium Solo
</small>
</a>
</li>
<li class="popOutList__item">
<a class="popOutList__link" href="https://openclassrooms.com/dashboard">Tableau de bord</a>
</li>
<li class="popOutList__item">
<a class="popOutList__link" href="https://openclassrooms.com/membres/dizuz-37479/parametres">Mes paramètres</a>
</li>
<li class="popOutList__item">
<a class="popOutList__link" href="https://openclassrooms.com/my-courses">Créer un cours</a>
</li>
<li class="popOutList__item js-notifications-menuPm"><!-- react-empty: 1 --></li>
<li class="popOutList__item">
<a href="https://openclassrooms.com/mp/" class="popOutList__link  ">
<i class="popOutList__itemIcon  icon-letter  "></i>
Aucun message</a>
<script>
    App.notifications.oldPrivateMessages = 0;
</script>
</li>
<li class="popOutList__item">
<a href="https://openclassrooms.com/notifications" class="popOutList__link  ">
<i class="popOutList__itemIcon  icon-alarm  "></i>
Aucune notification</a>
<script>
    App.notifications.forumNotifications = 0;
</script>
</li>
<li class="popOutList__item">
<a class="popOutList__link" href="https://openclassrooms.com/referral/dizuz-37479">
<i class="popOutList__itemIcon  avatarPopout__referralIcon  icon-heart"></i> <span>Parrainer un ami</span>
</a>
</li>
<li class="popOutList__item">
<a class="popOutList__link" href="https://openclassrooms.com/logout?_csrf_token=QUZMOXRGbkHygjee9BD9DxEuNT9M2LVReRv7zTA3tlM">
<i class="popOutList__itemIcon  icon-off"></i> <span>Déconnexion</span>
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<nav role="navigation" class="icoTabs  mainHeader__tabSet">
<div class="mainHeader__mobileNav">
<span class="icoTabs__tab  mainHeader__tabLogin">
<a class="js-tabs-tab  icoTabs__tab" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#tab-userMenu">
<span class="js-popOut-header  popOut  popOut--noArrow" data-widget="popOut">
<span class="js-popOut-button  popOut__button">
<span class="roundImageNotification">
<span class="popOut__notification js-notifications-main"><!-- react-empty: 1 --></span>
<span class="roundImageNotification__image  icoTabs__image  mainHeader__avatar" style="background-image:url(&#39;http://static.mediatropes.info/pmwiki/pub/images/Strider%20Hiryu6505.jpg&#39;)">
Christian Nzuzi
</span>
</span>
</span>
</span>
</a>
</span>
<a class="js-tabs-tab  icoTabs__tab  mainHeader__tabSearch" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#tab-search">
<span class="accessibility-hidden">Rechercher</span>
<i class="icon-search  icoTabs__icon"></i>
</a>
<a class="js-tabs-tab  icoTabs__tab  mainHeader__tabCourseMenu" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#tab-courseMenu">
<span class="accessibility-hidden">Cours</span>
<i class="icon-plus  icoTabs__icon"></i>
</a>
<a class="js-tabs-tab  icoTabs__tab  is-disabled" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#tab-courseEditMenu">
<span class="accessibility-hidden">Créer un cours</span>
<i class="icon-plus  icoTabs__icon"></i>
</a>
<a class="js-tabs-tab  icoTabs__tab  is-disabled" data-tabs-default="true" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#tab-searchMenu">
<span class="accessibility-hidden">Rechercher</span>
<i class="icon-search  icoTabs__icon"></i>
</a>
<a class="js-tabs-tab  icoTabs__tab" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#tab-main">
<span class="accessibility-hidden">Menu principal</span>
<i class="icon-menu  icoTabs__icon"></i>
</a>
</div>
</nav>
<div class="js-tabs-content  mainHeader__content"></div>
</div>
</div>
</header>
<div class="centered">
<div id="mainSearch" class="mainSearch"><div data-reactroot=""><button class="mainSearch__close" aria-label="Bouton fermer"><i class="icon-cross"></i></button><input type="text" class="mainSearch__input" placeholder="Web, Design, etc." aria-label="Chercher un cours"><div class="searchFacetsPopup space-bottom"><div class="searchFacetsPopup__overlay"></div><p class="searchFacetsPopup__selectedCategory"><!-- react-text: 8 -->dans<!-- /react-text --><a class="searchFacetsPopup__selectedCategoryLink"></a></p><div class="searchFacetsPopup__content"><div></div></div></div><a class="mainSearch__uncertificateFilter hidden"><span class="bullet bullet--small bullet--grey bullet--smallIcon"><i class="icon-close"></i></span><!-- react-text: 15 --> <!-- /react-text --><!-- react-text: 16 -->avec les cours non certifiants<!-- /react-text --></a><div></div><div></div><p class="space-top"><!-- react-text: 20 -->Voir aussi les<!-- /react-text --><!-- react-text: 21 --> <!-- /react-text --><a><!-- react-text: 23 -->...<!-- /react-text --><!-- react-text: 24 --> <!-- /react-text --><!-- react-text: 25 -->cours non certifiants<!-- /react-text --></a><!-- react-text: 26 --> <!-- /react-text --><!-- react-text: 27 -->correspondant à cette recherche<!-- /react-text --></p></div></div>
</div>
<div id="mainContentWithHeader">
<div id="pre-main-part">
<section class="inset no-padding">
<div class="centered">
<h6 class="accessibility-hidden">Fil d'Ariane</h6>
<nav class="breadcrumb">
<ul class="breadcrumb__trail">
<li class="breadcrumb__item breadcrumb__item--home " itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
<a href="https://openclassrooms.com/" itemprop="url">
<span itemprop="title">Accueil</span>
</a>
</li>
<li class="breadcrumb__item  " itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
<a href="https://openclassrooms.com/courses" itemprop="url">
<span itemprop="title">Cours</span>
</a>
</li>
<li class="breadcrumb__item  " itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql?status=published" itemprop="url">
<span itemprop="title">Administrez vos bases de données avec MySQL</span>
</a>
</li>
<li class="breadcrumb__item  breadcrumb__item--current" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
Triggers
</li>
</ul>
</nav>
</div>
</section>
</div>
<div class="claire clearfix">
<article itemscope="" itemtype="http://schema.org/Article">
<header class="course-header" xmlns="http://www.w3.org/1999/html">
<div class="centered"><div class="course-header__topPart"><div class="course-header__info"><a itemprop="url" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql"><h1 data-course-title="Administrez vos bases de données avec MySQL">Administrez vos bases de données avec MySQL</h1></a><span class="course-header__updatedTime visible-l">Mis à jour le mercredi 11 octobre 2017</span></div></div></div><div class="course-header__details-container"><div class="centered"><div class="row"><div class="col12"><div class="course-header__details  iconBar"><div class="course-header__detailsGroup  course-header__detailsGroup--formats iconBar__group"><ul data-option_popinselector="#popin-formats-availables" class="course-types iconBar__list js-course-formats-bar" data-widget="courseFormatsBar"><li class="iconBar__item  course-types__item  js-tooltip" title="Ce cours est visible gratuitement en ligne."><a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql" title="Ce cours est visible gratuitement en ligne."><i class="icon-desktop  course-types__icon"></i><span class="course-header__format-current"></span></a></li><li class="iconBar__item  course-types__item iconBar__item--dimmed js-tooltip" title="Ce cours n&#39;est pas encore en vidéo."><span><i class="icon-video course-types__icon"></i></span></li><li class="iconBar__item  course-types__item  js-tooltip" title="Ce cours existe en livre papier."><a href="http://www.eyrolles.com/Informatique/Livre/administrez-vos-bases-de-donnees-avec-mysql-2e-edition-9791090085671?societe=openclassrooms" target="_blank" title="Ce cours existe en livre papier."><i class="icon-book  course-types__icon"></i></a></li><li class="iconBar__item  course-types__item  js-tooltip" title="Ce cours existe en eBook."><a href="https://openclassrooms.com/ebooks/administrez-vos-bases-de-donnees-avec-mysql" title="Ce cours existe en eBook."><i class="icon-ebook  course-types__icon"></i></a></li><li class="iconBar__item  course-types__item  js-tooltip" title="Vous pouvez obtenir un certificat de réussite à l&#39;issue de ce cours."><a href="https://openclassrooms.com/courses/1959476/certificate_example" target="_blank" title="Vous pouvez obtenir un certificat de réussite à l&#39;issue de ce cours."><i class="icon-badge  course-types__icon"></i></a></li><li class="iconBar__item  course-types__item iconBar__item--dimmed js-tooltip" title="Ce cours n&#39;est pas encore diplômant et ne vous permet pas d&#39;obtenir des crédits universitaires européens (ECTS)."><span><i class="icon-hat  course-types__icon"></i></span></li></ul></div><div class="course-header__detailsGroup  course-header__detailsGroup--info  iconBar__group"><ul class="iconBar__list"><li class="iconBar__item"><i class="icon-duration iconBar__icon js-tooltip" title="Ce cours demande en moyenne 40 heures de travail pour être réussi."></i><span class="iconBar__label">40 heures</span></li><li class="iconBar__item"><i class="icon-level iconBar__icon"></i><span class="iconBar__label">
Moyenne
</span></li></ul></div><div class="course-header__detailsGroup course-header__detailsGroup--licences iconBar__group"><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/2.0"><span class="iconBar__label">Licence</span><ul class="iconBar__list"><li class="iconBar__item"><i class="icon-cc iconBar__icon" title="CC"></i></li><li class="iconBar__item"><i class="icon-ccby iconBar__icon" title="BY"></i></li><li class="iconBar__item"><i class="icon-ccnc iconBar__icon" title="NC"></i></li><li class="iconBar__item"><i class="icon-ccsa iconBar__icon" title="SA"></i></li></ul></a></div></div></div></div></div></div>
<div id="popin-formats-availables" class="popin popin--course-formats-availables">
<i class="popin__close-button icon-close js-close-button"></i>
<div class="course-types course-types--withSpace">
<a class="course-types__item" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql">
<i class="icon-desktop course-types__icon"></i>
</a>
<a class="course-types__item" href="http://www.eyrolles.com/Informatique/Livre/administrez-vos-bases-de-donnees-avec-mysql-2e-edition-9791090085671?societe=openclassrooms">
<i class="icon-book course-types__icon"></i>
</a>
<a class="course-types__item" href="https://openclassrooms.com/ebooks/administrez-vos-bases-de-donnees-avec-mysql">
<i class="icon-ebook course-types__icon"></i>
</a>
<a class="course-types__item" href="https://openclassrooms.com/courses/1959476/certificate_example" target="_blank">
<i class="icon-badge course-types__icon js-close-button"></i>
</a>
<a class="course-types__item" href="https://openclassrooms.com/premium#discover-premium-plus-offer">
<i class="icon-mentor course-types__icon"></i>
</a>
</div>
 <p>Ce cours est visible <a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql">gratuitement en ligne</a>.</p>
<p>
Ce cours existe en livre papier.
</p>
<p>Ce cours existe <a href="https://openclassrooms.com/ebooks/administrez-vos-bases-de-donnees-avec-mysql">en eBook</a>.</p>
<p>
Vous pouvez obtenir un certificat de réussite à l'issue de ce cours.
</p>
<p>
Vous pouvez être <a href="https://openclassrooms.com/premium#discover-premium-plus-offer">accompagné et mentoré par un professeur particulier</a> par visioconférence sur ce cours.
</p>
<a class="button button--primary js-close-button" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#">J'ai tout compris !</a>
</div>
</header>
<div class="centered">
<div class="row">
<div class="col12 col11-s">
<nav class="timeline">
<div class="timeline__inner">
<span class="timeline__iconContainer">
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql" title="Retour sur le sommaire du cours" class="roundIcon timeline__roundIcon">
<i class="icon-home roundIcon__icon"></i>
</a>
</span>
<div class="timeline__steps">
<span class="timeline__splitChapter"></span>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/introduction-14" class="timeline__step" title="Introduction">
<span class="timeline__stepName">
Introduction
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/installation-de-mysql" class="timeline__step" title="Installation de MySQL">
<span class="timeline__stepName">
Installation de MySQL
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/les-types-de-donnees" class="timeline__step" title="Les types de données">
<span class="timeline__stepName">
Les types de données
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/creation-d-une-base-de-donnees" class="timeline__step" title="Création d&#39;une base de données">
<span class="timeline__stepName">
Création d'une base de données
</span>
</a>
 <a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/creation-de-tables" class="timeline__step" title="Création de tables">
<span class="timeline__stepName">
Création de tables
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/modification-d-une-table" class="timeline__step" title="Modification d&#39;une table">
<span class="timeline__stepName">
Modification d'une table
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/insertion-de-donnees" class="timeline__step" title="Insertion de données">
<span class="timeline__stepName">
Insertion de données
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/selection-de-donnees" class="timeline__step" title="Sélection de données">
<span class="timeline__stepName">
Sélection de données
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/elargir-les-possibilites-de-la-clause-where-1" class="timeline__step" title="Élargir les possibilités de la clause WHERE">
<span class="timeline__stepName">
Élargir les possibilités de la clause WHERE
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/suppression-et-modification-de-donnees" class="timeline__step" title="Suppression et modification de données">
<span class="timeline__stepName">
Suppression et modification de données
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercises/297" class="timeline__step" title="Quiz : Quiz 1">
<span class="timeline__stepName">
Quiz : Quiz 1
</span>
</a>
<span class="timeline__splitChapter"></span>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/index-1" class="timeline__step" title="Index">
<span class="timeline__stepName">
Index
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/cles-primaires-et-etrangeres" class="timeline__step" title="Clés primaires et étrangères">
<span class="timeline__stepName">
Clés primaires et étrangères
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/jointures-1" class="timeline__step" title="Jointures">
<span class="timeline__stepName">
Jointures
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/sous-requetes" class="timeline__step" title="Sous-requêtes">
<span class="timeline__stepName">
Sous-requêtes
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/jointures-et-sous-requetes-modification-de-donnees" class="timeline__step" title="Jointures et sous-requêtes : modification de données">
<span class="timeline__stepName">
Jointures et sous-requêtes : modification de données
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/union-de-plusieurs-requetes" class="timeline__step" title="Union de plusieurs requêtes">
<span class="timeline__stepName">
Union de plusieurs requêtes
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/options-des-cles-etrangeres" class="timeline__step" title="Options des clés étrangères">
<span class="timeline__stepName">
Options des clés étrangères
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/violation-de-contrainte-d-unicite" class="timeline__step" title="Violation de contrainte d&#39;unicité">
<span class="timeline__stepName">
Violation de contrainte d'unicité
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercises/298" class="timeline__step" title="Quiz : Quiz 2">
<span class="timeline__stepName">
Quiz : Quiz 2
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercises/299" class="timeline__step" title="Activité : Créez la base de données de votre blog">
<span class="timeline__stepName">
Activité : Créez la base de données de votre blog
</span>
</a>
<span class="timeline__splitChapter"></span>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/rappels-et-introduction" class="timeline__step" title="Rappels et introduction">
<span class="timeline__stepName">
Rappels et introduction
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/fonctions-scalaires" class="timeline__step" title="Fonctions scalaires">
<span class="timeline__stepName">
Fonctions scalaires
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/fonctions-d-agregation" class="timeline__step" title="Fonctions d&#39;agrégation">
<span class="timeline__stepName">
Fonctions d'agrégation
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/regroupement" class="timeline__step" title="Regroupement">
<span class="timeline__stepName">
Regroupement
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercices-sur-les-agregats" class="timeline__step" title="Exercices sur les agrégats">
<span class="timeline__stepName">
Exercices sur les agrégats
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercises/300" class="timeline__step" title="Quiz : Quiz 3">
<span class="timeline__stepName">
Quiz : Quiz 3
</span>
</a>
<span class="timeline__splitChapter"></span>
 <a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/obtenir-la-date-l-heure-actuelle" class="timeline__step" title="Obtenir la date/l&#39;heure actuelle">
<span class="timeline__stepName">
Obtenir la date/l'heure actuelle
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/formater-une-donnee-temporelle" class="timeline__step" title="Formater une donnée temporelle">
<span class="timeline__stepName">
Formater une donnée temporelle
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/calculs-sur-les-donnees-temporelles" class="timeline__step" title="Calculs sur les données temporelles">
<span class="timeline__stepName">
Calculs sur les données temporelles
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercices-17" class="timeline__step" title="Exercices">
<span class="timeline__stepName">
Exercices
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercises/301" class="timeline__step" title="Activité : Sélectionnez des données pour votre blog">
<span class="timeline__stepName">
Activité : Sélectionnez des données pour votre blog
</span>
</a>
<span class="timeline__splitChapter"></span>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/transactions" class="timeline__step" title="Transactions">
<span class="timeline__stepName">
Transactions
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/verrous" class="timeline__step" title="Verrous">
<span class="timeline__stepName">
Verrous
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/requetes-preparees" class="timeline__step" title="Requêtes préparées">
<span class="timeline__stepName">
Requêtes préparées
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/procedures-stockees" class="timeline__step" title="Procédures stockées">
<span class="timeline__stepName">
Procédures stockées
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/structurer-ses-instructions" class="timeline__step" title="Structurer ses instructions">
<span class="timeline__stepName">
Structurer ses instructions
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/gestionnaires-d-erreurs-curseurs-et-utilisation-avancee" class="timeline__step" title="Gestionnaires d&#39;erreurs, curseurs et utilisation avancée">
<span class="timeline__stepName">
Gestionnaires d'erreurs, curseurs et utilisation avancée
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers" class="timeline__step js-current-timeline-step" title="Triggers">
<span class="timeline__stepName">
Triggers
</span>
<span class="timeline__progressMarker"></span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercises/302" class="timeline__step" title="Quiz : Quiz 4">
<span class="timeline__stepName">
Quiz : Quiz 4
</span>
</a>
<span class="timeline__splitChapter"></span>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/vues" class="timeline__step" title="Vues">
<span class="timeline__stepName">
Vues
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/tables-temporaires" class="timeline__step" title="Tables temporaires">
<span class="timeline__stepName">
Tables temporaires
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/vues-materialisees" class="timeline__step" title="Vues matérialisées">
<span class="timeline__stepName">
Vues matérialisées
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercises/303" class="timeline__step" title="Quiz : Quiz 5">
<span class="timeline__stepName">
Quiz : Quiz 5
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercises/304" class="timeline__step" title="Activité : Améliorez la base de données de votre blog">
<span class="timeline__stepName">
Activité : Améliorez la base de données de votre blog
</span>
</a>
<span class="timeline__splitChapter"></span>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/gestion-des-utilisateurs-4" class="timeline__step" title="Gestion des utilisateurs">
<span class="timeline__stepName">
Gestion des utilisateurs
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/informations-sur-la-base-de-donnees-et-les-requetes" class="timeline__step" title="Informations sur la base de données et les requêtes">
<span class="timeline__stepName">
 Informations sur la base de données et les requêtes
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/configuration-et-options" class="timeline__step" title="Configuration et options">
<span class="timeline__stepName">
Configuration et options
</span>
</a>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercises/305" class="timeline__step" title="Quiz : Quiz 6">
<span class="timeline__stepName">
Quiz : Quiz 6
</span>
</a>
<span class="timeline__splitChapter"></span>
</div>
<span class="timeline__iconContainer">
<a href="https://openclassrooms.com/courses/1959476/certificate_example" title="Certificat de réussite (voir un exemple)" class="roundIcon timeline__roundIcon">
<i class="icon-trophy roundIcon__icon"></i>
</a>
</span>
</div>
</nav>
</div>
</div>
</div>
<div class="centered">
<div class="contentWithSidebar  spacer  js-contentWithSidebar" data-widget="contentWithSidebar">
<main class="contentWithSidebar__content">
<div class="relative js-sidebar-container">
<div class="static">
<h2 itemprop="name" data-part-title="Triggers" class="part-title">Triggers</h2>
<section class="row space-bottom js-desktop-sticky-container">
<div class="col9 col11-s col__small-padding--right">
<div itemprop="articleBody" data-page-indentifier="/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers" class="js-isRestrictablePage js-course-container js-smilize js-userCanWatchVideo">
<div class="userContent js-userContent">
<p id="r-1990135" data-claire-element-id="2142078" class="">Les triggers (ou déclencheurs) sont des objets de la base de données. <strong>Attachés à une table</strong>, ils vont <strong>déclencher l'exécution d'une instruction</strong>, ou d'un bloc d'instructions, <strong>lorsqu'une, ou plusieurs lignes sont insérées, supprimées ou modifiées</strong> dans la table à laquelle ils sont attachés.</p><p id="r-1990136" data-claire-element-id="2142079" class="">Dans ce chapitre, nous allons voir comment ils fonctionnent exactement, comment on peut les créer et les supprimer, et surtout, comment on peut s'en servir et quelles sont leurs restrictions.</p><div class="foldable" id="ui-id-1" data-widget="foldable"><h3 id="r-1972601" data-claire-element-id="8570870" class="foldable__button secondTitle js-foldable-button">Principe et usage<i class="foldable__icon icon-next"></i></h3><div class="foldable__content"><h4 id="r-1990151" data-claire-element-id="8570858" class="">Qu'est-ce qu'un trigger ?</h4><p id="r-1990137" data-claire-element-id="2142080" class="">Tout comme les procédures stockées, les triggers servent à exécuter une ou plusieurs instructions. Mais à la différence des procédures, il n'est pas possible d'appeler un trigger : un trigger doit être déclenché par un événement.</p><p id="r-1990138" data-claire-element-id="2142081" class="">Un trigger est <strong>attaché à une table</strong>, et peut <strong>être déclenché</strong> par :</p><ul id="r-1990145" data-claire-element-id="8570857" class=""><li id="r-1990140" data-claire-element-id="8570852"><p id="r-1990139" data-claire-element-id="8570851">une insertion dans la table (requête<code data-claire-semantic="sql">INSERT</code>) ;</p></li><li id="r-1990142" data-claire-element-id="8570854"><p id="r-1990141" data-claire-element-id="8570853">la suppression d'une partie des données de la table (requête<code data-claire-semantic="sql">DELETE</code>) ;</p></li><li id="r-1990144" data-claire-element-id="8570856"><p id="r-1990143" data-claire-element-id="8570855">la modification d'une partie des données de la table (requête<code data-claire-semantic="sql">UPDATE</code>).</p></li></ul><p id="r-1990146" data-claire-element-id="2142089" class="">Par ailleurs, une fois le trigger déclenché, ses instructions peuvent être exécutées soit juste avant l'exécution de l'événement déclencheur, soit juste après.</p><h5 id="r-1990150" data-claire-element-id="2142093" class="">Que fait un trigger ?</h5><p id="r-1990147" data-claire-element-id="2142090" class="">Un trigger exécute un <strong>traitement pour chaque ligne insérée, modifiée ou supprimée</strong> par l'événement déclencheur. Donc si l'on insère cinq lignes, les instructions du trigger seront exécutées cinq fois, chaque itération permettant de traiter les données d'une des lignes insérées.</p><p id="r-1990148" data-claire-element-id="2142091" class="">Les instructions d'un trigger suivent les mêmes principes que les instructions d'une procédure stockée. S'il y a plus d'une instruction, il faut les mettre à l'intérieur d'un bloc d'instructions. Les structures que nous avons vues dans les deux chapitres précédents sont bien sûr utilisables (structures conditionnelles, boucles, gestionnaires d'erreur, etc.), avec toutefois quelques restrictions que nous verrons en fin de chapitre.</p><p id="r-1990149" data-claire-element-id="2142092" class="">Un trigger peut modifier et/ou insérer des données dans n'importe quelle table sauf les tables utilisées dans la requête qui l'a déclenché. En ce qui concerne la table à laquelle le trigger est attaché (qui est forcément utilisée par l'événement déclencheur), le trigger peut lire et modifier uniquement la ligne insérée, modifiée ou supprimée qu'il est en train de traiter.</p><h4 id="r-1990169" data-claire-element-id="8570869">À quoi sert un trigger ?</h4><p id="r-1990152" data-claire-element-id="2142095" class="">On peut faire de nombreuses choses avec un trigger. Voici quelques exemples d'usage fréquent de ces objets. Nous verrons plus loin certains de ces exemples appliqués à notre élevage d'animaux.</p><h5 id="r-1990154" data-claire-element-id="8570860">Contraintes et vérifications de données</h5><p id="r-1990153" data-claire-element-id="8570859" class="">Comme cela a déjà été mentionné dans le chapitre sur les types de données, MySQL n'implémente pas de contraintes d'assertion, qui sont des contraintes permettant de limiter les valeurs acceptées par une colonne (limiter une colonne<code data-claire-semantic="sql">TINYINT</code>à<code data-claire-semantic="sql">TRUE</code>(1) ou<code data-claire-semantic="sql">FALSE</code>(0) par exemple).<br> Avec des triggers se déclenchant avant l'<code data-claire-semantic="sql">INSERT</code>et avant l'<code data-claire-semantic="sql">UPDATE</code>, on peut vérifier les valeurs d'une colonne lors de l'insertion ou de la modification, et les corriger si elles ne font pas partie des valeurs acceptables, ou bien faire échouer la requête. On peut ainsi pallier l'absence de contraintes d'assertion.</p><h5 id="r-1990163" data-claire-element-id="8570866" class="">Intégrité des données</h5><p id="r-1990155" data-claire-element-id="8570861" class="">Les triggers sont parfois utilisés pour remplacer les options des clés étrangères<code data-claire-semantic="sql">ON UPDATE RESTRICT|CASCADE|SET NULL</code>et<code data-claire-semantic="sql">ON DELETE RESTRICT|CASCADE|SET NULL</code>. Notamment pour des tables MyISAM, qui sont non-transactionnelles et ne supportent pas les clés étrangères.<br> Cela peut aussi être utilisé avec des tables transactionnelles, dans les cas où le traitement à appliquer pour garder des données cohérentes est plus complexe que ce qui est permis par les options de clés étrangères.</p><p id="r-1990156" data-claire-element-id="2142099" class="">Par exemple, dans certains systèmes, on veut pouvoir appliquer deux systèmes de suppression :</p><ul id="r-1990161" data-claire-element-id="8570864" class=""><li id="r-1990158" data-claire-element-id="8570863"><p id="r-1990157" data-claire-element-id="8570862">une vraie suppression pure et dure, avec effacement des données, donc une requête<code data-claire-semantic="sql">DELETE</code>;</p></li><li id="r-1990160" data-claire-element-id="2142103"><p id="r-1990159" data-claire-element-id="2142102">un archivage, qui masquera les données dans l'application mais les conservera dans la base de données.</p></li></ul><p id="r-1990162" data-claire-element-id="8570865" class="">Dans ce cas, une solution possible est d'ajouter aux tables contenant des données archivables une colonne <em>archive</em>, pouvant contenir 0 (la ligne n'est pas archivée) ou 1 (la ligne est archivée). Pour une vraie suppression, on peut utiliser simplement un<code data-claire-semantic="sql">ON DELETE RESTRICT|CASCADE|SET NULL</code>, qui se répercutera sur les tables référençant les données supprimées. Par contre, dans le cas d'un archivage, on utilisera plutôt un trigger pour traiter les lignes qui référencent les données archivées, par exemple en les archivant également.</p><h5 id="r-1990165" data-claire-element-id="2142108" class="">Historisation des actions</h5><p id="r-1990164" data-claire-element-id="2142107" class="">On veut parfois garder une trace des actions effectuées sur la base de données, c'est-à-dire par exemple, savoir qui a modifié telle ligne, et quand. Avec les triggers, rien de plus simple, il suffit de mettre à jour des données d'historisation à chaque insertion, modification ou suppression. Soit directement dans la table concernée, soit dans une table utilisée spécialement et exclusivement pour garder un historique des actions.</p><h5 id="r-1990168" data-claire-element-id="8570868" class="">Mise à jour d'informations qui dépendent d'autres données</h5><p id="r-1990166" data-claire-element-id="2142109" class="">Comme pour les procédures stockées, une partie de la logique "business" de l'application peut être codée directement dans la base de données, grâce aux triggers, plutôt que du côté applicatif (en PHP, Java ou quel que soit le langage de programmation utilisé).<br> À nouveau, cela peut permettre d'harmoniser un traitement à travers plusieurs applications utilisant la même base de données.</p><p id="r-1990167" data-claire-element-id="8570867" class="">Par ailleurs, lorsque certaines informations dépendent de la valeur de certaines données, on peut en général les retrouver en faisant une requête<code data-claire-semantic="sql">SELECT</code>. Dans ce cas, il n'est pas indispensable de stocker ces informations. <br> Cependant, utiliser les triggers pour stocker ces informations peut faciliter la vie de l'utilisateur, et peut aussi faire gagner en performance. Par exemple, si l'on a très souvent besoin de cette information, ou si la requête à faire pour trouver cette information est longue à exécuter.<br> C'est typiquement cet usage qui est fait des triggers dans ce qu'on appelle les "vues matérialisées", auxquelles un chapitre est consacré dans la partie 6.</p></div></div><div class="foldable" id="ui-id-2" data-widget="foldable"><h3 id="r-1972679" data-claire-element-id="8570927" class="foldable__button secondTitle js-foldable-button">Création des triggers<i class="foldable__icon icon-next"></i></h3><div class="foldable__content"><h4 id="r-1990199" data-claire-element-id="8570886" class="">Syntaxe</h4><p id="r-1990170" data-claire-element-id="2142114" class="">Pour créer un trigger, on utilise la commande suivante :</p><pre id="r-1990171" data-claire-element-id="6261491" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;CREATE TRIGGER nom_trigger moment_trigger evenement_trigger\nON nom_table FOR EACH ROW\ncorps_trigger;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">nom_trigger</span> <span class="ace_identifier">moment_trigger</span> <span class="ace_identifier">evenement_trigger</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">nom_table</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">corps_trigger</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><ul id="r-1990182" data-claire-element-id="8570881" class=""><li id="r-1990173" data-claire-element-id="8570872"><p id="r-1990172" data-claire-element-id="8570871"><code data-claire-semantic="sql">CREATE TRIGGER nom_trigger</code>: les triggers ont donc un nom.</p></li><li id="r-1990175" data-claire-element-id="8570874"><p id="r-1990174" data-claire-element-id="8570873"><code data-claire-semantic="sql">moment_trigger evenement_trigger</code>: servent à définir quand et comment le trigger est déclenché.</p></li><li id="r-1990177" data-claire-element-id="8570876"><p id="r-1990176" data-claire-element-id="8570875"><code data-claire-semantic="sql">ON nom_table</code>: c'est là qu'on définit à quelle table le trigger est attaché.</p></li><li id="r-1990179" data-claire-element-id="8570878"><p id="r-1990178" data-claire-element-id="8570877"><code data-claire-semantic="sql">FOR EACH ROW</code>: signifie littéralement "pour chaque ligne", sous-entendu "pour chaque ligne insérée/supprimée/modifiée" selon ce qui a déclenché le trigger.</p></li><li id="r-1990181" data-claire-element-id="8570880"><p id="r-1990180" data-claire-element-id="8570879"><code data-claire-semantic="sql">corps_trigger</code>: c'est le contenu du trigger. Comme pour les procédures stockées, il peut s'agir soit d'une seule instruction, soit d'un bloc d'instructions.</p></li></ul><h5 id="r-1990192" data-claire-element-id="8570883" class="">Événement déclencheur</h5><p id="r-1990183" data-claire-element-id="2142127" class="">Trois événements différents peuvent déclencher l'exécution des instructions d'un trigger.</p><ul id="r-1990190" data-claire-element-id="2142134" class=""><li id="r-1990185" data-claire-element-id="2142129"><p id="r-1990184" data-claire-element-id="2142128">L'insertion de lignes (<code data-claire-semantic="sql">INSERT</code>) dans la table attachée au trigger.</p></li><li id="r-1990187" data-claire-element-id="2142131"><p id="r-1990186" data-claire-element-id="2142130">La modification de lignes (<code data-claire-semantic="sql">UPDATE</code>) de cette table.</p></li><li id="r-1990189" data-claire-element-id="2142133"><p id="r-1990188" data-claire-element-id="2142132">La suppression de lignes (<code data-claire-semantic="sql">DELETE</code>) de la table.</p></li></ul><p id="r-1990191" data-claire-element-id="8570882" class="">Un trigger est soit déclenché par<code data-claire-semantic="sql">INSERT</code>, soit par<code data-claire-semantic="sql">UPDATE</code>, soit par<code data-claire-semantic="sql">DELETE</code>. Il ne peut pas être déclenché par deux événements différents. On peut par contre créer plusieurs triggers par table pour couvrir chaque événement.</p><h5 id="r-1990195" data-claire-element-id="8570885" class="">Avant ou après</h5><p id="r-1990193" data-claire-element-id="2142137" class="">Lorsqu'un trigger est déclenché, ses instructions peuvent être exécutées à deux moments différents. Soit juste avant que l'événement déclencheur n'ait lieu (<code data-claire-semantic="sql">BEFORE</code>), soit juste après (<code data-claire-semantic="sql">AFTER</code>).</p><p id="r-1990194" data-claire-element-id="8570884" class="">Donc, si vous avez un trigger<code data-claire-semantic="sql">BEFORE UPDATE</code>sur la table <em>A</em>, l'exécution d'une requête<code data-claire-semantic="sql">UPDATE</code>sur cette table va d'abord déclencher l'exécution des instructions du trigger, ensuite seulement les lignes de la table seront modifiées.</p><h5 id="r-1990198" data-claire-element-id="6261493" class="">Exemple</h5><p id="r-1990196" data-claire-element-id="2142140" class="">Pour créer un trigger sur la table <em>Animal</em>, déclenché par une insertion, et s'exécutant après ladite insertion, on utilisera la syntaxe suivante :</p><pre id="r-1990197" data-claire-element-id="6261492" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;CREATE TRIGGER after_insert_animal AFTER INSERT\nON Animal FOR EACH ROW\ncorps_trigger;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">after_insert_animal</span> <span class="ace_identifier">AFTER</span> <span class="ace_keyword">INSERT</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Animal</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">corps_trigger</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><h4 id="r-1990202" data-claire-element-id="8570889" class="">Règle et convention</h4><p id="r-1990200" data-claire-element-id="8570887" class="">Il ne peut exister qu'un seul trigger par combinaison<code data-claire-semantic="sql">moment_trigger/evenement_trigger</code>par table. Donc un seul trigger<code data-claire-semantic="sql">BEFORE UPDATE</code>par table, un seul<code data-claire-semantic="sql">AFTER DELETE</code>, etc.<br> Étant donné qu'il existe deux possibilités pour le moment d'exécution, et trois pour l'événement déclencheur, on a donc un<strong> maximum de six triggers par table</strong>.</p><p id="r-1990201" data-claire-element-id="8570888" class="">Cette règle étant établie, il existe une convention quant à la manière de nommer ses triggers, que je vous encourage à suivre : <em>nom_trigger</em> = <em>moment_evenement_table</em>. Donc le trigger<code data-claire-semantic="sql">BEFORE UPDATE ON Animal</code>aura pour nom : <em>before_update_animal</em>.</p><h4 id="r-1990238" data-claire-element-id="8570918" class="">OLD et NEW</h4><p id="r-1990203" data-claire-element-id="8570890">Dans le corps du trigger, MySQL met à disposition deux mots-clés :<code data-claire-semantic="sql">OLD</code>et<code data-claire-semantic="sql">NEW</code>.</p><ul id="r-1990208" data-claire-element-id="8570895" class=""><li id="r-1990205" data-claire-element-id="8570892"><p id="r-1990204" data-claire-element-id="8570891"><code data-claire-semantic="sql">OLD</code>: représente les valeurs des colonnes de la ligne traitée <strong>avant qu'elle ne soit modifiée</strong> par l'événement déclencheur. Ces valeurs peuvent être<strong> lues, mais pas modifiées</strong>.</p></li><li id="r-1990207" data-claire-element-id="8570894"><p id="r-1990206" data-claire-element-id="8570893"><code data-claire-semantic="sql">NEW</code>: représente les valeurs des colonnes de la ligne traitée <strong>après qu'elle a été modifiée</strong> par l'événement déclencheur. Ces valeurs peuvent être <strong>lues et modifiées</strong>.</p></li></ul><p id="r-1990209" data-claire-element-id="8570896" class="">Il n'y a que dans le cas d'un trigger<code data-claire-semantic="sql">UPDATE</code>que<code data-claire-semantic="sql">OLD</code>et<code data-claire-semantic="sql">NEW</code>coexistent. Lors d'une insertion,<code data-claire-semantic="sql">OLD</code>n'existe pas, puisque la ligne n'existe pas avant l'événement déclencheur ; dans le cas d'une suppression, c'est<code data-claire-semantic="sql">NEW</code>qui n'existe pas, puisque la ligne n'existera plus après l'événement déclencheur.</p><p id="r-1990210" data-claire-element-id="2142154"><strong>Premier exemple</strong> : l'insertion d'une ligne.</p><p id="r-1990211" data-claire-element-id="2142155">Exécutons la commande suivante :</p><pre id="r-1990212" data-claire-element-id="6261495" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;INSERT INTO Adoption (client_id, animal_id, date_reservation, prix, paye) \nVALUES (12, 15, NOW(), 200.00, FALSE);&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Adoption</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">client_id</span>, <span class="ace_identifier">animal_id</span>, <span class="ace_identifier">date_reservation</span>, <span class="ace_identifier">prix</span>, <span class="ace_identifier">paye</span><span class="ace_paren ace_rparen">)</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">12</span>, <span class="ace_constant ace_numeric">15</span>, <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>, <span class="ace_constant ace_numeric">200.00</span>, <span class="ace_constant ace_language">FALSE</span><span class="ace_paren ace_rparen">)</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990213" data-claire-element-id="2142157" class="">Pendant le traitement de cette ligne par le trigger correspondant,</p><ul id="r-1990226" data-claire-element-id="8570909" class=""><li id="r-1990215" data-claire-element-id="8570898"><p id="r-1990214" data-claire-element-id="8570897"><code data-claire-semantic="sql">NEW.client_id</code>vaudra 12 ;</p></li><li id="r-1990217" data-claire-element-id="8570900"><p id="r-1990216" data-claire-element-id="8570899"><code data-claire-semantic="sql">NEW.animal_id</code>vaudra 15 ;</p></li><li id="r-1990219" data-claire-element-id="8570902"><p id="r-1990218" data-claire-element-id="8570901"><code data-claire-semantic="sql">NEW.date_reservation</code>vaudra<code data-claire-semantic="sql">NOW()</code>;</p></li><li id="r-1990221" data-claire-element-id="8570904"><p id="r-1990220" data-claire-element-id="8570903"><code data-claire-semantic="sql">NEW.date_adoption</code>vaudra<code data-claire-semantic="sql">NULL</code>;</p></li><li id="r-1990223" data-claire-element-id="8570906"><p id="r-1990222" data-claire-element-id="8570905"><code data-claire-semantic="sql">NEW.prix</code>vaudra 200.00 ;</p></li><li id="r-1990225" data-claire-element-id="8570908"><p id="r-1990224" data-claire-element-id="8570907"><code data-claire-semantic="sql">NEW.paye</code>vaudra<code data-claire-semantic="sql">FALSE</code>(0).</p></li></ul><p id="r-1990227" data-claire-element-id="8570910" class="">Les valeurs de<code data-claire-semantic="sql">OLD</code>ne seront pas définies.<br> Dans le cas d'une suppression, on aura exactement l'inverse.</p><p id="r-1990228" data-claire-element-id="2142172" class=""><strong>Second exemple</strong> : la modification d'une ligne.<br> On modifie la ligne que l'on vient d'insérer en exécutant la commande suivante :</p><pre id="r-1990229" data-claire-element-id="6261496" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;UPDATE Adoption \nSET paye = TRUE\nWHERE client_id = 12 AND animal_id = 15;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">UPDATE</span> <span class="ace_identifier">Adoption</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">SET</span> <span class="ace_identifier">paye</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">TRUE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">client_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">12</span> <span class="ace_keyword">AND</span> <span class="ace_identifier">animal_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">15</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990230" data-claire-element-id="2142174" class="">Pendant le traitement de cette ligne par le trigger correspondant,</p><ul id="r-1990235" data-claire-element-id="8570915" class=""><li id="r-1990232" data-claire-element-id="8570912"><p id="r-1990231" data-claire-element-id="8570911"><code data-claire-semantic="sql">NEW.paye</code>vaudra<code data-claire-semantic="sql">TRUE</code>, tandis que<code data-claire-semantic="sql">OLD.paye</code>vaudra<code data-claire-semantic="sql">FALSE</code>.</p></li><li id="r-1990234" data-claire-element-id="8570914"><p id="r-1990233" data-claire-element-id="8570913">Par contre les valeurs respectives de<code data-claire-semantic="sql">NEW.animal_id, NEW.client_id, NEW.date_reservation</code>,<code data-claire-semantic="sql">NEW.date_adoption</code>et<code data-claire-semantic="sql">NEW.prix</code>seront les mêmes que<code data-claire-semantic="sql">OLD.animal_id, OLD.client_id, OLD.date_reservation</code>,<code data-claire-semantic="sql">OLD.date_adoption</code>et<code data-claire-semantic="sql">OLD.prix</code>, puisque ces colonnes ne sont pas modifiées par la requête.</p></li></ul><aside id="r-1990237" data-claire-element-id="8570917" data-claire-semantic="warning" class=""><p id="r-1990236" data-claire-element-id="8570916">Dans le cas d'une insertion ou d'une modification, si un trigger peut potentiellement changer la valeur de<code data-claire-semantic="sql">NEW.colonne</code>, il doit être exécuté avant l'événement (<code data-claire-semantic="sql">BEFORE</code>). Sinon, la ligne aura déjà été insérée ou modifiée, et la modification de<code data-claire-semantic="sql">NEW.colonne</code>n'aura plus aucune influence sur celle-ci.</p></aside><h4 id="r-1990246" data-claire-element-id="8570926" class="">Erreur déclenchée pendant un trigger</h4><ul id="r-1990245" data-claire-element-id="8570925" class=""><li id="r-1990240" data-claire-element-id="8570920"><p id="r-1990239" data-claire-element-id="8570919">Si un trigger<code data-claire-semantic="sql">BEFORE</code>génère une erreur (non interceptée par un gestionnaire d'erreur), la requête ayant déclenché le trigger ne sera pas exécutée. Si l'événement devait également déclencher un trigger<code data-claire-semantic="sql">AFTER</code>, il ne sera bien sûr pas non plus exécuté.</p></li><li id="r-1990242" data-claire-element-id="8570922"><p id="r-1990241" data-claire-element-id="8570921">Si un trigger<code data-claire-semantic="sql">AFTER</code>génère une erreur, la requête ayant déclenché le trigger échouera.</p></li><li id="r-1990244" data-claire-element-id="8570924"><p id="r-1990243" data-claire-element-id="8570923">Dans le cas d'une table transactionnelle, si une erreur est déclenchée, un<code data-claire-semantic="sql">ROLLBACK</code>sera fait. Dans le cas d'une table non-transactionnelle, tous les changements qui auraient été faits par le (ou les) trigger(s) avant le déclenchement de l'erreur persisteront.</p></li></ul></div></div><div class="foldable" id="ui-id-3" data-widget="foldable"><h3 id="r-1972684" data-claire-element-id="8570929" class="foldable__button secondTitle js-foldable-button">Suppression des triggers<i class="foldable__icon icon-next"></i></h3><div class="foldable__content"><p id="r-1990247" data-claire-element-id="8570928" class="">Encore une fois, la commande<code data-claire-semantic="sql">DROP</code>permet de supprimer un trigger.</p><pre id="r-1990248" data-claire-element-id="2237489" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;DROP TRIGGER nom_trigger;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">DROP</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">nom_trigger</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990249" data-claire-element-id="2142194" class="">Tout comme pour les procédures stockées, il n'est pas possible de modifier un trigger. Il faut le supprimer puis le recréer différemment.</p><p id="r-1990250" data-claire-element-id="2142195" class="">Par ailleurs, si l'on supprime une table, on supprime également tous les triggers qui y sont attachés.</p></div></div><div class="foldable" id="ui-id-4" data-widget="foldable"><h3 id="r-1973038" data-claire-element-id="8571004" class="foldable__button secondTitle js-foldable-button">Exemples<i class="foldable__icon icon-next"></i></h3><div class="foldable__content"><h4 id="r-1990318" data-claire-element-id="8571003" class="">Contraintes et vérification des données</h4><h5 id="r-1990303" data-claire-element-id="8571002" class="">Vérification du sexe des animaux</h5><p id="r-1990251" data-claire-element-id="8570930" class="">Dans notre table <em>Animal</em> se trouve la colonne <em>sexe</em>. Cette colonne accepte tout caractère, ou<code data-claire-semantic="sql">NULL</code>. Or, seuls les caractères "M" et "F" ont du sens. Nous allons donc créer deux triggers, un pour l'insertion, l'autre pour la modification, qui vont empêcher qu'on donne un autre caractère que "M" ou "F" pour <em>sexe</em>.</p><p id="r-1990252" data-claire-element-id="2142198">Ces deux triggers devront se déclencher avant l'insertion et la modification. On aura donc :</p><pre id="r-1990253" data-claire-element-id="6261499" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;-- Trigger d&amp;#xE9;clench&amp;#xE9; par l&amp;#x27;insertion\nDELIMITER |\nCREATE TRIGGER before_insert_animal BEFORE INSERT\nON Animal FOR EACH ROW\nBEGIN\n    -- Instructions\nEND |\n\n-- Trigger d&amp;#xE9;clench&amp;#xE9; par la modification\nCREATE TRIGGER before_update_animal BEFORE UPDATE\nON Animal FOR EACH ROW\nBEGIN\n    -- Instructions\nEND |\nDELIMITER ;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- Trigger déclenché par l'insertion</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_insert_animal</span> <span class="ace_identifier">BEFORE</span> <span class="ace_keyword">INSERT</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Animal</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">-- Instructions</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- Trigger déclenché par la modification</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_update_animal</span> <span class="ace_identifier">BEFORE</span> <span class="ace_keyword">UPDATE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Animal</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">-- Instructions</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> ;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990254" data-claire-element-id="2142200" class="">Il ne reste plus qu'à écrire le code du trigger, qui sera similaire pour les deux triggers. Et comme ce corps contiendra des instructions, il ne faut pas oublier de changer le délimiteur.</p><p id="r-1990255" data-claire-element-id="8570931" class="">Le corps consistera en une simple structure conditionnelle, et définira un comportement à adopter si le sexe donné ne vaut ni "M", ni "F", ni<code data-claire-semantic="sql">NULL</code>.</p><div id="r-1990257" data-claire-element-id="2142203" data-claire-semantic="question" class=""><p id="r-1990256" data-claire-element-id="2142202">Quel comportement adopter en cas de valeur erronée ?</p></div><p id="r-1990258" data-claire-element-id="2142204" class="">Deux possibilités :</p><ul id="r-1990263" data-claire-element-id="8570934" class=""><li id="r-1990260" data-claire-element-id="8570933"><p id="r-1990259" data-claire-element-id="8570932">on modifie la valeur du sexe, en le mettant à<code data-claire-semantic="sql">NULL</code>par exemple ;</p></li><li id="r-1990262" data-claire-element-id="2142208"><p id="r-1990261" data-claire-element-id="2142207">on provoque une erreur, ce qui empêchera l'insertion/la modification.</p></li></ul><p id="r-1990264" data-claire-element-id="8570935" class="">Commençons par le plus simple : mettre le sexe à<code data-claire-semantic="sql">NULL</code>.</p><pre id="r-1990265" data-claire-element-id="8570936" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;DELIMITER |\nCREATE TRIGGER before_update_animal BEFORE UPDATE\nON Animal FOR EACH ROW\nBEGIN\n    IF NEW.sexe IS NOT NULL   -- le sexe n&amp;#x27;est ni NULL\n    AND NEW.sexe != &amp;#x27;M&amp;#x27;       -- ni &amp;#x22;M&amp;#x22;&amp;#xE2;le\n    AND NEW.sexe != &amp;#x27;F&amp;#x27;       -- ni &amp;#x22;F&amp;#x22;emelle\n    AND NEW.sexe != &amp;#x27;A&amp;#x27;       -- ni &amp;#x22;A&amp;#x22;utre\n      THEN\n        SET NEW.sexe = NULL;\n    END IF;\nEND |\nDELIMITER ;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_update_animal</span> <span class="ace_identifier">BEFORE</span> <span class="ace_keyword">UPDATE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Animal</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">IF</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">sexe</span> <span class="ace_identifier">IS</span> <span class="ace_keyword">NOT</span> <span class="ace_keyword">NULL</span>   <span class="ace_comment">-- le sexe n'est ni NULL</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">AND</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">sexe</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_string">'M'</span>       <span class="ace_comment">-- ni "M"âle</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">AND</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">sexe</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_string">'F'</span>       <span class="ace_comment">-- ni "F"emelle</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">AND</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">sexe</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_string">'A'</span>       <span class="ace_comment">-- ni "A"utre</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_identifier">THEN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_storage ace_type">SET</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">sexe</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">NULL</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">END</span> <span class="ace_keyword">IF</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> ;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990266" data-claire-element-id="2142212" class=""><strong>Test</strong> :</p><pre id="r-1990267" data-claire-element-id="6261501" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;UPDATE Animal\nSET sexe = &amp;#x27;A&amp;#x27;\nWHERE id = 20;  -- l&amp;#x27;animal 20 est Balou, un m&amp;#xE2;le\n\nSELECT id, sexe, date_naissance, nom \nFROM Animal \nWHERE id = 20;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">UPDATE</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">SET</span> <span class="ace_identifier">sexe</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">'A'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">20</span>;  <span class="ace_comment">-- l'animal 20 est Balou, un mâle</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">SELECT</span> <span class="ace_identifier">id</span>, <span class="ace_identifier">sexe</span>, <span class="ace_identifier">date_naissance</span>, <span class="ace_identifier">nom</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">FROM</span> <span class="ace_identifier">Animal</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">20</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><table id="r-1990288" data-claire-element-id="2142234" class=""><thead id="r-1990277" data-claire-element-id="2142223"><tr id="r-1990276" data-claire-element-id="2142222"><th id="r-1990269" data-claire-element-id="2142215"><p id="r-1990268" data-claire-element-id="2142214">id</p></th><th id="r-1990271" data-claire-element-id="2142217"><p id="r-1990270" data-claire-element-id="2142216">sexe</p></th><th id="r-1990273" data-claire-element-id="2142219"><p id="r-1990272" data-claire-element-id="2142218">date_naissance</p></th><th id="r-1990275" data-claire-element-id="2142221"><p id="r-1990274" data-claire-element-id="2142220">nom</p></th></tr></thead><tbody id="r-1990287" data-claire-element-id="2142233"><tr id="r-1990286" data-claire-element-id="2142232"><td id="r-1990279" data-claire-element-id="2142225"><p id="r-1990278" data-claire-element-id="2142224">20</p></td><td id="r-1990281" data-claire-element-id="2142227"><p id="r-1990280" data-claire-element-id="2142226">NULL</p></td><td id="r-1990283" data-claire-element-id="2142229"><p id="r-1990282" data-claire-element-id="2142228">2007-04-24 12:45:00</p></td><td id="r-1990285" data-claire-element-id="2142231"><p id="r-1990284" data-claire-element-id="2142230">Balou</p></td></tr></tbody></table><p id="r-1990289" data-claire-element-id="8570937">Le sexe est bien<code data-claire-semantic="sql">NULL</code>, le trigger a fonctionné.</p><p id="r-1990290" data-claire-element-id="2142236">Pour le second trigger, déclenché par l'insertion de lignes, on va implémenter le second comportement : on va déclencher une erreur, ce qui empêchera l'insertion, et affichera l'erreur.</p><div id="r-1990292" data-claire-element-id="2142238" data-claire-semantic="question"><p id="r-1990291" data-claire-element-id="2142237">Mais comment déclencher une erreur ?</p></div><p id="r-1990293" data-claire-element-id="2142239" class="">Contrairement à certains SGBD, MySQL ne dispose pas d'une commande permettant de déclencher une erreur personnalisée. La seule solution est donc de faire une requête dont on sait qu'elle va générer une erreur.</p><p id="r-1990294" data-claire-element-id="2142240"><strong>Exemple</strong> :</p><pre id="r-1990295" data-claire-element-id="2237494" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;SELECT 1, 2 INTO @a;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">SELECT</span> <span class="ace_constant ace_numeric">1</span>, <span class="ace_constant ace_numeric">2</span> <span class="ace_identifier">INTO</span> @<span class="ace_identifier">a</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><pre id="r-1990296" data-claire-element-id="2142242"><samp>ERROR&nbsp;1222&nbsp;(21000):&nbsp;The&nbsp;used&nbsp;SELECT&nbsp;statements&nbsp;have&nbsp;a&nbsp;different&nbsp;number&nbsp;of&nbsp;columns</samp></pre><p id="r-1990297" data-claire-element-id="8570938" class="">Cependant, il serait quand même intéressant d'avoir un message d'erreur qui soit un peu explicite. Voici une manière d'obtenir un tel message : on crée une table <em>Erreur</em>, ayant deux colonnes, <em>id</em> et <em>erreur</em>. La colonne <em>id</em> est clé primaire, et <em>erreur</em> contient un texte court décrivant l'erreur. Un index<code data-claire-semantic="sql">UNIQUE</code>est ajouté sur cette dernière colonne. On insère ensuite une ligne correspondant à l'erreur qu'on veut utiliser dans le trigger.<br> Ensuite dans le corps du trigger, en cas de valeur erronée, on refait la même insertion. Cela déclenche une erreur de contrainte d'unicité, laquelle affiche le texte qu'on a essayé d'insérer dans <em>Erreur</em>.</p><pre id="r-1990298" data-claire-element-id="8571001" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;-- Cr&amp;#xE9;ation de la table Erreur\nCREATE TABLE Erreur (\n    id TINYINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,\n    erreur VARCHAR(255) UNIQUE);\n\n-- Insertion de l&amp;#x27;erreur qui nous int&amp;#xE9;resse\nINSERT INTO Erreur (erreur) VALUES (&amp;#x27;Erreur : sexe doit valoir &amp;#x22;M&amp;#x22;, &amp;#x22;F&amp;#x22;, &amp;#x22;A&amp;#x22; ou NULL.&amp;#x27;);\n\n-- Cr&amp;#xE9;ation du trigger\nDELIMITER |\nCREATE TRIGGER before_insert_animal BEFORE INSERT\nON Animal FOR EACH ROW\nBEGIN\n    IF NEW.sexe IS NOT NULL   -- le sexe n&amp;#x27;est ni NULL\n    AND NEW.sexe != &amp;#x27;M&amp;#x27;       -- ni &amp;#x22;M&amp;#x22;\n    AND NEW.sexe != &amp;#x27;F&amp;#x27;       -- ni &amp;#x22;F&amp;#x22;\n    AND NEW.sexe != &amp;#x27;A&amp;#x27;       -- ni &amp;#x22;A&amp;#x22;\n      THEN\n        INSERT INTO Erreur (erreur) VALUES (&amp;#x27;Erreur : sexe doit valoir &amp;#x22;M&amp;#x22;, &amp;#x22;F&amp;#x22;, &amp;#x22;A&amp;#x22; ou NULL.&amp;#x27;);\n    END IF;\nEND |\nDELIMITER ;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- Création de la table Erreur</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_keyword">TABLE</span> <span class="ace_identifier">Erreur</span> <span class="ace_paren ace_lparen">(</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">id</span> <span class="ace_identifier">TINYINT</span> <span class="ace_identifier">UNSIGNED</span> <span class="ace_identifier">AUTO_INCREMENT</span> <span class="ace_keyword">PRIMARY</span> <span class="ace_keyword">KEY</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">erreur</span> <span class="ace_storage ace_type">VARCHAR</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">255</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">UNIQUE</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- Insertion de l'erreur qui nous intéresse</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Erreur</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">erreur</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_string">'Erreur : sexe doit valoir "M", "F", "A" ou NULL.'</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- Création du trigger</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_insert_animal</span> <span class="ace_identifier">BEFORE</span> <span class="ace_keyword">INSERT</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Animal</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">IF</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">sexe</span> <span class="ace_identifier">IS</span> <span class="ace_keyword">NOT</span> <span class="ace_keyword">NULL</span>   <span class="ace_comment">-- le sexe n'est ni NULL</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">AND</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">sexe</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_string">'M'</span>       <span class="ace_comment">-- ni "M"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">AND</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">sexe</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_string">'F'</span>       <span class="ace_comment">-- ni "F"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">AND</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">sexe</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_string">'A'</span>       <span class="ace_comment">-- ni "A"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_identifier">THEN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Erreur</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">erreur</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_string">'Erreur : sexe doit valoir "M", "F", "A" ou NULL.'</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">END</span> <span class="ace_keyword">IF</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> ;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990299" data-claire-element-id="2142245" class=""><strong>Test</strong> :</p><pre id="r-1990300" data-claire-element-id="6261503" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;INSERT INTO Animal (nom, sexe, date_naissance, espece_id)\nVALUES (&amp;#x27;Babar&amp;#x27;, &amp;#x27;A&amp;#x27;, &amp;#x27;2011-08-04 12:34&amp;#x27;, 3);&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Animal</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">nom</span>, <span class="ace_identifier">sexe</span>, <span class="ace_identifier">date_naissance</span>, <span class="ace_identifier">espece_id</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_string">'Babar'</span>, <span class="ace_string">'A'</span>, <span class="ace_string">'2011-08-04 12:34'</span>, <span class="ace_constant ace_numeric">3</span><span class="ace_paren ace_rparen">)</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><pre id="r-1990301" data-claire-element-id="2142247" class=""><samp>ERROR&nbsp;1062&nbsp;(23000):&nbsp;Duplicate&nbsp;entry&nbsp;'Erreur&nbsp;:&nbsp;sexe&nbsp;doit&nbsp;valoir&nbsp;"M",&nbsp;"F"&nbsp;ou&nbsp;NULL.'&nbsp;for&nbsp;key&nbsp;'erreur'</samp></pre><p id="r-1990302" data-claire-element-id="2142248" class="">Et voilà, ce n'est pas parfait, mais au moins le message d'erreur permet de cerner d'où vient le problème. Et Babar n'a pas été inséré.</p><h5 id="r-1990309" data-claire-element-id="8570941" class="">Vérification du booléen dans <em>Adoption</em></h5><p id="r-1990304" data-claire-element-id="8570940" class="">Il est important de savoir si un client a payé ou non pour les animaux qu'il veut adopter. Il faut donc vérifier la valeur de ce qu'on insère dans la colonne <em>paye</em>, et refuser toute insertion/modification donnant une valeur différente de<code data-claire-semantic="sql">TRUE</code>(1) ou<code data-claire-semantic="sql">FALSE</code>(0).<br> Les deux triggers à créer sont très similaires à ce que l'on a fait pour la colonne <em>sexe</em> d'<em>Animal</em>. Essayez donc de construire les requêtes vous-mêmes.</p><pre id="r-1990305" data-claire-element-id="6261505" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;INSERT INTO Erreur (erreur) VALUES (&amp;#x27;Erreur : paye doit valoir TRUE (1) ou FALSE (0).&amp;#x27;);\n\nDELIMITER |\nCREATE TRIGGER before_insert_adoption BEFORE INSERT\nON Adoption FOR EACH ROW\nBEGIN\n    IF NEW.paye != TRUE       -- ni TRUE\n    AND NEW.paye != FALSE     -- ni FALSE\n      THEN\n        INSERT INTO Erreur (erreur) VALUES (&amp;#x27;Erreur : paye doit valoir TRUE (1) ou FALSE (0).&amp;#x27;);\n    END IF;\nEND |\n\nCREATE TRIGGER before_update_adoption BEFORE UPDATE\nON Adoption FOR EACH ROW\nBEGIN\n    IF NEW.paye != TRUE       -- ni TRUE\n    AND NEW.paye != FALSE     -- ni FALSE\n      THEN\n        INSERT INTO Erreur (erreur) VALUES (&amp;#x27;Erreur : paye doit valoir TRUE (1) ou FALSE (0).&amp;#x27;);\n    END IF;\nEND |\nDELIMITER ;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Erreur</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">erreur</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_string">'Erreur : paye doit valoir TRUE (1) ou FALSE (0).'</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_insert_adoption</span> <span class="ace_identifier">BEFORE</span> <span class="ace_keyword">INSERT</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Adoption</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">IF</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">paye</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_constant ace_language">TRUE</span>       <span class="ace_comment">-- ni TRUE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">AND</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">paye</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_constant ace_language">FALSE</span>     <span class="ace_comment">-- ni FALSE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_identifier">THEN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Erreur</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">erreur</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_string">'Erreur : paye doit valoir TRUE (1) ou FALSE (0).'</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">END</span> <span class="ace_keyword">IF</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_update_adoption</span> <span class="ace_identifier">BEFORE</span> <span class="ace_keyword">UPDATE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Adoption</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">IF</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">paye</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_constant ace_language">TRUE</span>       <span class="ace_comment">-- ni TRUE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">AND</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">paye</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_constant ace_language">FALSE</span>     <span class="ace_comment">-- ni FALSE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_identifier">THEN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Erreur</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">erreur</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_string">'Erreur : paye doit valoir TRUE (1) ou FALSE (0).'</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">END</span> <span class="ace_keyword">IF</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> ;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990306" data-claire-element-id="2142252" class=""><strong>Test </strong>:</p><pre id="r-1990307" data-claire-element-id="6261506" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;UPDATE Adoption \nSET paye = 3\nWHERE client_id = 9;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">UPDATE</span> <span class="ace_identifier">Adoption</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">SET</span> <span class="ace_identifier">paye</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">3</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">client_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">9</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><pre id="r-1990308" data-claire-element-id="2142254" class=""><samp>ERROR&nbsp;1062&nbsp;(23000):&nbsp;Duplicate&nbsp;entry&nbsp;'Erreur&nbsp;:&nbsp;paye&nbsp;doit&nbsp;valoir&nbsp;TRUE&nbsp;(1)&nbsp;ou&nbsp;FALSE&nbsp;(0)'&nbsp;for&nbsp;key&nbsp;'erreur'</samp></pre><h5 id="r-1990317" data-claire-element-id="8570944" class="">Vérification de la date d'adoption</h5><p id="r-1990310" data-claire-element-id="8570942" class="">Il reste une petite chose à vérifier, et ce sera tout pour les vérifications de données : la date d'adoption !<br> En effet, celle-ci doit être postérieure ou égale à la date de réservation. Un client ne peut pas emporter chez lui un animal avant même d'avoir prévenu qu'il voulait l'adopter.<br> À nouveau, essayez de faire le trigger vous-mêmes. Pour rappel, il ne peut exister qu'un seul trigger<code data-claire-semantic="sql">BEFORE UPDATE</code>et un seul<code data-claire-semantic="sql">BEFORE INSERT</code>pour chaque table.</p><pre id="r-1990311" data-claire-element-id="6261508" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;INSERT INTO Erreur (erreur) VALUES (&amp;#x27;Erreur : date_adoption doit &amp;#xEA;tre &amp;#x3E;= &amp;#xE0; date_reservation.&amp;#x27;);\n\nDELIMITER |\nDROP TRIGGER before_insert_adoption|\nCREATE TRIGGER before_insert_adoption BEFORE INSERT\nON Adoption FOR EACH ROW\nBEGIN\n    IF NEW.paye != TRUE     -- On remet la v&amp;#xE9;rification sur paye\n    AND NEW.paye != FALSE     \n      THEN\n        INSERT INTO Erreur (erreur) VALUES (&amp;#x27;Erreur : paye doit valoir TRUE (1) ou FALSE (0).&amp;#x27;);\n\n    ELSEIF NEW.date_adoption &amp;#x3C; NEW.date_reservation THEN    \n    -- Adoption avant r&amp;#xE9;servation\n        INSERT INTO Erreur (erreur) VALUES (&amp;#x27;Erreur : date_adoption doit &amp;#xEA;tre &amp;#x3E;= &amp;#xE0; date_reservation.&amp;#x27;);\n    END IF;\nEND |\n\nDROP TRIGGER before_update_adoption|\nCREATE TRIGGER before_update_adoption BEFORE UPDATE\nON Adoption FOR EACH ROW\nBEGIN\n    IF NEW.paye != TRUE     -- On remet la v&amp;#xE9;rification sur paye\n    AND NEW.paye != FALSE     \n      THEN\n        INSERT INTO Erreur (erreur) VALUES (&amp;#x27;Erreur : paye doit valoir TRUE (1) ou FALSE (0).&amp;#x27;);\n\n    ELSEIF NEW.date_adoption &amp;#x3C; NEW.date_reservation THEN    \n    -- Adoption avant r&amp;#xE9;servation\n        INSERT INTO Erreur (erreur) VALUES (&amp;#x27;Erreur : date_adoption doit &amp;#xEA;tre &amp;#x3E;= &amp;#xE0; date_reservation.&amp;#x27;);\n    END IF;\nEND |\nDELIMITER ;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Erreur</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">erreur</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_string">'Erreur : date_adoption doit être &gt;= à date_reservation.'</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">DROP</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_insert_adoption</span>|
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_insert_adoption</span> <span class="ace_identifier">BEFORE</span> <span class="ace_keyword">INSERT</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Adoption</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">IF</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">paye</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_constant ace_language">TRUE</span>     <span class="ace_comment">-- On remet la vérification sur paye</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">AND</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">paye</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_constant ace_language">FALSE</span>     
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_identifier">THEN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Erreur</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">erreur</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_string">'Erreur : paye doit valoir TRUE (1) ou FALSE (0).'</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">ELSEIF</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">date_adoption</span> <span class="ace_keyword ace_operator">&lt;</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">date_reservation</span> <span class="ace_identifier">THEN</span>    
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">-- Adoption avant réservation</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Erreur</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">erreur</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_string">'Erreur : date_adoption doit être &gt;= à date_reservation.'</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">END</span> <span class="ace_keyword">IF</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">DROP</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_update_adoption</span>|
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_update_adoption</span> <span class="ace_identifier">BEFORE</span> <span class="ace_keyword">UPDATE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Adoption</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">IF</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">paye</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_constant ace_language">TRUE</span>     <span class="ace_comment">-- On remet la vérification sur paye</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">AND</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">paye</span> <span class="ace_keyword ace_operator">!=</span> <span class="ace_constant ace_language">FALSE</span>     
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_identifier">THEN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Erreur</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">erreur</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_string">'Erreur : paye doit valoir TRUE (1) ou FALSE (0).'</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">ELSEIF</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">date_adoption</span> <span class="ace_keyword ace_operator">&lt;</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">date_reservation</span> <span class="ace_identifier">THEN</span>    
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">-- Adoption avant réservation</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Erreur</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">erreur</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_string">'Erreur : date_adoption doit être &gt;= à date_reservation.'</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">END</span> <span class="ace_keyword">IF</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> ;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990312" data-claire-element-id="8570943">On aurait pu faire un second<code data-claire-semantic="sql">IF</code>au lieu d'un<code data-claire-semantic="sql">ELSEIF</code>, mais de toute façon, le trigger ne pourra déclencher qu'une erreur à la fois.</p><p id="r-1990313" data-claire-element-id="2142259"><strong>Test </strong>:</p><pre id="r-1990314" data-claire-element-id="6261509" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;INSERT INTO Adoption (animal_id, client_id, date_reservation, date_adoption, prix, paye)\nVALUES (10, 10, NOW(), NOW() - INTERVAL 2 DAY, 200.00, 0);\n\nINSERT INTO Adoption (animal_id, client_id, date_reservation, date_adoption, prix, paye)\nVALUES (10, 10, NOW(), NOW(), 200.00, 4);&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Adoption</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">animal_id</span>, <span class="ace_identifier">client_id</span>, <span class="ace_identifier">date_reservation</span>, <span class="ace_identifier">date_adoption</span>, <span class="ace_identifier">prix</span>, <span class="ace_identifier">paye</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">10</span>, <span class="ace_constant ace_numeric">10</span>, <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>, <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">-</span> <span class="ace_identifier">INTERVAL</span> <span class="ace_constant ace_numeric">2</span> <span class="ace_identifier">DAY</span>, <span class="ace_constant ace_numeric">200.00</span>, <span class="ace_constant ace_numeric">0</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Adoption</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">animal_id</span>, <span class="ace_identifier">client_id</span>, <span class="ace_identifier">date_reservation</span>, <span class="ace_identifier">date_adoption</span>, <span class="ace_identifier">prix</span>, <span class="ace_identifier">paye</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">10</span>, <span class="ace_constant ace_numeric">10</span>, <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>, <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>, <span class="ace_constant ace_numeric">200.00</span>, <span class="ace_constant ace_numeric">4</span><span class="ace_paren ace_rparen">)</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><pre id="r-1990315" data-claire-element-id="6261510" class=""><samp>ERROR&nbsp;1062&nbsp;(23000):&nbsp;Duplicate&nbsp;entry&nbsp;'Erreur&nbsp;:&nbsp;date_adoption&nbsp;doit&nbsp;être&nbsp;&gt;=&nbsp;à&nbsp;date_reservation.'&nbsp;for&nbsp;key&nbsp;'erreur'

ERROR&nbsp;1062&nbsp;(23000):&nbsp;Duplicate&nbsp;entry&nbsp;'Erreur&nbsp;:&nbsp;paye&nbsp;doit&nbsp;valoir&nbsp;TRUE&nbsp;(1)&nbsp;ou&nbsp;FALSE&nbsp;(0).'&nbsp;for&nbsp;key&nbsp;'erreur'</samp></pre><p id="r-1990316" data-claire-element-id="2142262" class="">Les deux vérifications fonctionnent !</p><h4 id="r-1990452" data-claire-element-id="8570947" class="">Mise à jour d'informations dépendant d'autres données</h4><p id="r-1990319" data-claire-element-id="2142265" class="">Pour l'instant, lorsque l'on a besoin de savoir quels animaux restent disponibles pour l'adoption, il faut faire une requête avec sous-requête.</p><pre id="r-1990320" data-claire-element-id="6261513" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;SELECT id, nom, sexe, date_naissance, commentaires\nFROM Animal\nWHERE NOT EXISTS (\n    SELECT * \n    FROM Adoption \n    WHERE Animal.id = Adoption.animal_id\n);&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">SELECT</span> <span class="ace_identifier">id</span>, <span class="ace_identifier">nom</span>, <span class="ace_identifier">sexe</span>, <span class="ace_identifier">date_naissance</span>, <span class="ace_identifier">commentaires</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">FROM</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_keyword">NOT</span> <span class="ace_identifier">EXISTS</span> <span class="ace_paren ace_lparen">(</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">SELECT</span> * 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">FROM</span> <span class="ace_identifier">Adoption</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">WHERE</span> <span class="ace_identifier">Animal</span>.<span class="ace_identifier">id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Adoption</span>.<span class="ace_identifier">animal_id</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">)</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990321" data-claire-element-id="2142267" class="">Mais une telle requête n'est pas particulièrement performante, et elle est relativement peu facile à lire. Les triggers peuvent nous permettre de stocker automatiquement une donnée permettant de savoir immédiatement si un animal est disponible ou non.</p><p id="r-1990322" data-claire-element-id="8570946" class="">Pour cela, il suffit d'ajouter une colonne <em>disponible</em> à la table <em>Animal</em>, qui vaudra<code data-claire-semantic="sql">FALSE</code>ou<code data-claire-semantic="sql">TRUE</code>, et qui sera mise à jour grâce à trois triggers sur la table <em>Adoption</em>.</p><ul id="r-1990329" data-claire-element-id="2142275" class=""><li id="r-1990324" data-claire-element-id="2142270"><p id="r-1990323" data-claire-element-id="2142269">À l'insertion d'une nouvelle adoption, il faut retirer l'animal adopté des animaux disponibles ;</p></li><li id="r-1990326" data-claire-element-id="2142272"><p id="r-1990325" data-claire-element-id="2142271">en cas de suppression, il faut faire le contraire ;</p></li><li id="r-1990328" data-claire-element-id="2142274"><p id="r-1990327" data-claire-element-id="2142273">en cas de modification d'une adoption, si l'animal adopté change, il faut remettre l'ancien parmi les animaux disponibles et retirer le nouveau.</p></li></ul><pre id="r-1990330" data-claire-element-id="6261514" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;-- Ajout de la colonne disponible\nALTER TABLE Animal ADD COLUMN disponible BOOLEAN DEFAULT TRUE;  \n-- &amp;#xC0; l&amp;#x27;insertion, un animal est forc&amp;#xE9;ment disponible\n\n-- Remplissage de la colonne\nUPDATE Animal\nSET disponible = FALSE\nWHERE EXISTS (\n    SELECT * \n    FROM Adoption \n    WHERE Animal.id = Adoption.animal_id\n);\n\n-- Cr&amp;#xE9;ation des trois triggers\nDELIMITER |\nCREATE TRIGGER after_insert_adoption AFTER INSERT\nON Adoption FOR EACH ROW\nBEGIN\n    UPDATE Animal\n    SET disponible = FALSE\n    WHERE id = NEW.animal_id;\nEND |\n\nCREATE TRIGGER after_delete_adoption AFTER DELETE\nON Adoption FOR EACH ROW\nBEGIN\n    UPDATE Animal\n    SET disponible = TRUE\n    WHERE id = OLD.animal_id;\nEND |\n\nCREATE TRIGGER after_update_adoption AFTER UPDATE\nON Adoption FOR EACH ROW\nBEGIN\n    IF OLD.animal_id &amp;#x3C;&amp;#x3E; NEW.animal_id THEN\n        UPDATE Animal\n        SET disponible = TRUE\n        WHERE id = OLD.animal_id;\n\n        UPDATE Animal\n        SET disponible = FALSE\n        WHERE id = NEW.animal_id;\n    END IF;\nEND |\nDELIMITER ;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- Ajout de la colonne disponible</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ALTER</span> <span class="ace_keyword">TABLE</span> <span class="ace_identifier">Animal</span> <span class="ace_identifier">ADD</span> <span class="ace_identifier">COLUMN</span> <span class="ace_identifier">disponible</span> <span class="ace_identifier">BOOLEAN</span> <span class="ace_keyword">DEFAULT</span> <span class="ace_constant ace_language">TRUE</span>;  
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- À l'insertion, un animal est forcément disponible</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- Remplissage de la colonne</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">UPDATE</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">SET</span> <span class="ace_identifier">disponible</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">FALSE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">EXISTS</span> <span class="ace_paren ace_lparen">(</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">SELECT</span> * 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">FROM</span> <span class="ace_identifier">Adoption</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">WHERE</span> <span class="ace_identifier">Animal</span>.<span class="ace_identifier">id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Adoption</span>.<span class="ace_identifier">animal_id</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- Création des trois triggers</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">after_insert_adoption</span> <span class="ace_identifier">AFTER</span> <span class="ace_keyword">INSERT</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Adoption</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">UPDATE</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">SET</span> <span class="ace_identifier">disponible</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">FALSE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">WHERE</span> <span class="ace_identifier">id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">animal_id</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">after_delete_adoption</span> <span class="ace_identifier">AFTER</span> <span class="ace_keyword">DELETE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Adoption</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">UPDATE</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">SET</span> <span class="ace_identifier">disponible</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">TRUE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">WHERE</span> <span class="ace_identifier">id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">OLD</span>.<span class="ace_identifier">animal_id</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">after_update_adoption</span> <span class="ace_identifier">AFTER</span> <span class="ace_keyword">UPDATE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Adoption</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">IF</span> <span class="ace_identifier">OLD</span>.<span class="ace_identifier">animal_id</span> <span class="ace_keyword ace_operator">&lt;&gt;</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">animal_id</span> <span class="ace_identifier">THEN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">UPDATE</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_storage ace_type">SET</span> <span class="ace_identifier">disponible</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">TRUE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">WHERE</span> <span class="ace_identifier">id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">OLD</span>.<span class="ace_identifier">animal_id</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">UPDATE</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_storage ace_type">SET</span> <span class="ace_identifier">disponible</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">FALSE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">WHERE</span> <span class="ace_identifier">id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">animal_id</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">END</span> <span class="ace_keyword">IF</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> ;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990331" data-claire-element-id="2142277"><strong>Test</strong> :</p><pre id="r-1990332" data-claire-element-id="6261515" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;SELECT animal_id, nom, sexe, disponible, client_id\nFROM Animal\nINNER JOIN Adoption ON Adoption.animal_id = Animal.id\nWHERE client_id = 9;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">SELECT</span> <span class="ace_identifier">animal_id</span>, <span class="ace_identifier">nom</span>, <span class="ace_identifier">sexe</span>, <span class="ace_identifier">disponible</span>, <span class="ace_identifier">client_id</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">FROM</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">INNER</span> <span class="ace_keyword">JOIN</span> <span class="ace_identifier">Adoption</span> <span class="ace_keyword">ON</span> <span class="ace_identifier">Adoption</span>.<span class="ace_identifier">animal_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Animal</span>.<span class="ace_identifier">id</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">client_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">9</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><table id="r-1990379" data-claire-element-id="2142325"><thead id="r-1990344" data-claire-element-id="2142290"><tr id="r-1990343" data-claire-element-id="2142289"><th id="r-1990334" data-claire-element-id="2142280"><p id="r-1990333" data-claire-element-id="2142279">animal_id</p></th><th id="r-1990336" data-claire-element-id="2142282"><p id="r-1990335" data-claire-element-id="2142281">nom</p></th><th id="r-1990338" data-claire-element-id="2142284"><p id="r-1990337" data-claire-element-id="2142283">sexe</p></th><th id="r-1990340" data-claire-element-id="2142286"><p id="r-1990339" data-claire-element-id="2142285">disponible</p></th><th id="r-1990342" data-claire-element-id="2142288"><p id="r-1990341" data-claire-element-id="2142287">client_id</p></th></tr></thead><tbody id="r-1990378" data-claire-element-id="2142324"><tr id="r-1990355" data-claire-element-id="2142301"><td id="r-1990346" data-claire-element-id="2142292"><p id="r-1990345" data-claire-element-id="2142291">33</p></td><td id="r-1990348" data-claire-element-id="2142294"><p id="r-1990347" data-claire-element-id="2142293">Caribou</p></td><td id="r-1990350" data-claire-element-id="2142296"><p id="r-1990349" data-claire-element-id="2142295">M</p></td><td id="r-1990352" data-claire-element-id="2142298"><p id="r-1990351" data-claire-element-id="2142297">0</p></td><td id="r-1990354" data-claire-element-id="2142300"><p id="r-1990353" data-claire-element-id="2142299">9</p></td></tr><tr id="r-1990366" data-claire-element-id="2142312"><td id="r-1990357" data-claire-element-id="2142303"><p id="r-1990356" data-claire-element-id="2142302">54</p></td><td id="r-1990359" data-claire-element-id="2142305"><p id="r-1990358" data-claire-element-id="2142304">Bubulle</p></td><td id="r-1990361" data-claire-element-id="2142307"><p id="r-1990360" data-claire-element-id="2142306">M</p></td><td id="r-1990363" data-claire-element-id="2142309"><p id="r-1990362" data-claire-element-id="2142308">0</p></td><td id="r-1990365" data-claire-element-id="2142311"><p id="r-1990364" data-claire-element-id="2142310">9</p></td></tr><tr id="r-1990377" data-claire-element-id="2142323"><td id="r-1990368" data-claire-element-id="2142314"><p id="r-1990367" data-claire-element-id="2142313">55</p></td><td id="r-1990370" data-claire-element-id="2142316"><p id="r-1990369" data-claire-element-id="2142315">Relou</p></td><td id="r-1990372" data-claire-element-id="2142318"><p id="r-1990371" data-claire-element-id="2142317">M</p></td><td id="r-1990374" data-claire-element-id="2142320"><p id="r-1990373" data-claire-element-id="2142319">0</p></td><td id="r-1990376" data-claire-element-id="2142322"><p id="r-1990375" data-claire-element-id="2142321">9</p></td></tr></tbody></table><pre id="r-1990380" data-claire-element-id="6261516" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;DELETE FROM Adoption    -- 54 doit redevenir disponible\nWHERE animal_id = 54;\n\nUPDATE Adoption\nSET animal_id = 38, prix = 985.00   -- 38 doit devenir indisponible\nWHERE animal_id = 33;               -- et 33 redevenir disponible\n\nINSERT INTO Adoption (client_id, animal_id, date_reservation, prix, paye)\nVALUES (9, 59, NOW(), 700.00, FALSE);   -- 59 doit devenir indisponible\n\nSELECT Animal.id AS animal_id, nom, sexe, disponible, client_id\nFROM Animal\nLEFT JOIN Adoption ON Animal.id = Adoption.animal_id\nWHERE Animal.id IN (33, 54, 55, 38, 59);&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">DELETE</span> <span class="ace_keyword">FROM</span> <span class="ace_identifier">Adoption</span>    <span class="ace_comment">-- 54 doit redevenir disponible</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">animal_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">54</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">UPDATE</span> <span class="ace_identifier">Adoption</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">SET</span> <span class="ace_identifier">animal_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">38</span>, <span class="ace_identifier">prix</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">985.00</span>   <span class="ace_comment">-- 38 doit devenir indisponible</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">animal_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">33</span>;               <span class="ace_comment">-- et 33 redevenir disponible</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Adoption</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">client_id</span>, <span class="ace_identifier">animal_id</span>, <span class="ace_identifier">date_reservation</span>, <span class="ace_identifier">prix</span>, <span class="ace_identifier">paye</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">9</span>, <span class="ace_constant ace_numeric">59</span>, <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>, <span class="ace_constant ace_numeric">700.00</span>, <span class="ace_constant ace_language">FALSE</span><span class="ace_paren ace_rparen">)</span>;   <span class="ace_comment">-- 59 doit devenir indisponible</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">SELECT</span> <span class="ace_identifier">Animal</span>.<span class="ace_identifier">id</span> <span class="ace_keyword">AS</span> <span class="ace_identifier">animal_id</span>, <span class="ace_identifier">nom</span>, <span class="ace_identifier">sexe</span>, <span class="ace_identifier">disponible</span>, <span class="ace_identifier">client_id</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">FROM</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">LEFT</span> <span class="ace_keyword">JOIN</span> <span class="ace_identifier">Adoption</span> <span class="ace_keyword">ON</span> <span class="ace_identifier">Animal</span>.<span class="ace_identifier">id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Adoption</span>.<span class="ace_identifier">animal_id</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">Animal</span>.<span class="ace_identifier">id</span> <span class="ace_identifier">IN</span> <span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">33</span>, <span class="ace_constant ace_numeric">54</span>, <span class="ace_constant ace_numeric">55</span>, <span class="ace_constant ace_numeric">38</span>, <span class="ace_constant ace_numeric">59</span><span class="ace_paren ace_rparen">)</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><table id="r-1990449" data-claire-element-id="2142395"><thead id="r-1990392" data-claire-element-id="2142338"><tr id="r-1990391" data-claire-element-id="2142337"><th id="r-1990382" data-claire-element-id="2142328"><p id="r-1990381" data-claire-element-id="2142327">animal_id</p></th><th id="r-1990384" data-claire-element-id="2142330"><p id="r-1990383" data-claire-element-id="2142329">nom</p></th><th id="r-1990386" data-claire-element-id="2142332"><p id="r-1990385" data-claire-element-id="2142331">sexe</p></th><th id="r-1990388" data-claire-element-id="2142334"><p id="r-1990387" data-claire-element-id="2142333">disponible</p></th><th id="r-1990390" data-claire-element-id="2142336"><p id="r-1990389" data-claire-element-id="2142335">client_id</p></th></tr></thead><tbody id="r-1990448" data-claire-element-id="2142394"><tr id="r-1990403" data-claire-element-id="2142349"><td id="r-1990394" data-claire-element-id="2142340"><p id="r-1990393" data-claire-element-id="2142339">33</p></td><td id="r-1990396" data-claire-element-id="2142342"><p id="r-1990395" data-claire-element-id="2142341">Caribou</p></td><td id="r-1990398" data-claire-element-id="2142344"><p id="r-1990397" data-claire-element-id="2142343">M</p></td><td id="r-1990400" data-claire-element-id="2142346"><p id="r-1990399" data-claire-element-id="2142345">1</p></td><td id="r-1990402" data-claire-element-id="2142348"><p id="r-1990401" data-claire-element-id="2142347">NULL</p></td></tr><tr id="r-1990414" data-claire-element-id="2142360"><td id="r-1990405" data-claire-element-id="2142351"><p id="r-1990404" data-claire-element-id="2142350">38</p></td><td id="r-1990407" data-claire-element-id="2142353"><p id="r-1990406" data-claire-element-id="2142352">Boule</p></td><td id="r-1990409" data-claire-element-id="2142355"><p id="r-1990408" data-claire-element-id="2142354">F</p></td><td id="r-1990411" data-claire-element-id="2142357"><p id="r-1990410" data-claire-element-id="2142356">0</p></td><td id="r-1990413" data-claire-element-id="2142359"><p id="r-1990412" data-claire-element-id="2142358">9</p></td></tr><tr id="r-1990425" data-claire-element-id="2142371"><td id="r-1990416" data-claire-element-id="2142362"><p id="r-1990415" data-claire-element-id="2142361">54</p></td><td id="r-1990418" data-claire-element-id="2142364"><p id="r-1990417" data-claire-element-id="2142363">Bubulle</p></td><td id="r-1990420" data-claire-element-id="2142366"><p id="r-1990419" data-claire-element-id="2142365">M</p></td><td id="r-1990422" data-claire-element-id="2142368"><p id="r-1990421" data-claire-element-id="2142367">1</p></td><td id="r-1990424" data-claire-element-id="2142370"><p id="r-1990423" data-claire-element-id="2142369">NULL</p></td></tr><tr id="r-1990436" data-claire-element-id="2142382"><td id="r-1990427" data-claire-element-id="2142373"><p id="r-1990426" data-claire-element-id="2142372">55</p></td><td id="r-1990429" data-claire-element-id="2142375"><p id="r-1990428" data-claire-element-id="2142374">Relou</p></td><td id="r-1990431" data-claire-element-id="2142377"><p id="r-1990430" data-claire-element-id="2142376">M</p></td><td id="r-1990433" data-claire-element-id="2142379"><p id="r-1990432" data-claire-element-id="2142378">0</p></td><td id="r-1990435" data-claire-element-id="2142381"><p id="r-1990434" data-claire-element-id="2142380">9</p></td></tr><tr id="r-1990447" data-claire-element-id="2142393"><td id="r-1990438" data-claire-element-id="2142384"><p id="r-1990437" data-claire-element-id="2142383">59</p></td><td id="r-1990440" data-claire-element-id="2142386"><p id="r-1990439" data-claire-element-id="2142385">Bavard</p></td><td id="r-1990442" data-claire-element-id="2142388"><p id="r-1990441" data-claire-element-id="2142387">M</p></td><td id="r-1990444" data-claire-element-id="2142390"><p id="r-1990443" data-claire-element-id="2142389">0</p></td><td id="r-1990446" data-claire-element-id="2142392"><p id="r-1990445" data-claire-element-id="2142391">9</p></td></tr></tbody></table><p id="r-1990450" data-claire-element-id="2142396">Désormais, pour savoir quels animaux sont disponibles, il suffira de faire la requête suivante :</p><pre id="r-1990451" data-claire-element-id="6261517" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;SELECT *\nFROM Animal\nWHERE disponible = TRUE;\n\n-- Ou m&amp;#xEA;me\n\nSELECT *\nFROM Animal\nWHERE disponible;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">SELECT</span> *
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">FROM</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">disponible</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">TRUE</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- Ou même</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">SELECT</span> *
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">FROM</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">disponible</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><h4 id="r-1990603" data-claire-element-id="8570953">Historisation</h4><p id="r-1990453" data-claire-element-id="2142399">Voici deux exemples de systèmes d'historisation :</p><ul id="r-1990458" data-claire-element-id="2142404" class=""><li id="r-1990455" data-claire-element-id="2142401"><p id="r-1990454" data-claire-element-id="2142400">l'un très basique, gardant simplement trace de l'insertion (date et utilisateur) et de la dernière modification (date et utilisateur), et se faisant directement dans la table concernée ;</p></li><li id="r-1990457" data-claire-element-id="2142403"><p id="r-1990456" data-claire-element-id="2142402">l'autre plus complet, qui garde une copie de chaque version antérieure des lignes dans une table dédiée, ainsi qu'une copie de la dernière version en cas de suppression.</p></li></ul><h5 id="r-1990526" data-claire-element-id="8570949">Historisation basique</h5><p id="r-1990459" data-claire-element-id="2142405" class="">On va utiliser cette historisation pour la table <em>Race</em>. Libre à vous d'adapter ou de créer les triggers d'autres tables pour les historiser également de cette manière.</p><p id="r-1990460" data-claire-element-id="2142406">On ajoute donc quatre colonnes à la table. Ces colonnes seront toujours remplies automatiquement par les triggers.</p><pre id="r-1990461" data-claire-element-id="6261519" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;-- On modifie la table Race\nALTER TABLE Race \n    ADD COLUMN date_insertion DATETIME, -- date d&amp;#x27;insertion\n    ADD COLUMN utilisateur_insertion VARCHAR(20), -- utilisateur ayant ins&amp;#xE9;r&amp;#xE9; la ligne\n    ADD COLUMN date_modification DATETIME, -- date de derni&amp;#xE8;re modification\n    ADD COLUMN utilisateur_modification VARCHAR(20); -- utilisateur ayant fait la derni&amp;#xE8;re modification\n\n-- On remplit les colonnes\nUPDATE Race \nSET date_insertion = NOW() - INTERVAL 1 DAY, \n    utilisateur_insertion = &amp;#x27;Test&amp;#x27;, \n    date_modification = NOW()- INTERVAL 1 DAY, \n    utilisateur_modification = &amp;#x27;Test&amp;#x27;;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- On modifie la table Race</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ALTER</span> <span class="ace_keyword">TABLE</span> <span class="ace_identifier">Race</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">ADD</span> <span class="ace_identifier">COLUMN</span> <span class="ace_identifier">date_insertion</span> <span class="ace_identifier">DATETIME</span>, <span class="ace_comment">-- date d'insertion</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">ADD</span> <span class="ace_identifier">COLUMN</span> <span class="ace_identifier">utilisateur_insertion</span> <span class="ace_storage ace_type">VARCHAR</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">20</span><span class="ace_paren ace_rparen">)</span>, <span class="ace_comment">-- utilisateur ayant inséré la ligne</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">ADD</span> <span class="ace_identifier">COLUMN</span> <span class="ace_identifier">date_modification</span> <span class="ace_identifier">DATETIME</span>, <span class="ace_comment">-- date de dernière modification</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">ADD</span> <span class="ace_identifier">COLUMN</span> <span class="ace_identifier">utilisateur_modification</span> <span class="ace_storage ace_type">VARCHAR</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">20</span><span class="ace_paren ace_rparen">)</span>; <span class="ace_comment">-- utilisateur ayant fait la dernière modification</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- On remplit les colonnes</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">UPDATE</span> <span class="ace_identifier">Race</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">SET</span> <span class="ace_identifier">date_insertion</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">-</span> <span class="ace_identifier">INTERVAL</span> <span class="ace_constant ace_numeric">1</span> <span class="ace_identifier">DAY</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">utilisateur_insertion</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">'Test'</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">date_modification</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_keyword ace_operator">-</span> <span class="ace_identifier">INTERVAL</span> <span class="ace_constant ace_numeric">1</span> <span class="ace_identifier">DAY</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">utilisateur_modification</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">'Test'</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990462" data-claire-element-id="2142408" class="">J'ai mis artificiellement les dates d'insertion et de dernière modification à la veille d'aujourd'hui, et les utilisateurs pour l'insertion et la modification à "Test", afin d'avoir des données intéressantes lors des tests. Idéalement, ce type d'historisation doit bien sûr être mis en place dès la création de la table.</p><p id="r-1990463" data-claire-element-id="2142409">Occupons-nous maintenant des triggers. Il en faut sur l'insertion et sur la modification.</p><pre id="r-1990464" data-claire-element-id="6261520" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;DELIMITER |\nCREATE TRIGGER before_insert_race BEFORE INSERT\nON Race FOR EACH ROW\nBEGIN\n    SET NEW.date_insertion = NOW();\n    SET NEW.utilisateur_insertion = CURRENT_USER();\n    SET NEW.date_modification = NOW();\n    SET NEW.utilisateur_modification = CURRENT_USER();\nEND |\n\nCREATE TRIGGER before_update_race BEFORE UPDATE\nON Race FOR EACH ROW\nBEGIN\n    SET NEW.date_modification = NOW();\n    SET NEW.utilisateur_modification = CURRENT_USER();\nEND |\nDELIMITER ;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_insert_race</span> <span class="ace_identifier">BEFORE</span> <span class="ace_keyword">INSERT</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Race</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">SET</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">date_insertion</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">SET</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">utilisateur_insertion</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">CURRENT_USER</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">SET</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">date_modification</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">SET</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">utilisateur_modification</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">CURRENT_USER</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_update_race</span> <span class="ace_identifier">BEFORE</span> <span class="ace_keyword">UPDATE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Race</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">SET</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">date_modification</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">SET</span> <span class="ace_identifier">NEW</span>.<span class="ace_identifier">utilisateur_modification</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">CURRENT_USER</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> ;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990465" data-claire-element-id="8570948" class="">Les triggers sont très simples : ils mettent simplement à jour les colonnes d'historisation nécessaires ; ils doivent donc nécessairement être<code data-claire-semantic="sql">BEFORE</code>.</p><p id="r-1990466" data-claire-element-id="2142412"><strong>Test</strong> :</p><pre id="r-1990467" data-claire-element-id="6261521" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;INSERT INTO Race (nom, description, espece_id, prix)\nVALUES (&amp;#x27;Yorkshire terrier&amp;#x27;, &amp;#x27;Chien de petite taille au pelage long et soyeux de couleur bleu et feu.&amp;#x27;, 1, 700.00);\n\nUPDATE Race \nSET prix = 630.00 \nWHERE nom = &amp;#x27;Rottweiller&amp;#x27; AND espece_id = 1;\n\nSELECT nom, DATE(date_insertion) AS date_ins, utilisateur_insertion AS utilisateur_ins, DATE(date_modification) AS date_mod, utilisateur_modification AS utilisateur_mod \nFROM Race \nWHERE espece_id = 1;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Race</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">nom</span>, <span class="ace_identifier">description</span>, <span class="ace_identifier">espece_id</span>, <span class="ace_identifier">prix</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span><span class="ace_string">'Yorkshire terrier'</span>, <span class="ace_string">'Chien de petite taille au pelage long et soyeux de couleur bleu et feu.'</span>, <span class="ace_constant ace_numeric">1</span>, <span class="ace_constant ace_numeric">700.00</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">UPDATE</span> <span class="ace_identifier">Race</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">SET</span> <span class="ace_identifier">prix</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">630.00</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">nom</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">'Rottweiller'</span> <span class="ace_keyword">AND</span> <span class="ace_identifier">espece_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">1</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">SELECT</span> <span class="ace_identifier">nom</span>, <span class="ace_storage ace_type">DATE</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">date_insertion</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword">AS</span> <span class="ace_identifier">date_ins</span>, <span class="ace_identifier">utilisateur_insertion</span> <span class="ace_keyword">AS</span> <span class="ace_identifier">utilisateur_ins</span>, <span class="ace_storage ace_type">DATE</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">date_modification</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword">AS</span> <span class="ace_identifier">date_mod</span>, <span class="ace_identifier">utilisateur_modification</span> <span class="ace_keyword">AS</span> <span class="ace_identifier">utilisateur_mod</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">FROM</span> <span class="ace_identifier">Race</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">espece_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">1</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><table id="r-1990525" data-claire-element-id="2142471" class=""><thead id="r-1990479" data-claire-element-id="2142425"><tr id="r-1990478" data-claire-element-id="2142424"><th id="r-1990469" data-claire-element-id="2142415"><p id="r-1990468" data-claire-element-id="2142414">nom</p></th><th id="r-1990471" data-claire-element-id="2142417"><p id="r-1990470" data-claire-element-id="2142416">date_ins</p></th><th id="r-1990473" data-claire-element-id="2142419"><p id="r-1990472" data-claire-element-id="2142418">utilisateur_ins</p></th><th id="r-1990475" data-claire-element-id="2142421"><p id="r-1990474" data-claire-element-id="2142420">date_mod</p></th><th id="r-1990477" data-claire-element-id="2142423"><p id="r-1990476" data-claire-element-id="2142422">utilisateur_mod</p></th></tr></thead><tbody id="r-1990524" data-claire-element-id="2142470"><tr id="r-1990490" data-claire-element-id="2142436"><td id="r-1990481" data-claire-element-id="2142427"><p id="r-1990480" data-claire-element-id="2142426">Berger allemand</p></td><td id="r-1990483" data-claire-element-id="2142429"><p id="r-1990482" data-claire-element-id="2142428">2012-05-02</p></td><td id="r-1990485" data-claire-element-id="2142431"><p id="r-1990484" data-claire-element-id="2142430">Test</p></td><td id="r-1990487" data-claire-element-id="2142433"><p id="r-1990486" data-claire-element-id="2142432">2012-05-02</p></td><td id="r-1990489" data-claire-element-id="2142435"><p id="r-1990488" data-claire-element-id="2142434">Test</p></td></tr><tr id="r-1990501" data-claire-element-id="2142447"><td id="r-1990492" data-claire-element-id="2142438"><p id="r-1990491" data-claire-element-id="2142437">Berger blanc suisse</p></td><td id="r-1990494" data-claire-element-id="2142440"><p id="r-1990493" data-claire-element-id="2142439">2012-05-02</p></td><td id="r-1990496" data-claire-element-id="2142442"><p id="r-1990495" data-claire-element-id="2142441">Test</p></td><td id="r-1990498" data-claire-element-id="2142444"><p id="r-1990497" data-claire-element-id="2142443">2012-05-02</p></td><td id="r-1990500" data-claire-element-id="2142446"><p id="r-1990499" data-claire-element-id="2142445">Test</p></td></tr><tr id="r-1990512" data-claire-element-id="2142458"><td id="r-1990503" data-claire-element-id="2142449"><p id="r-1990502" data-claire-element-id="2142448">Rottweiller</p></td><td id="r-1990505" data-claire-element-id="2142451"><p id="r-1990504" data-claire-element-id="2142450">2012-05-02</p></td><td id="r-1990507" data-claire-element-id="2142453"><p id="r-1990506" data-claire-element-id="2142452">Test</p></td><td id="r-1990509" data-claire-element-id="2142455"><p id="r-1990508" data-claire-element-id="2142454">2012-05-03</p></td><td id="r-1990511" data-claire-element-id="2142457"><p id="r-1990510" data-claire-element-id="2142456">sdz@localhost</p></td></tr><tr id="r-1990523" data-claire-element-id="2142469"><td id="r-1990514" data-claire-element-id="2142460"><p id="r-1990513" data-claire-element-id="2142459">Yorkshire terrier</p></td><td id="r-1990516" data-claire-element-id="2142462"><p id="r-1990515" data-claire-element-id="2142461">2012-05-03</p></td><td id="r-1990518" data-claire-element-id="2142464"><p id="r-1990517" data-claire-element-id="2142463">sdz@localhost</p></td><td id="r-1990520" data-claire-element-id="2142466"><p id="r-1990519" data-claire-element-id="2142465">2012-05-03</p></td><td id="r-1990522" data-claire-element-id="2142468"><p id="r-1990521" data-claire-element-id="2142467">sdz@localhost</p></td></tr></tbody></table><h5 id="r-1990600" data-claire-element-id="8570952">Historisation complète</h5><p id="r-1990527" data-claire-element-id="2142473" class="">Nous allons mettre en place un système d'historisation complet pour la table <em>Animal</em>. Celle-ci ne change pas et contiendra la dernière version des données. Par contre, on va ajouter une table <em>Animal_histo</em>, qui contiendra les versions antérieures (quand il y en a) des données d'<em>Animal</em>.</p><pre id="r-1990528" data-claire-element-id="6261523" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;CREATE TABLE Animal_histo (\n  id SMALLINT(6) UNSIGNED NOT NULL,     -- Colonnes historis&amp;#xE9;es\n  sexe CHAR(1),\n  date_naissance DATETIME NOT NULL,\n  nom VARCHAR(30),\n  commentaires TEXT,\n  espece_id SMALLINT(6) UNSIGNED NOT NULL,\n  race_id SMALLINT(6) UNSIGNED DEFAULT NULL,\n  mere_id SMALLINT(6) UNSIGNED DEFAULT NULL,\n  pere_id SMALLINT(6) UNSIGNED DEFAULT NULL,\n  disponible BOOLEAN DEFAULT TRUE,\n\n  date_histo DATETIME NOT NULL,         -- Colonnes techniques\n  utilisateur_histo VARCHAR(20) NOT NULL,\n  evenement_histo CHAR(6) NOT NULL,\n  PRIMARY KEY (id, date_histo)\n) ENGINE=InnoDB;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_keyword">TABLE</span> <span class="ace_identifier">Animal_histo</span> <span class="ace_paren ace_lparen">(</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">id</span> <span class="ace_identifier">SMALLINT</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">6</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">UNSIGNED</span> <span class="ace_keyword">NOT</span> <span class="ace_keyword">NULL</span>,     <span class="ace_comment">-- Colonnes historisées</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">sexe</span> <span class="ace_storage ace_type">CHAR</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">1</span><span class="ace_paren ace_rparen">)</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">date_naissance</span> <span class="ace_identifier">DATETIME</span> <span class="ace_keyword">NOT</span> <span class="ace_keyword">NULL</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">nom</span> <span class="ace_storage ace_type">VARCHAR</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">30</span><span class="ace_paren ace_rparen">)</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">commentaires</span> <span class="ace_storage ace_type">TEXT</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">espece_id</span> <span class="ace_identifier">SMALLINT</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">6</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">UNSIGNED</span> <span class="ace_keyword">NOT</span> <span class="ace_keyword">NULL</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">race_id</span> <span class="ace_identifier">SMALLINT</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">6</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">UNSIGNED</span> <span class="ace_keyword">DEFAULT</span> <span class="ace_keyword">NULL</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">mere_id</span> <span class="ace_identifier">SMALLINT</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">6</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">UNSIGNED</span> <span class="ace_keyword">DEFAULT</span> <span class="ace_keyword">NULL</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">pere_id</span> <span class="ace_identifier">SMALLINT</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">6</span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">UNSIGNED</span> <span class="ace_keyword">DEFAULT</span> <span class="ace_keyword">NULL</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">disponible</span> <span class="ace_identifier">BOOLEAN</span> <span class="ace_keyword">DEFAULT</span> <span class="ace_constant ace_language">TRUE</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">date_histo</span> <span class="ace_identifier">DATETIME</span> <span class="ace_keyword">NOT</span> <span class="ace_keyword">NULL</span>,         <span class="ace_comment">-- Colonnes techniques</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">utilisateur_histo</span> <span class="ace_storage ace_type">VARCHAR</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">20</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword">NOT</span> <span class="ace_keyword">NULL</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">evenement_histo</span> <span class="ace_storage ace_type">CHAR</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">6</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword">NOT</span> <span class="ace_keyword">NULL</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">PRIMARY</span> <span class="ace_keyword">KEY</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">id</span>, <span class="ace_identifier">date_histo</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">)</span> <span class="ace_identifier">ENGINE</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">InnoDB</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990529" data-claire-element-id="2142475" class="">Les colonnes <em>date_histo</em> et <em>utilisateur_histo</em> contiendront bien sûr la date à laquelle la ligne a été historisée, et l'utilisateur qui a provoqué cette historisation. Quant à la colonne <em>evenement_histo</em>, elle contiendra l'événement qui a déclenché le trigger (soit "DELETE", soit "UPDATE"). La clé primaire de cette table est le couple (<em>id</em>, <em>date_histo</em>).</p><p id="r-1990530" data-claire-element-id="8570950" class="">Voici les triggers nécessaires. Cette fois, ils pourraient être soit<code data-claire-semantic="sql">BEFORE</code>, soit<code data-claire-semantic="sql">AFTER</code>. Cependant, aucun traitement ne concerne les nouvelles valeurs de la ligne modifiée (ni, a fortiori, de la ligne supprimée). Par conséquent, autant utiliser<code data-claire-semantic="sql">AFTER</code>, cela évitera d'exécuter les instructions du trigger en cas d'erreur lors de la requête déclenchant celui-ci.</p><pre id="r-1990531" data-claire-element-id="6261524" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;DELIMITER |\nCREATE TRIGGER after_update_animal AFTER UPDATE\nON Animal FOR EACH ROW\nBEGIN\n    INSERT INTO Animal_histo (\n        id, \n        sexe, \n        date_naissance, \n        nom, \n        commentaires, \n        espece_id, \n        race_id, \n        mere_id, \n        pere_id, \n        disponible,\n\n        date_histo, \n        utilisateur_histo, \n        evenement_histo)\n    VALUES (\n        OLD.id,\n        OLD.sexe,\n        OLD.date_naissance,\n        OLD.nom,\n        OLD.commentaires,\n        OLD.espece_id,\n        OLD.race_id,\n        OLD.mere_id,\n        OLD.pere_id,\n        OLD.disponible,\n\n        NOW(),\n        CURRENT_USER(),\n        &amp;#x27;UPDATE&amp;#x27;);\nEND |\n\nCREATE TRIGGER after_delete_animal AFTER DELETE\nON Animal FOR EACH ROW\nBEGIN\n    INSERT INTO Animal_histo (\n        id, \n        sexe, \n        date_naissance, \n        nom, \n        commentaires, \n        espece_id, \n        race_id, \n        mere_id, \n        pere_id, \n        disponible,\n\n        date_histo, \n        utilisateur_histo, \n        evenement_histo)\n    VALUES (\n        OLD.id,\n        OLD.sexe,\n        OLD.date_naissance,\n        OLD.nom,\n        OLD.commentaires,\n        OLD.espece_id,\n        OLD.race_id,\n        OLD.mere_id,\n        OLD.pere_id,\n        OLD.disponible,\n\n        NOW(),\n        CURRENT_USER(),\n        &amp;#x27;DELETE&amp;#x27;);\nEND |\nDELIMITER ;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">after_update_animal</span> <span class="ace_identifier">AFTER</span> <span class="ace_keyword">UPDATE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Animal</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Animal_histo</span> <span class="ace_paren ace_lparen">(</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">id</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">sexe</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">date_naissance</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">nom</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">commentaires</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">espece_id</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">race_id</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">mere_id</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">pere_id</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">disponible</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">date_histo</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">utilisateur_histo</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">evenement_histo</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">id</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">sexe</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">date_naissance</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">nom</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">commentaires</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">espece_id</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">race_id</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">mere_id</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">pere_id</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">disponible</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">CURRENT_USER</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_string">'UPDATE'</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">after_delete_animal</span> <span class="ace_identifier">AFTER</span> <span class="ace_keyword">DELETE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Animal</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Animal_histo</span> <span class="ace_paren ace_lparen">(</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">id</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">sexe</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">date_naissance</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">nom</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">commentaires</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">espece_id</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">race_id</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">mere_id</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">pere_id</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">disponible</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">date_histo</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">utilisateur_histo</span>, 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">evenement_histo</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">VALUES</span> <span class="ace_paren ace_lparen">(</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">id</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">sexe</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">date_naissance</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">nom</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">commentaires</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">espece_id</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">race_id</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">mere_id</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">pere_id</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">OLD</span>.<span class="ace_identifier">disponible</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">CURRENT_USER</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_string">'DELETE'</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> ;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><p id="r-1990532" data-claire-element-id="8570951">Cette fois, ce sont les valeurs avant modification/suppression qui nous intéressent, d'où l'utilisation de<code data-claire-semantic="sql">OLD</code>.</p><p id="r-1990533" data-claire-element-id="2142479"><strong>Test </strong>:</p><pre id="r-1990534" data-claire-element-id="6261525" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;UPDATE Animal\nSET commentaires = &amp;#x27;Petit pour son &amp;#xE2;ge&amp;#x27;\nWHERE id = 10;\n\nDELETE FROM Animal\nWHERE id = 47;\n\nSELECT id, sexe, date_naissance, nom, commentaires, espece_id\nFROM Animal \nWHERE id IN (10, 47);\n\nSELECT id, nom, date_histo, utilisateur_histo, evenement_histo \nFROM Animal_histo;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">UPDATE</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">SET</span> <span class="ace_identifier">commentaires</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">'Petit pour son âge'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">10</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">DELETE</span> <span class="ace_keyword">FROM</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">47</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">SELECT</span> <span class="ace_identifier">id</span>, <span class="ace_identifier">sexe</span>, <span class="ace_identifier">date_naissance</span>, <span class="ace_identifier">nom</span>, <span class="ace_identifier">commentaires</span>, <span class="ace_identifier">espece_id</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">FROM</span> <span class="ace_identifier">Animal</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">id</span> <span class="ace_identifier">IN</span> <span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">10</span>, <span class="ace_constant ace_numeric">47</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">SELECT</span> <span class="ace_identifier">id</span>, <span class="ace_identifier">nom</span>, <span class="ace_identifier">date_histo</span>, <span class="ace_identifier">utilisateur_histo</span>, <span class="ace_identifier">evenement_histo</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">FROM</span> <span class="ace_identifier">Animal_histo</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><table id="r-1990563" data-claire-element-id="2142509"><thead id="r-1990548" data-claire-element-id="2142494"><tr id="r-1990547" data-claire-element-id="2142493"><th id="r-1990536" data-claire-element-id="2142482"><p id="r-1990535" data-claire-element-id="2142481">id</p></th><th id="r-1990538" data-claire-element-id="2142484"><p id="r-1990537" data-claire-element-id="2142483">sexe</p></th><th id="r-1990540" data-claire-element-id="2142486"><p id="r-1990539" data-claire-element-id="2142485">date_naissance</p></th><th id="r-1990542" data-claire-element-id="2142488"><p id="r-1990541" data-claire-element-id="2142487">nom</p></th><th id="r-1990544" data-claire-element-id="2142490"><p id="r-1990543" data-claire-element-id="2142489">commentaires</p></th><th id="r-1990546" data-claire-element-id="2142492"><p id="r-1990545" data-claire-element-id="2142491">espece_id</p></th></tr></thead><tbody id="r-1990562" data-claire-element-id="2142508"><tr id="r-1990561" data-claire-element-id="2142507"><td id="r-1990550" data-claire-element-id="2142496"><p id="r-1990549" data-claire-element-id="2142495">10</p></td><td id="r-1990552" data-claire-element-id="2142498"><p id="r-1990551" data-claire-element-id="2142497">M</p></td><td id="r-1990554" data-claire-element-id="2142500"><p id="r-1990553" data-claire-element-id="2142499">2010-07-21 15:41:00</p></td><td id="r-1990556" data-claire-element-id="2142502"><p id="r-1990555" data-claire-element-id="2142501">Bobo</p></td><td id="r-1990558" data-claire-element-id="2142504"><p id="r-1990557" data-claire-element-id="2142503">Petit pour son âge</p></td><td id="r-1990560" data-claire-element-id="2142506"><p id="r-1990559" data-claire-element-id="2142505">1</p></td></tr></tbody></table><table id="r-1990599" data-claire-element-id="2142545"><thead id="r-1990575" data-claire-element-id="2142521"><tr id="r-1990574" data-claire-element-id="2142520"><th id="r-1990565" data-claire-element-id="2142511"><p id="r-1990564" data-claire-element-id="2142510">id</p></th><th id="r-1990567" data-claire-element-id="2142513"><p id="r-1990566" data-claire-element-id="2142512">nom</p></th><th id="r-1990569" data-claire-element-id="2142515"><p id="r-1990568" data-claire-element-id="2142514">date_histo</p></th><th id="r-1990571" data-claire-element-id="2142517"><p id="r-1990570" data-claire-element-id="2142516">utilisateur_histo</p></th><th id="r-1990573" data-claire-element-id="2142519"><p id="r-1990572" data-claire-element-id="2142518">evenement_histo</p></th></tr></thead><tbody id="r-1990598" data-claire-element-id="2142544"><tr id="r-1990586" data-claire-element-id="2142532"><td id="r-1990577" data-claire-element-id="2142523"><p id="r-1990576" data-claire-element-id="2142522">10</p></td><td id="r-1990579" data-claire-element-id="2142525"><p id="r-1990578" data-claire-element-id="2142524">Bobo</p></td><td id="r-1990581" data-claire-element-id="2142527"><p id="r-1990580" data-claire-element-id="2142526">2012-05-03 21:51:12</p></td><td id="r-1990583" data-claire-element-id="2142529"><p id="r-1990582" data-claire-element-id="2142528">sdz@localhost</p></td><td id="r-1990585" data-claire-element-id="2142531"><p id="r-1990584" data-claire-element-id="2142530">UPDATE</p></td></tr><tr id="r-1990597" data-claire-element-id="2142543"><td id="r-1990588" data-claire-element-id="2142534"><p id="r-1990587" data-claire-element-id="2142533">47</p></td><td id="r-1990590" data-claire-element-id="2142536"><p id="r-1990589" data-claire-element-id="2142535">Scroupy</p></td><td id="r-1990592" data-claire-element-id="2142538"><p id="r-1990591" data-claire-element-id="2142537">2012-05-03 21:51:12</p></td><td id="r-1990594" data-claire-element-id="2142540"><p id="r-1990593" data-claire-element-id="2142539">sdz@localhost</p></td><td id="r-1990596" data-claire-element-id="2142542"><p id="r-1990595" data-claire-element-id="2142541">DELETE</p></td></tr></tbody></table><h5 id="r-1990602" data-claire-element-id="2142548" class="">Quelques remarques sur l'historisation</h5><p id="r-1990601" data-claire-element-id="2142547" class="">Les deux systèmes d'historisation montrés dans ce cours ne sont que deux possibilités parmi des dizaines. Si vous pensez avoir besoin d'un système de ce type, prenez le temps de réfléchir, et de vous renseigner sur les diverses possibilités qui s'offrent à vous.<br> Dans certains systèmes, on combine les deux historisations que j'ai présentées. <br> Parfois, on ne conserve pas les lignes supprimées dans la table d'historisation, mais on utilise plutôt un système d'archive, séparé de l'historisation.<br> Au-delà du modèle d'historisation que vous choisirez, les détails sont également modifiables. Voulez-vous garder toutes les versions des données, ou les garder seulement pour une certaine période de temps ? Voulez-vous enregistrer l'utilisateur SQL ou plutôt des utilisateurs créés pour votre application, découplés des utilisateurs SQL ?<br> Ne restez pas bloqués sur les exemples montrés dans ce cours (que ce soit pour l'historisation ou le reste), le monde est vaste !</p></div></div><div class="foldable" id="ui-id-5" data-widget="foldable"><h3 id="r-1973089" data-claire-element-id="8570983" class="foldable__button secondTitle js-foldable-button">Restrictions<i class="foldable__icon icon-next"></i></h3><div class="foldable__content"><p id="r-1990604" data-claire-element-id="2142551" class="">Les restrictions sur les triggers sont malheureusement trop importantes pour qu'on puisse se permettre de ne pas les mentionner. On peut espérer qu'une partie de ces restrictions soit levée dans une prochaine version de MySQL, mais en attendant, il est nécessaire d'avoir celles-ci en tête.<br> Voici donc les principales.</p><h5 id="r-1990613" data-claire-element-id="8570961">Commandes interdites</h5><p id="r-1990605" data-claire-element-id="8570955"><strong>Il est impossible de travailler avec des transactions à l'intérieur d'un trigger. </strong><br> Cette restriction est nécessaire, puisque la requête ayant provoqué l'exécution du trigger pourrait très bien se trouver elle-même à l'intérieur d'une transaction. Auquel cas, toute commande<code data-claire-semantic="sql">START TRANSACTION</code>,<code data-claire-semantic="sql">COMMIT</code>ou<code data-claire-semantic="sql">ROLLBACK</code>interagirait avec cette transaction, de manière intempestive.</p><p id="r-1990606" data-claire-element-id="2142553"><strong>Les requêtes préparées ne peuvent pas non plus être utilisées.</strong></p><p id="r-1990607" data-claire-element-id="2142554">Enfin, on ne peut pas appeler n'importe quelle procédure à partir d'un trigger.</p><ul id="r-1990612" data-claire-element-id="8570960"><li id="r-1990609" data-claire-element-id="8570957"><p id="r-1990608" data-claire-element-id="8570956">Les procédures appelées par un trigger <strong>ne peuvent pas envoyer d'informations au client MySQL</strong>. Par exemple, elles ne peuvent pas exécuter un simple<code data-claire-semantic="sql">SELECT</code>, qui produit un affichage dans le client (un<code data-claire-semantic="sql">SELECT...INTO</code>par contre est permis). Elles peuvent toutefois renvoyer des informations au trigger grâce à des paramètres<code data-claire-semantic="sql">OUT</code>ou<code data-claire-semantic="sql">INOUT</code>.</p></li><li id="r-1990611" data-claire-element-id="8570959"><p id="r-1990610" data-claire-element-id="8570958">Les procédures appelées ne peuvent utiliser ni les transactions (<code data-claire-semantic="sql">START TRANSACTION</code>,<code data-claire-semantic="sql">COMMIT</code>ou<code data-claire-semantic="sql">ROLLBACK</code>) ni les requêtes préparées. C'est-à-dire qu'<strong>elles doivent respecter les restrictions des triggers</strong>.</p></li></ul><h5 id="r-1990620" data-claire-element-id="8570964">Tables utilisées par la requête</h5><p id="r-1990614" data-claire-element-id="2142561" class="">Comme mentionné auparavant, il est <strong>impossible de modifier les données d'une table utilisée par la requête ayant déclenché le trigger</strong> à l'intérieur de celui-ci.</p><p id="r-1990615" data-claire-element-id="2142562" class="">Cette restriction est importante, et peut remettre en question l'utilisation de certains triggers.</p><p id="r-1990616" data-claire-element-id="8570962"><strong>Exemple</strong> : le trigger<code data-claire-semantic="sql">AFTER INSERT ON Adoption</code>modifie les données de la table <em>Animal</em>. Si l'on exécute la requête suivante, cela posera problème.</p><pre id="r-1990617" data-claire-element-id="6261529" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;INSERT INTO Adoption (animal_id, client_id, date_reservation, prix, paye)\nSELECT Animal.id, 4, NOW(), COALESCE(Race.prix, Espece.prix), FALSE \nFROM Animal\nINNER JOIN Espece ON Espece.id = Animal.espece_id\nLEFT JOIN Race ON Race.id = Animal.race_id\nWHERE Animal.nom = &amp;#x27;Boucan&amp;#x27; AND Animal.espece_id = 2;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">INSERT</span> <span class="ace_identifier">INTO</span> <span class="ace_identifier">Adoption</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">animal_id</span>, <span class="ace_identifier">client_id</span>, <span class="ace_identifier">date_reservation</span>, <span class="ace_identifier">prix</span>, <span class="ace_identifier">paye</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">SELECT</span> <span class="ace_identifier">Animal</span>.<span class="ace_identifier">id</span>, <span class="ace_constant ace_numeric">4</span>, <span class="ace_support ace_function">NOW</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>, <span class="ace_support ace_function">COALESCE</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">Race</span>.<span class="ace_identifier">prix</span>, <span class="ace_identifier">Espece</span>.<span class="ace_identifier">prix</span><span class="ace_paren ace_rparen">)</span>, <span class="ace_constant ace_language">FALSE</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">FROM</span> <span class="ace_identifier">Animal</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">INNER</span> <span class="ace_keyword">JOIN</span> <span class="ace_identifier">Espece</span> <span class="ace_keyword">ON</span> <span class="ace_identifier">Espece</span>.<span class="ace_identifier">id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Animal</span>.<span class="ace_identifier">espece_id</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">LEFT</span> <span class="ace_keyword">JOIN</span> <span class="ace_identifier">Race</span> <span class="ace_keyword">ON</span> <span class="ace_identifier">Race</span>.<span class="ace_identifier">id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Animal</span>.<span class="ace_identifier">race_id</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">WHERE</span> <span class="ace_identifier">Animal</span>.<span class="ace_identifier">nom</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">'Boucan'</span> <span class="ace_keyword">AND</span> <span class="ace_identifier">Animal</span>.<span class="ace_identifier">espece_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">2</span>;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><pre id="r-1990618" data-claire-element-id="2142565" class=""><samp>ERROR&nbsp;1442&nbsp;(HY000):&nbsp;Can't&nbsp;update&nbsp;table&nbsp;'animal'&nbsp;in&nbsp;stored&nbsp;function/trigger&nbsp;because&nbsp;it&nbsp;is&nbsp;already&nbsp;used&nbsp;by&nbsp;statement&nbsp;which&nbsp;invoked&nbsp;this&nbsp;stored&nbsp;function/trigger.</samp></pre><p id="r-1990619" data-claire-element-id="8570963" class="">Le trigger échoue puisque la table <em>Animal</em> est utilisée par la requête<code data-claire-semantic="sql">INSERT</code>qui le déclenche. L'insertion elle-même est donc finalement annulée.</p><h5 id="r-1990640" data-claire-element-id="8570978" class="">Clés étrangères</h5><p id="r-1990621" data-claire-element-id="8570965" class=""><strong>Une suppression ou modification de données déclenchée par une clé étrangère ne provoquera pas l'exécution du trigger correspondant.</strong><br> Par exemple, la colonne <em>Animal.race_id</em> possède une clé étrangère, qui référence la colonne <em>Race.id</em>. Cette clé étrangère a été définie avec l'option<code data-claire-semantic="sql">ON DELETE SET NULL</code>. Donc en cas de suppression d'une race, tous les animaux de cette race seront modifiés, et leur <em>race_id</em> changée en<code data-claire-semantic="sql">NULL</code>. Il s'agit donc d'une modification de données. Mais comme cette modification a été déclenchée par une contrainte de clé étrangère, les éventuels triggers<code data-claire-semantic="sql">BEFORE UPDATE</code>et<code data-claire-semantic="sql">AFTER UPDATE</code>de la table <em>Animal</em> ne seront pas déclenchés.</p><p id="r-1990622" data-claire-element-id="2142569" class="">En cas d'utilisation de triggers sur des tables présentant des clés étrangères avec ces options, il vaut donc mieux supprimer celles-ci et déplacer ce comportement dans des triggers. <br> Une autre solution est de ne pas utiliser les triggers sur les tables concernées. Vous pouvez alors remplacer les triggers par l'utilisation de procédures stockées et/ou de transactions.</p><div id="r-1990624" data-claire-element-id="2142571" data-claire-semantic="question"><p id="r-1990623" data-claire-element-id="2142570">Qu'avons-nous comme clés étrangères dans nos tables ?</p></div><ul id="r-1990635" data-claire-element-id="8570976"><li id="r-1990626" data-claire-element-id="8570967"><p id="r-1990625" data-claire-element-id="8570966"><em>Race</em> :<code data-claire-semantic="sql">CONSTRAINT fk_race_espece_id FOREIGN KEY (espece_id) REFERENCES Espece (id) ON DELETE CASCADE;</code></p></li><li id="r-1990628" data-claire-element-id="8570969"><p id="r-1990627" data-claire-element-id="8570968"><em>Animal</em> :<code data-claire-semantic="sql">CONSTRAINT fk_race_id FOREIGN KEY (race_id) REFERENCES Race (id) ON DELETE SET NULL;</code></p></li><li id="r-1990630" data-claire-element-id="8570971"><p id="r-1990629" data-claire-element-id="8570970"><em>Animal</em> :<code data-claire-semantic="sql">CONSTRAINT fk_espece_id FOREIGN KEY (espece_id) REFERENCES Espece (id);</code></p></li><li id="r-1990632" data-claire-element-id="8570973"><p id="r-1990631" data-claire-element-id="8570972"><em>Animal</em> :<code data-claire-semantic="sql">CONSTRAINT fk_mere_id FOREIGN KEY (mere_id) REFERENCES Animal (id) ON DELETE SET NULL;</code></p></li><li id="r-1990634" data-claire-element-id="8570975"><p id="r-1990633" data-claire-element-id="8570974"><em>Animal</em> :<code data-claire-semantic="sql">CONSTRAINT fk_pere_id FOREIGN KEY (pere_id) REFERENCES Animal (id) ON DELETE SET NULL;</code></p></li></ul><p id="r-1990636" data-claire-element-id="2142583">Quatre d'entre elles pourraient donc poser problème. Quatre, sur cinq ! Ce n'est donc pas anodin comme restriction !</p><p id="r-1990637" data-claire-element-id="8570977">On va donc modifier nos clés étrangères pour qu'elles reprennent leur comportement par défaut. Il faudra ensuite créer (ou recréer) quelques triggers pour reproduire le comportement que l'on avait défini.<br> À ceci près que la restriction sur la modification des données d'une table utilisée par l'événement déclencheur fait qu'on ne pourra pas reproduire certains comportements. On ne pourra pas mettre à<code data-claire-semantic="sql">NULL</code>les colonnes <em>pere_id</em> et <em>mere_id</em> de la table <em>Animal</em> en cas de suppression de l'animal de référence.</p><p id="r-1990638" data-claire-element-id="2142585">Voici les commandes :</p><pre id="r-1990639" data-claire-element-id="6261531" class="code-block"><code data-claire-semantic="sql" data-code="{&quot;language&quot;:&quot;sql&quot;,&quot;source&quot;:&quot;-- On supprime les cl&amp;#xE9;s\nALTER TABLE Race DROP FOREIGN KEY fk_race_espece_id;\nALTER TABLE Animal DROP FOREIGN KEY fk_race_id,\n                   DROP FOREIGN KEY fk_mere_id,\n                   DROP FOREIGN KEY fk_pere_id;\n\n-- On les recr&amp;#xE9;e sans option\nALTER TABLE Race \n    ADD CONSTRAINT fk_race_espece_id FOREIGN KEY (espece_id) REFERENCES Espece (id);\nALTER TABLE Animal \n    ADD CONSTRAINT fk_race_id FOREIGN KEY (race_id) REFERENCES Race (id),\n    ADD CONSTRAINT fk_mere_id FOREIGN KEY (mere_id) REFERENCES Animal (id),\n    ADD CONSTRAINT fk_pere_id FOREIGN KEY (pere_id) REFERENCES Animal (id);\n\n-- Trigger sur Race\nDELIMITER |\nCREATE TRIGGER before_delete_race BEFORE DELETE\nON Race FOR EACH ROW\nBEGIN\n    UPDATE Animal \n    SET race_id = NULL\n    WHERE race_id = OLD.id;\nEND|\n\n-- Trigger sur Espece\nCREATE TRIGGER before_delete_espece BEFORE DELETE\nON Espece FOR EACH ROW\nBEGIN\n    DELETE FROM Race\n    WHERE espece_id = OLD.id;\nEND |\nDELIMITER ;&quot;}" class="ace" data-widget="codeBlock"><div class="ace-openclassrooms"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- On supprime les clés</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ALTER</span> <span class="ace_keyword">TABLE</span> <span class="ace_identifier">Race</span> <span class="ace_keyword">DROP</span> <span class="ace_keyword">FOREIGN</span> <span class="ace_keyword">KEY</span> <span class="ace_identifier">fk_race_espece_id</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ALTER</span> <span class="ace_keyword">TABLE</span> <span class="ace_identifier">Animal</span> <span class="ace_keyword">DROP</span> <span class="ace_keyword">FOREIGN</span> <span class="ace_keyword">KEY</span> <span class="ace_identifier">fk_race_id</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>   <span class="ace_keyword">DROP</span> <span class="ace_keyword">FOREIGN</span> <span class="ace_keyword">KEY</span> <span class="ace_identifier">fk_mere_id</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>   <span class="ace_keyword">DROP</span> <span class="ace_keyword">FOREIGN</span> <span class="ace_keyword">KEY</span> <span class="ace_identifier">fk_pere_id</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- On les recrée sans option</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ALTER</span> <span class="ace_keyword">TABLE</span> <span class="ace_identifier">Race</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">ADD</span> <span class="ace_identifier">CONSTRAINT</span> <span class="ace_identifier">fk_race_espece_id</span> <span class="ace_keyword">FOREIGN</span> <span class="ace_keyword">KEY</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">espece_id</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword">REFERENCES</span> <span class="ace_identifier">Espece</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">id</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ALTER</span> <span class="ace_keyword">TABLE</span> <span class="ace_identifier">Animal</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">ADD</span> <span class="ace_identifier">CONSTRAINT</span> <span class="ace_identifier">fk_race_id</span> <span class="ace_keyword">FOREIGN</span> <span class="ace_keyword">KEY</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">race_id</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword">REFERENCES</span> <span class="ace_identifier">Race</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">id</span><span class="ace_paren ace_rparen">)</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">ADD</span> <span class="ace_identifier">CONSTRAINT</span> <span class="ace_identifier">fk_mere_id</span> <span class="ace_keyword">FOREIGN</span> <span class="ace_keyword">KEY</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">mere_id</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword">REFERENCES</span> <span class="ace_identifier">Animal</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">id</span><span class="ace_paren ace_rparen">)</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">ADD</span> <span class="ace_identifier">CONSTRAINT</span> <span class="ace_identifier">fk_pere_id</span> <span class="ace_keyword">FOREIGN</span> <span class="ace_keyword">KEY</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">pere_id</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword">REFERENCES</span> <span class="ace_identifier">Animal</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">id</span><span class="ace_paren ace_rparen">)</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- Trigger sur Race</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_delete_race</span> <span class="ace_identifier">BEFORE</span> <span class="ace_keyword">DELETE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Race</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">UPDATE</span> <span class="ace_identifier">Animal</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">SET</span> <span class="ace_identifier">race_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">NULL</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">WHERE</span> <span class="ace_identifier">race_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">OLD</span>.<span class="ace_identifier">id</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span>|
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">-- Trigger sur Espece</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">CREATE</span> <span class="ace_identifier">TRIGGER</span> <span class="ace_identifier">before_delete_espece</span> <span class="ace_identifier">BEFORE</span> <span class="ace_keyword">DELETE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">ON</span> <span class="ace_identifier">Espece</span> <span class="ace_identifier">FOR</span> <span class="ace_identifier">EACH</span> <span class="ace_identifier">ROW</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">BEGIN</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">DELETE</span> <span class="ace_keyword">FROM</span> <span class="ace_identifier">Race</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">WHERE</span> <span class="ace_identifier">espece_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">OLD</span>.<span class="ace_identifier">id</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">END</span> |
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">DELIMITER</span> ;
</div></div></div></code><textarea class="code-block--raw-code"></textarea></pre><h5 id="r-1990653" data-claire-element-id="8570982">En résumé</h5><ul id="r-1990651" data-claire-element-id="8570981"><li id="r-1990642" data-claire-element-id="2142589"><p id="r-1990641" data-claire-element-id="2142588">Un trigger est un objet <strong>stocké dans la base de données</strong>, à la manière d'une table ou d'une procédure stockée. La seule différence est qu'un trigger est <strong>lié à une table</strong>, donc en cas de suppression d'une table, les triggers liés à celle-ci sont supprimés également</p></li><li id="r-1990644" data-claire-element-id="2142591"><p id="r-1990643" data-claire-element-id="2142590">Un trigger <strong>définit une ou plusieurs instructions</strong>, dont l'exécution est <strong>déclenchée par une insertion, une modification ou une suppression</strong> de données dans la table à laquelle le trigger est lié.</p></li><li id="r-1990646" data-claire-element-id="2142593"><p id="r-1990645" data-claire-element-id="2142592">Les instructions du trigger peuvent être exécutées <strong>avant la requête ayant déclenché celui-ci, ou après</strong>. Ce comportement est à définir à la création du trigger.</p></li><li id="r-1990648" data-claire-element-id="8570980"><p id="r-1990647" data-claire-element-id="8570979">Une table ne peut posséder qu'un seul trigger par combinaison événement/moment (<code data-claire-semantic="sql">BEFORE UPDATE</code>,<code data-claire-semantic="sql">AFTER DELETE</code>,…)</p></li><li id="r-1990650" data-claire-element-id="2142597"><p id="r-1990649" data-claire-element-id="2142596">Les triggers sous MySQL sont soumis à d'importantes (et potentiellement très gênantes) <strong>restrictions</strong>.</p></li></ul><p id="r-1990652" data-claire-element-id="2142599">Sécuriser une base de données et automatiser les traitements ne se limite bien sûr pas à ce que nous venons de voir. Les deux prochaines parties vous donneront de nouveaux outils pour avoir une base de données bien construite, sûre et efficace.<br> Cependant, tout ne pourra pas être abordé dans ce cours, donc n'hésitez pas à poursuivre votre apprentissage.</p><aside id="r-3850987" data-claire-element-id="6261534" data-claire-semantic="information"><p id="r-3850986" data-claire-element-id="6261533"><a href="https://fr.surveymonkey.com/r/YSGWVDV">Que pensez-vous de ce cours ?</a></p></aside></div></div>
</div>
<div class="js-courseSelementActions sideActions" data-widget="courseElementActions" style="height: 1290px; top: 14686px; left: -37.5px;">
<ul class="sideActions__container">
<li>
<a class="sideActions__item  js-courseElementActions-copyUrl  js-tooltip" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#/id/r-1990531" data-tooltip="Copier le lien" data-tooltip-done="Lien copié !" data-clipboard-text="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#/id/r-1990531">
#
</a>
</li>
</ul>
</div>
</div>
<div class="text-center space-top">
<form name="form" method="post" action="https://openclassrooms.com/courses/1959476/parts/1973090/mark-as-complete" class=" oc-form">
<button type="submit" id="form_submit" name="form[submit]" class="button button--primary button"><i class="icon-to_do"></i> J'ai terminé ce chapitre et je passe au suivant</button>
<input type="hidden" id="form__token" name="form[_token]" class=" textInput textInput--hidden" value="odd5OBJfA0AqjXJvTbbawnJjBuQ6xJ2afdWyBlh9BNc">
</form>
</div>
<nav class="course-pagination    clearfix">
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/gestionnaires-d-erreurs-curseurs-et-utilisation-avancee" class="button course-pagination__btn course-pagination__btn--previous">
<i class="icon-previous"></i>
<span>Gestionnaires d'erreurs, curseurs et utilisation avancée</span>
</a>
<span class="course-pagination__separator"></span>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercises/302" class="button course-pagination__btn course-pagination__btn--next">
<span>Quiz : Quiz 4</span>
<i class="icon-next"></i>
</a>
</nav>
<aside tabindex="-1" role="dialog" aria-labelledby="popin-view-restriction_popin_title" class="popin popin--illustrated  js-popin" id="popin-view-restriction">
<i class="popin__close-button icon-close js-close-button"></i>
<div class="popin__inner">
<div class="popin__illustrationWrapper">
<div class="popin__illustration illustration--balloon"></div>
</div>

<div class="popin__mainContainer">
<h3 id="popin-view-restriction_popin_title" class="popin__title  js-popin-title">Waouh&nbsp;!</h3>
<div class="popin__content  js-popin-content">
<div class="popin__contentWrapper">
<p>
Très heureux de voir que nos cours vous plaisent, déjà 5 pages lues aujourd'hui ! Vous pouvez continuer la lecture de nos cours en devenant un membre de la communauté d'OpenClassrooms. C'est gratuit !
</p>
<p>
Vous pourrez aussi suivre votre avancement dans le cours, faire les exercices et discuter avec les autres membres.
</p>
</div>
</div>
<div class="popin__actions  js-popin-actions">
<span class="u--inlineBlock">
<a class="button button--primary " href="https://openclassrooms.com/register">S'inscrire</a>
</span>
<span class="u--inlineBlock">
<a class="button button " href="https://openclassrooms.com/login">Se connecter</a>
</span>
</div>
</div>
</div>
</aside>
</div>
</section>
</div>
</div>
<div id="popin-not-certifying-yet_165962" class="popin" data-popin-title="Vous ne pouvez pas encore obtenir de certificat de réussite à l&#39;issue de ce cours.
                    ">
<img alt="Exemple de certificat de réussite" src="./Triggers - Administrez vos bases de données avec MySQL_files/certif.jpg">
</div>
<div id="popin-not-certifying-yet_638081" class="popin" data-popin-title="Vous ne pouvez pas encore obtenir de certificat de réussite à l&#39;issue de ce cours.
                    ">
<img alt="Exemple de certificat de réussite" src="./Triggers - Administrez vos bases de données avec MySQL_files/certif.jpg">
</div>
</main>
<aside class="contentWithSidebar__sidebar  js-contentWithSidebar-slidingElement">
<nav class="col-nav">
<div id="tab-courseMenu" class="col-nav__inner js-sidebar-inner">
<div class="col-nav__block  col-nav__block--summary">
<div class="side-paginate">
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/gestionnaires-d-erreurs-curseurs-et-utilisation-avancee" class="side-paginate__previous" title="Chapitre précédent">
<i class="icon-previous"></i>
</a>
<span class="side-paginate__separator"></span>
<h6 class="side-paginate__title">
Sécuriser et automatiser ses actions
</h6>
<span class="side-paginate__separator"></span>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercises/302" class="side-paginate__next" title="Chapitre suivant">
<i class="icon-next"></i>
</a>
</div>
<div class="col-nav__block--summary-list">
<ol class="col-nav__chapters">
<li class="">
<a class="col-nav__chapterTitle" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/transactions">Transactions</a>
</li>
<li class="">
 <a class="col-nav__chapterTitle" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/verrous">Verrous</a>
</li>
<li class="">
<a class="col-nav__chapterTitle" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/requetes-preparees">Requêtes préparées</a>
</li>
<li class="">
<a class="col-nav__chapterTitle" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/procedures-stockees">Procédures stockées</a>
</li>
<li class="">
<a class="col-nav__chapterTitle" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/structurer-ses-instructions">Structurer ses instructions</a>
</li>
<li class="">
<a class="col-nav__chapterTitle" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/gestionnaires-d-erreurs-curseurs-et-utilisation-avancee">Gestionnaires d'erreurs, curseurs et utilisation avancée</a>
</li>
<li class="selected">
<span class="col-nav__chapterTitle">Triggers</span>
</li>
</ol>
<div class="tocExercise"><ul class="tocExercise__list"><li class="tocExercise__item "><a class="tocExercise__link " href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/exercises/302"><i class="tocExercise__icon icon-test"></i><span class="tocExercise__text">Quiz : Quiz 4</span></a></li></ul></div> </div>
</div>
<div class="col-nav__block col-nav__block--button">
<a href="https://openclassrooms.com/forum/categorie/base-de-donnees" class="button">
Accéder au forum
</a>
</div>
<div class="col-nav__block col-nav__block--institution">
<h2>Créé par</h2>
<a href="https://openclassrooms.com/partners/openclassrooms" target="_blank">
<span data-image-cdn-attr-src="//sdz-upload.s3.amazonaws.com/prod/partners/img/logo_logo-oc.png" data-image-cdn-attr-alt="logo OpenClassrooms" data-image-cdn-attr-class="col-nav__institutionLogo"><img data-reactroot="" src="./Triggers - Administrez vos bases de données avec MySQL_files/logo_logo-oc.png" class="col-nav__institutionLogo" alt="logo OpenClassrooms"></span>
<p class="col-nav__block--institutionDescription">
OpenClassrooms, Leading <span class="nowrap">E-Learning<span> Platform in Europe
</span></span></p>
</a>
</div>
<div class="socialNetwork col-nav__block">
<ul class="socialButtons  js-socialButtons" data-options="
                title: &#39;Triggers @OpenClassrooms&#39;,
        mailTitle: &#39;Cours &quot;Triggers&quot; sur OpenClassrooms&#39;,
        mailContent: &#39;Découvrez le cours &quot;Triggers&quot; sur OpenClassrooms.&#39;" data-widget="socialButtons">
<li>
<a class="roundIcon  roundIcon--twitter addthis_button_twitter  js-socialButtons-btn js-tooltip at300b" data-tooltip="Partagez sur Twitter" addthis:url="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers?lang=fr" addthis:title="Triggers @OpenClassrooms" title="Twitter" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#">
<i class="roundIcon__icon  icon-twitter"></i>
</a>
</li>
<li>
<a class="roundIcon  roundIcon--facebook  addthis_button_facebook  js-socialButtons-btn js-tooltip at300b" data-tooltip="Partagez sur Facebook" addthis:url="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers?lang=fr" addthis:title="Triggers @OpenClassrooms" title="Facebook" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#">
<i class="roundIcon__icon  icon-facebook"></i>
</a>
</li>
<li>
<a class="roundIcon  roundIcon--googlePlus  addthis_button_google_plusone_share  js-socialButtons-btn js-tooltip at300b" data-tooltip="Partagez sur Google+" addthis:url="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers?lang=fr" addthis:title="Triggers @OpenClassrooms" target="_blank" title="Google+" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#">
<i class="roundIcon__icon  icon-google"></i>
</a>
</li>
<li>
<a class="roundIcon  addthis_button_email  js-socialButtons-btn  js-socialButtons-email js-tooltip at300b" data-tooltip="Partagez par e-mail" addthis:url="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers?lang=fr" addthis:ui_email_title="Triggers @OpenClassrooms" addthis:ui_email_note="Découvrez le cours &quot;Triggers&quot; sur OpenClassrooms." addthis:title="Cours &quot;Triggers&quot; sur OpenClassrooms" target="_blank" title="Email" href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#">
<i class="roundIcon__icon  icon-letter"></i>
</a>
</li>
</ul>
</div>
</div>
</nav>
</aside>
</div>
</div>
<footer class="alt-section">
<div class="centered">
<div class="row">
<div class="col4 course-bottom__category">
<h2 class="highlighted">
Le professeur
</h2>
<div>
<a itemprop="author" itemscope="" itemtype="http://schema.org/Person" href="https://openclassrooms.com/membres/taguan-69244" class="no-underlined">
<div class="course-bottom__text-illustrated">
<span data-author="Chantal Gribaumont" data-image-cdn-background-image="//user.oc-static.com/files/206001_207000/206959.jpg" style="background-image: url(&quot;https://oc-user.imgix.net/files/206001_207000/206959.jpg?auto=compress,format&amp;q=80&quot;);"></span>
<h4 itemprop="name">Chantal Gribaumont</h4>
</div>
</a>
</div>
</div>
<div class="col8 course-bottom__category">
<h2 class="highlighted">Découvrez aussi ce cours en...</h2>
<ul class="course-bottom__format">
<li>
<a href="https://openclassrooms.com/ebooks/administrez-vos-bases-de-donnees-avec-mysql" class="text-decoration-none">
<div class="circle circle--x-small">
<span class="circle__content"></span>
<i class="icon-ebook"></i>
<div class="ribbon ribbon--orange">
<div class="ribbon__content">
<span>Premium</span>
</div>
</div>
</div>
<div class="course-bottom__format-entitled">eBook</div>
</a>
</li>
<li>
<a href="http://www.eyrolles.com/Informatique/Livre/administrez-vos-bases-de-donnees-avec-mysql-2e-edition-9791090085671?societe=openclassrooms" target="_blank" class="text-decoration-none">
<div class="circle circle--x-small">
<span class="circle__content"></span>
<i class="icon-book"></i>
</div>
<div class="course-bottom__format-entitled">Livre papier</div>
</a>
</li>
<li>
<a href="https://openclassrooms.com/old-courses-pdf" class="text-decoration-none">
<div class="circle circle--x-small">
<span class="circle__content"></span>
<i class="icon-pdf"></i>
</div>
<div class="course-bottom__format-entitled">PDF</div>
</a>
</li>
</ul>
</div>
</div>
</div>
</footer>
</article>
</div>
</div>
<footer class="footer">
<div class="centered">
<div class="row">
<div class="col3 col6-s  footer__item  linksList  foldable  js-foldable is-closed is-forceOpened" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: &#39;closed&#39;" data-widget="foldable">
<h3 class="linksList__title footer__title foldable__button  js-foldable-button">
OpenClassrooms
<i class="icon-next  foldable__icon"></i>
</h3>
<ul class="linksList__content foldable__content">
<li>
<a href="https://openclassrooms.com/about-us" class="footer__link">Qui sommes-nous ?</a>
</li>
<li>
<a href="https://openclassrooms.com/how-does-it-work" class="footer__link">Fonctionnement de nos cours</a>
</li>
<li>
<a href="http://jobs.openclassrooms.com/" target="_blank" class="footer__link">Recrutement</a>
</li>
<li>
<a href="https://openclassrooms.com/courses/administrez-vos-bases-de-donnees-avec-mysql/triggers#" class="js-zendesk-show footer__link">Nous contacter</a>
</li>
</ul>
</div>
<div class="col3 col6-s  footer__item  linksList  foldable  js-foldable is-closed is-forceOpened" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: &#39;closed&#39;" data-widget="foldable">
<h3 class="linksList__title footer__title foldable__button  js-foldable-button">
Professionnels
<i class="icon-next  foldable__icon"></i>
</h3>
<ul class="linksList__content foldable__content">
<li>
<a href="https://openclassrooms.com/affiliation" class="footer__link">
Affiliation
</a>
</li>
<li>
<a href="https://openclassrooms.com/partners" class="footer__link">Partenaires</a>
</li>
<li>
<a href="https://openclassrooms.com/for-business" class="footer__link">For Business</a>
</li>
</ul>
</div>
<div class="col3 col6-s  footer__item  linksList  foldable  js-foldable is-closed is-forceOpened" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: &#39;closed&#39;" data-widget="foldable">
<h3 class="linksList__title footer__title foldable__button  js-foldable-button">
En plus
<i class="icon-next  foldable__icon"></i>
</h3>
<ul class="linksList__content foldable__content">
<li>
<a href="https://openclassrooms.com/new-teachers" class="footer__link">Créer un cours</a>
</li>
<li>
<a href="https://openclassrooms.com/courses/courselab" class="footer__link">CourseLab</a>
</li>
<li>
<strong>
<a href="https://openclassrooms.com/terms-conditions" class="footer__link">
Conditions Générales d'Utilisation
</a>
</strong>
</li>
</ul>
</div>
<div class="col3 col6-s  footer__item  linksList  foldable  js-foldable is-closed is-forceOpened" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: &#39;closed&#39;" data-widget="foldable">
<h3 class="linksList__title footer__title foldable__button  js-foldable-button">
Suivez-nous
<i class="icon-next  foldable__icon"></i>
</h3>
<ul class="linksList__content foldable__content">
<li>
<a href="http://blog.openclassrooms.com/" class="footer__link">Le blog OpenClassrooms</a>
</li>
<li>
<ul class="footer__socialNetwork">
<li>
<a href="https://www.facebook.com/openclassrooms" title="Facebook" target="_blank" class="roundIcon roundIcon--facebook footer__socialButtons">
<span class="hidden">Facebook</span>
<i class="icon-facebook roundIcon__icon"></i>
</a>
</li>
<li>
<a href="https://twitter.com/openclassrooms" title="Twitter" target="_blank" class="roundIcon roundIcon--twitter footer__socialButtons">
<span class="hidden">Twitter</span>
<i class="icon-twitter roundIcon__icon"></i>
</a>
</li>
<li>
<a href="https://plus.google.com/+OpenClassrooms/posts" title="Google Plus" target="_blank" class="roundIcon roundIcon--youtube footer__socialButtons">
<span class="hidden">Google Plus</span>
<i class="icon-google roundIcon__icon"></i>
</a>
</li>
<li>
<a href="https://instagram.com/openclassrooms" title="Instagram" target="_blank" class="roundIcon roundIcon--instagram footer__socialButtons">
<span class="hidden">Instagram</span>
<i class="icon-instagram roundIcon__icon"></i>
</a>
</li>
<li>
<a href="https://www.youtube.com/user/TheOpenClassrooms" title="Youtube" target="_blank" class="roundIcon roundIcon--googlePlus footer__socialButtons">
<span class="hidden">Youtube</span>
<i class="icon-youtube roundIcon__icon"></i>
</a>
</li>
<li>
<a href="https://www.linkedin.com/company/openclassrooms" title="Linkedin" target="_blank" class="roundIcon roundIcon--linkedin footer__socialButtons">
<span class="hidden">Linkedin</span>
<i class="icon-linkedin roundIcon__icon"></i>
</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="text-right u--positionRelative">
<hr>
<div class="footer__onlineStatus" id="react_conversation_onlineStatus"><!-- react-empty: 1 --></div>
<ul class="no-decoration inline">
<li>
<form data-need-token="" class="footer__langForm" action="https://openclassrooms.com/change-locale/en" method="POST">
<button class="button button--link  footer__link">English</button>
<input type="hidden" name="_token" value="">
</form>
</li>
<li>
<form data-need-token="" class="footer__langForm" action="https://openclassrooms.com/change-locale/es" method="POST">
<button class="button button--link  footer__link">Español</button>
<input type="hidden" name="_token" value="">
</form>
</li>
</ul>
</div>
</div>
</footer>
<script id="_EVENTS-1" type="application/json">
                    {"type":"alias","userId":557391,"integrations":{"Mixpanel":false}}
                </script>
<script type="text/javascript">
    window.analytics=window.analytics||[],window.analytics.methods=["identify","group","track","page","pageview","alias","ready","on","once","off","trackLink","trackForm","trackClick","trackSubmit"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var key=window.analytics.methods[i];window.analytics[key]=window.analytics.factory(key)}window.analytics.load=function(t){if(!document.getElementById("analytics-js")){var a=document.createElement("script");a.type="text/javascript",a.id="analytics-js",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.io/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)}},window.analytics.SNIPPET_VERSION="2.0.9",
    window.analytics.load('mou95e6tdn');
</script>
<script>App.scripts.push("https://cdn.polyfill.io/v2/polyfill.min.js?features=default,es6,Array.prototype.includes,Intl.~locale.fr");</script>
<script>App.scripts.push("/js/oc/packages/vendors-11061c04.js");</script>
<script>App.scripts.push("/js/oc/packages/common-ac685423.js");</script>

<script>App.scripts.push("/js/oc/packages/courseView-1d88d54a.js");</script>

<script>
    (function () {
        function loadScripts(cb) {
            App.scripts.forEach(function (src, index) {
                var script = document.createElement('script');
                script.src = src;
                script.async = false;
                document.body.appendChild(script);

                if (cb && index === App.scripts.length - 1) {
                    script.onload = cb;
                }
            });
        }

        function boot() {
            loadScripts(function () {
                if (App.modules) {
                    App.modules.startAll();
                }
            });
        }

        if (window.addEventListener) {
            window.addEventListener('load', boot, false);
        } else if (window.attachEvent) {
            window.attachEvent('onload', boot);
        } else {
            window.onload = boot;
        }
    }());
</script>
<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"90dc06697a","applicationID":"20302107","transactionName":"NANaYkJXC0ICAhdYVw1Je0NDQgpcTA4AblsPB1FEVWkGXhYTEFRnEwdKQm9GBEMXPhVYXRQ=","queueTime":0,"applicationTime":997,"atts":"GERZFApNGEw=","errorBeacon":"bam.nr-data.net","agent":""}</script>

<script src="./Triggers - Administrez vos bases de données avec MySQL_files/polyfill.min.js.téléchargement"></script><script src="./Triggers - Administrez vos bases de données avec MySQL_files/vendors-11061c04.js.téléchargement"></script><script src="./Triggers - Administrez vos bases de données avec MySQL_files/common-ac685423.js.téléchargement"></script><script src="./Triggers - Administrez vos bases de données avec MySQL_files/courseView-1d88d54a.js.téléchargement"></script><script type="text/javascript" id="">(function(){window.satismeter=window.satismeter||function(){(window.satismeter.q=window.satismeter.q||[]).push(arguments)};window.satismeter.l=1*new Date;var a=document.createElement("script"),b=document.getElementsByTagName("script")[0].parentNode;a.async=1;a.src="https://app.satismeter.com/satismeter.js";b.appendChild(a)})();
satismeter({writeKey:"0j5PPJ3AwSuMNsix",userId:"557391",language:"fr",traits:{email:"christian.nzuzi@gmail.com",name:"Christian Nzuzi",createdAt:"2012-12-15T23:27:04+01:00",country:"",gender:"M",premiumType:"Premium Solo",premium:"true",typeNPS:"course",language:"fr",locale:"fr",title:"Administrez vos bases de données avec MySQL",isCertifying:"true"}});</script><script type="text/javascript" id="">_linkedin_data_partner_id="50013";</script><script type="text/javascript" id="">(function(){var b=document.getElementsByTagName("script")[0],a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src="https://snap.licdn.com/li.lms-analytics/insight.min.js";b.parentNode.insertBefore(a,b)})();</script>
<noscript>
&lt;img height="1" width="1" style="display:none;" alt="" src="https://dc.ads.linkedin.com/collect/?pid=50013&amp;amp;fmt=gif"&gt;
</noscript><script src="./Triggers - Administrez vos bases de données avec MySQL_files/saved_resource" type="text/javascript"></script><script src="./Triggers - Administrez vos bases de données avec MySQL_files/saved_resource(1)" type="text/javascript"></script><div><!-- react-empty: 1 --></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"><div>Copier le lien</div></div><img src="./Triggers - Administrez vos bases de données avec MySQL_files/seg" width="1" height="1" border="0" alt="" style="display: none;"><div id="_atssh" style="visibility: hidden; height: 1px; width: 1px; position: absolute; top: -9999px; z-index: 100000;"><iframe id="_atssh494" title="AddThis utility frame" style="height: 1px; width: 1px; position: absolute; top: 0px; z-index: 100000; border: 0px; left: 0px;" src="./Triggers - Administrez vos bases de données avec MySQL_files/sh.c7f897d92405181bbe1705e3.html"></iframe></div><style id="service-icons-0"></style><div style="width:0px; height:0px; display:none; visibility:hidden;" id="batBeacon0.1654323003921916"><img style="width:0px; height:0px; display:none; visibility:hidden;" id="batBeacon0.022811630425887408" width="0" height="0" alt="" src="./Triggers - Administrez vos bases de données avec MySQL_files/0"></div><iframe src="./Triggers - Administrez vos bases de données avec MySQL_files/pixel.html" style="display: none;"></iframe></body></html>